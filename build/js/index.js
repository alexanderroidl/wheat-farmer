!function r(i,o,a){function s(t,e){if(!o[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,o,a)}return o[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){"use strict";function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("../core/vector")),a=r(e("../core/bit-math")),l=e("./inventory"),c=r(e("../tiles/tile")),f=r(e("../core/util"));n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._statsDisplay=document.createElement("div"),this._worldStats=document.createElement("div"),this._shop=null,this._inventory=null,this._mouseDown=!1,this._mousePos=new o.default(0,0),this._oldWindowWidth=window.innerWidth,this._oldWindowHeight=window.innerHeight,this.onScroll=function(e){},this.onMouseDown=function(e){},this.onMouseUp=function(e){},this.onMouseMove=function(e){},this.onMouseDrag=function(e){},this.onMouseClick=function(e){},this.onResize=function(e,t,n,r){},this.onKeyDown=function(e,t){},this.onKeyUp=function(e,t){},this.setupDOM(),this.setupEvents()}var t,n,r;return t=e,r=[{key:"isMobile",value:function(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(function(e){return navigator.userAgent.match(e)})}},{key:"alert",value:function(e){void 0}},{key:"getParameter",value:function(t){var n,r=null;return location.search.substr(1).split("&").forEach(function(e){(n=e.split("="))[0]===t&&(r=decodeURIComponent(n[1]))}),r}}],(n=[{key:"mouseDown",get:function(){return this._mouseDown}},{key:"mousePos",get:function(){return this._mousePos}},{key:"setupDOM",value:function(){this._statsDisplay.classList.add("gui"),this._statsDisplay.classList.add("stats-display"),this._worldStats.classList.add("world-stats");var e=document.createElement("div");e.classList.add("keyboard-info"),e.innerHTML='\n            <div class="keyboard-info-row">\n                <span>S</span> Open shop\n            </div>\n\n            <div class="keyboard-info-row">\n                <span>E</span> Open inventory\n            </div>\n        ',document.body.append(this._statsDisplay,this._worldStats,e)}},{key:"setupEvents",value:function(){function e(e){if("wheel"==e.type)n=!0;else if(n)return;e=(e.deltaY||-e.wheelDelta||e.detail)>>10||1,t.onScroll(e)}var t=this,n=!1;document.addEventListener("wheel",e),document.addEventListener("mousewheel",e),document.addEventListener("DOMMouseScroll",e),document.addEventListener("mousedown",function(e){t._mouseDown=!0,t.onMouseDown(new o.default(e.screenX,e.screenY))}),document.addEventListener("mouseup",function(e){t._mouseDown=!1,t.onMouseUp(new o.default(e.screenX,e.screenY))}),document.addEventListener("mousemove",function(e){t._mousePos.x=e.clientX,t._mousePos.y=e.clientY,t.onMouseMove(new o.default(e.clientX,e.clientY)),t._mouseDown&&t.onMouseDrag(new o.default(e.clientX,e.clientY))}),document.addEventListener("click",function(e){t.onMouseClick(t._mousePos)}),window.addEventListener("load",function(){t._oldWindowWidth=window.innerWidth}),window.addEventListener("resize",function(){t.onResize(window.innerWidth,window.innerHeight,t._oldWindowWidth,t._oldWindowHeight),t._oldWindowWidth=window.innerWidth,t._oldWindowHeight=window.innerHeight}),document.addEventListener("keydown",function(e){t.onKeyDown(e.keyCode,e.code)}),document.addEventListener("keyup",function(e){t.onKeyUp(e.keyCode,e.code)})}},{key:"getWorldStatsRowHTML",value:function(e,t){void 0===t&&(t="");var n=document.createElement("div");n.classList.add("left"),n.innerHTML=e;var r=document.createElement("div");r.classList.add("right"),r.innerHTML=t;e=document.createElement("div");return e.classList.add("row"),e.append(n,r),2!==t.length||f.default.isAlphaNumeric(t)||e.classList.add("emoji"),e}},{key:"renderWorldStatsHTML",value:function(e){var t,n=this._worldStats.innerHTML="";e.player.equipped&&e.player.equipped.type instanceof c.default&&((t=e.player.equipped.type.getChar(!0))&&(n=t));n=this.getWorldStatsRowHTML("‚úã",n);this._worldStats.append(n);for(var r=0,i=[{icon:"‚åõÔ∏è",text:Math.floor((Date.now()-e.createdAt)/1e3)+"s"},{icon:"üå±",text:e.player.items.getItemAmount("Wheat")},{icon:"üåæ",text:e.player.items.wheat},{icon:"üí∞",text:e.player.items.money+" $"}];r<i.length;r++){var o=i[r],o=this.getWorldStatsRowHTML(o.icon,String(o.text));this._worldStats.append(o)}}},{key:"getCameraDebugHTML",value:function(e){return"\n            <strong>Camera:</strong><br>\n            <strong>X:</strong> ".concat(e.position.x.toFixed(3),"<br>\n            <strong>Y:</strong> ").concat(e.position.y.toFixed(3),"<br>\n            <strong>Zoom:</strong> ").concat(e.zoomAmount.toFixed(3),"\n        ")}},{key:"getMouseDebugHTML",value:function(e){e=e.worldPosFromScreen(this._mousePos);return"\n            <strong>Mouse".concat(this._mouseDown?" (down)":"",":</strong><br>\n            <strong>X:</strong> ").concat(this._mousePos.x,"<br>\n            <strong>Y:</strong> ").concat(this._mousePos.y,"<br>\n            <strong>World X:</strong> ").concat(e.x.toFixed(3),"<br>\n            <strong>World Y:</strong> ").concat(e.y.toFixed(3),"\n        ")}},{key:"getRendererDebugHTML",value:function(e){var t=e.camera,n=a.default.floor(t.position.x/(e.SQUARE_SIZE*t.zoomAmount)),r=Math.ceil((t.position.x+window.innerWidth)/(e.SQUARE_SIZE*t.zoomAmount)),i=a.default.floor(t.position.y/(e.SQUARE_SIZE*t.zoomAmount)),t=Math.ceil((t.position.y+window.innerHeight)/(e.SQUARE_SIZE*t.zoomAmount));return"\n            <strong>Renderer:</strong><br>\n            <strong>X-start:</strong> ".concat(n,"<br> \n            <strong>X-end:</strong> ").concat(r,"<br>\n            <strong>Y-start:</strong> ").concat(i,"<br>\n            <strong>Y-end:</strong> ").concat(t,"\n        ")}},{key:"getMiscDebugHTML",value:function(e){return"\n            <strong>Tiles/Min:</strong> ".concat(e.tilesPlantedPerMin,"\n        ")}},{key:"renderDebug",value:function(e,t,n){n=[this.getCameraDebugHTML(e),this.getMouseDebugHTML(e),this.getRendererDebugHTML(t),this.getMiscDebugHTML(n)];this._statsDisplay.innerHTML='<div class="gui-item">'+n.join('</div><hr><div class="gui-item">')+"</div>"}},{key:"createDialog",value:function(e,t,n){t.classList.add("dialog-content");var r=document.createElement("a");r.href="javascript:void(0)",r.innerHTML=" - (close)",r.addEventListener("click",function(e){"function"==typeof n&&n(),o.remove()});var i=document.createElement("div");i.classList.add("dialog-title"),i.innerHTML=e,i.append(r);r=document.createElement("div");r.classList.add("dialog"),r.append(i,t);var o=document.createElement("div");return o.classList.add("dialog-wrap"),o.addEventListener("click",function(e){e.target===o&&("function"==typeof n&&n(),o.remove())}),o.append(r),o}},{key:"sellDialog",value:function(e,t){e=window.prompt("How many?",String(e));null!==e&&a.default.isInt(e)?t(parseFloat(e)):void 0}},{key:"onShopSellWheat",value:function(n,r){var i=this;this.sellDialog(n.wheat,function(e){var t=n.sellWheat(e);i.closeShop(),i.openShop(n,r),t?void 0:void 0})}},{key:"onShopItemBuy",value:function(n,r,i){var o=this,e=Math.floor(n.money/r.type.buyPrice);this.sellDialog(e,function(e){var t=n.purchaseItem(r.type.name,e);o.closeShop(),o.openShop(n,i),t?void 0:void 0})}},{key:"openShop",value:function(n,r){var i=this;this._shop&&this.closeShop();var o=document.createElement("div"),e=document.createElement("div");e.innerHTML="- Wheat (+".concat(l.Inventory.MONEY_PER_OPIUM,"$) - ").concat(n.wheat," owned"),0<n.wheat?e.addEventListener("click",function(e){i.onShopSellWheat(n,r)}):e.classList.add("disabled"),o.append(e);var a,t=u(n.items);try{for(t.s();!(a=t.n()).done;)(function(){var t=a.value;if(0===t.type.buyPrice&&0===t.type.sellPrice)return;var e=document.createElement("div");e.innerHTML="+ ".concat(t.type.name," (-").concat(t.type.buyPrice,"$) - ").concat(t.amount," owned"),n.money>=t.type.buyPrice?e.addEventListener("click",function(e){i.onShopItemBuy(n,t,r)}):e.classList.add("disabled"),o.append(e)})()}catch(e){t.e(e)}finally{t.f()}this._shop=this.createDialog("Wheat Farmer Shop",o,function(){"function"==typeof r&&r()}),document.body.append(this._shop)}},{key:"closeShop",value:function(){null!==this._shop&&(this._shop.remove(),this._shop=null)}},{key:"openInventory",value:function(n,r,i){var o=this;null!==this._inventory&&this._inventory.remove();var a,s=document.createElement("div"),t=u(r.items);try{for(t.s();!(a=t.n()).done;)!function(){var t=a.value,e=document.createElement("div");e.innerHTML=t.type.name,n.equipped&&n.equipped.type.name===t.type.name&&(e.innerHTML+=" (equipped)"),t.amount<1?e.classList.add("disabled"):e.addEventListener("click",function(e){n.equipped=t,o.openInventory(n,r,i)}),s.append(e)}()}catch(e){t.e(e)}finally{t.f()}this._inventory=this.createDialog("Wheat Farmer Inventory",s,function(){"function"==typeof i&&i()}),document.body.append(this._inventory)}}])&&i(t.prototype,n),r&&i(t,r),e}()},{"../core/bit-math":7,"../core/util":11,"../core/vector":12,"../tiles/tile":16,"./inventory":4}],2:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("../core/vector"));n.default=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.DEFAULT_ZOOM=1,this._position=new o.default(0,0),this._zoomAmount=this.DEFAULT_ZOOM,this._worldSquareSize=e}var e,n,r;return e=t,(n=[{key:"position",get:function(){return this._position}},{key:"zoomAmount",get:function(){return this._zoomAmount}},{key:"worldSquareSize",get:function(){return this._worldSquareSize}},{key:"setup",value:function(e){e=e*this._worldSquareSize*this._zoomAmount;this._position=new o.default(-window.innerWidth/2+e/2,-window.innerHeight/2+e/2)}},{key:"move",value:function(e,t){this._position=this._position.add(e,t)}},{key:"zoom",value:function(e){var t,n;this._zoomAmount+e<.2?this._zoomAmount=.2:(n=new o.default(window.innerWidth/2,window.innerHeight/2),t=this.worldPosFromScreen(n),this._zoomAmount+=e,n=this.worldPosFromScreen(n),this.move(-(n.x-t.x)*this.worldSquareSize*this.zoomAmount,-(n.y-t.y)*this.worldSquareSize*this.zoomAmount))}},{key:"worldPosFromScreen",value:function(e){return new o.default((e.x+this.position.x)/this.worldSquareSize/this._zoomAmount,(e.y+this.position.y)/this.worldSquareSize/this._zoomAmount)}}])&&i(e.prototype,n),r&&i(e,r),t}()},{"../core/vector":12}],3:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("../core/game-loop")),a=r(e("./browser")),s=r(e("./world")),u=r(e("../core/renderer")),l=r(e("../core/vector")),e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loop=new o.default,this.renderer=new u.default,this.world=new s.default,this.browser=new a.default,this._mouseDown=!1,this._lastClickAt=Date.now(),this._paused=!1,this._titleScreenHidden=!1,this.setupLoop(),this.setupMouse(),this.setupWindow(),this.renderer.camera.setup(this.world.SIZE)}var t,n,r;return t=e,r=[{key:"instance",get:function(){return e._instance=!e._instance?new e:e._instance}}],(n=[{key:"setupMouse",value:function(){var n=this;this.browser.onScroll=function(e){n.renderer.camera.zoom(-e/5)},this.browser.onMouseDown=function(e){n._mouseDown=!0},this.browser.onMouseUp=function(e){n._mouseDown=!1},this.browser.onMouseMove=function(e){n.renderer.mousePos=new l.default(e.x,e.y)},this.browser.onMouseClick=function(e){if(!n.renderer.titleScreen.hidden)return n.renderer.titleScreen.onClick(e),void(n._lastClickAt=Date.now());e=n.renderer.camera.worldPosFromScreen(e);n.world.onTileClicked(e.floor())},this.browser.onKeyUp=function(e,t){if(n.renderer.titleScreen.hidden){if("Escape"===t)return n._paused=!0,void(n.renderer.titleScreen.hidden=!1);"KeyS"===t&&(n._paused=!0,n.browser.openShop(n.world.player.items,function(){n._paused=!1})),"KeyE"===t&&(n._paused=!0,n.browser.openInventory(n.world.player,n.world.player.items,function(){n._paused=!1}))}}}},{key:"setupWindow",value:function(){var i=this;this.browser.onResize=function(e,t,n,r){i.renderer.camera.move((n-e)/2,(r-t)/2)}}},{key:"setupLoop",value:function(){var t=this;this.loop.fps=30,this.loop.update=function(e){document.body.classList.toggle("titlescreen",!t.renderer.titleScreen.hidden),t._paused||t.renderer.titleScreen.hidden||(t.world.update(e),t._mouseDown&&250<Date.now()-t._lastClickAt&&(e=t.renderer.camera.worldPosFromScreen(t.renderer.mousePos),t.world.onTileClicked(e.floor()),t._lastClickAt=Date.now()))},this.loop.render=function(e){t._paused||(t.renderer.render(t.world),t.renderer.titleScreen.hidden&&(t.browser.renderWorldStatsHTML(t.world),a.default.getParameter("debug")&&t.browser.renderDebug(t.renderer.camera,t.renderer,t.world)))},this.loop.start()}}])&&i(t.prototype,n),r&&i(t,r),e}();(n.default=e).MOUSE_MOVE_TRESHOLD=10},{"../core/game-loop":9,"../core/renderer":10,"../core/vector":12,"./browser":1,"./world":6}],4:[function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Inventory=n.InventoryItem=void 0;var u=r(e("../tiles/wall-tile")),l=r(e("../tiles/wheat-tile")),c=function e(t){a(this,e),this.amount=0,this.type=t};n.InventoryItem=c;e=function(){function t(){a(this,t),this.wheat=0,this.money=0,this.items=[new c(new l.default),new c(new u.default)]}var e,n,r;return e=t,(n=[{key:"getItemAmount",value:function(e){var t,n=i(this.items);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e===r.type.name)return r.amount}}catch(e){n.e(e)}finally{n.f()}return 0}},{key:"setItemAmount",value:function(e,t){e=this.getItem(e);null!==e&&(e.amount=t)}},{key:"increaseItemAmount",value:function(e){this.setItemAmount(e,this.getItemAmount(e)+1)}},{key:"decreaseItemAmount",value:function(e){var t=this.getItemAmount(e)-1;this.setItemAmount(e,t<0?0:t)}},{key:"getItem",value:function(e){var t,n=i(this.items);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e===r.type.name)return r}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"purchaseItem",value:function(e,t){var n=this.getItem(e);if(null===n)return!1;e=n.type.buyPrice*t;return!(this.money-e<0)&&(this.money-=e,n.amount+=t,!0)}},{key:"sellWheat",value:function(e){return!(this.wheat-e<0)&&(this.wheat-=e,this.money+=e*t.MONEY_PER_OPIUM,!0)}}])&&o(e.prototype,n),r&&o(e,r),t}();(n.Inventory=e).MONEY_PER_OPIUM=3},{"../tiles/wall-tile":17,"../tiles/wheat-tile":18}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./inventory");n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.WHEAT_START_AMOUNT=50,this.items=new r.Inventory,this.equipped=null,this.items.setItemAmount("Wheat",this.WHEAT_START_AMOUNT),this.equipped=this.items.getItem("Wheat")}},{"./inventory":4}],6:[function(e,t,n){"use strict";function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var v=r(e("../tiles/empty-tile")),a=r(e("../tiles/wheat-tile")),o=r(e("./player")),_=r(e("../entities/enemies/robot")),g=r(e("../core/vector")),w=r(e("../core/easings")),u=r(e("../tiles/tile")),b=r(e("../core/bit-math")),l=r(e("../tiles/wall-tile"));n.default=function(){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.SIZE=20,this.CENTER=new g.default(this.SIZE/2,this.SIZE/2).floor(),this._createdAt=Date.now(),this._player=new o.default,this._entities=[],this._plantedTilesPerMin=[],this._enemyGroupsPerMin=[],this._tiles=Array(this.SIZE).fill([]).map(function(){return Array(e.SIZE).fill([]).map(function(){return new v.default})})}var e,n,r;return e=t,(n=[{key:"tiles",get:function(){return this._tiles}},{key:"createdAt",get:function(){return this._createdAt}},{key:"player",get:function(){return this._player}},{key:"entities",get:function(){return this._entities}},{key:"tilesPlantedPerMin",get:function(){return this._plantedTilesPerMin.length}},{key:"enemyGroupsPerMin",get:function(){return this._enemyGroupsPerMin.length}},{key:"isValidTilePos",value:function(e,t){return null!=this._tiles[t]&&null!=this._tiles[t][e]}},{key:"onTileClicked",value:function(e){if(this.isValidTilePos(e.x,e.y)){var t=null,n=this._tiles[e.y][e.x],r=this._player.items.getItemAmount("Wheat"),i=this._player.items.getItemAmount("Wall");if(n.onClicked(),this._player.equipped&&this._player.equipped.type instanceof u.default&&n instanceof v.default&&(this._player.equipped.type instanceof a.default&&0<r&&(this._player.items.decreaseItemAmount("Wheat"),t=new a.default),this._player.equipped.type instanceof l.default&&0<i&&(this._player.items.decreaseItemAmount("Wall"),i-1==0&&(this._player.equipped=this._player.items.getItem("Wheat")),t=new l.default)),n instanceof a.default&&1<=n.growthState){for(var o=null;null===o||r+o===0;)o=n.dropSeeds();this._player.items.setItemAmount("Wheat",r+o),this._player.items.wheat+=1,t=new v.default}n instanceof l.default&&(this._player.items.increaseItemAmount("Wall"),t=new v.default),null!==t&&(t.damage=n.damage,(this._tiles[e.y][e.x]=t)instanceof v.default||this._plantedTilesPerMin.push(t.timeCreated))}}},{key:"getSurroundingTileCoords",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=[],i=e.y-Math.ceil(t);i<=e.y+Math.ceil(t);i++)if(this._tiles[i])for(var o=e.x-Math.ceil(t);o<=e.x+Math.ceil(t);o++)!this._tiles[i][o]||o===e.x&&i===e.y&&!n||new g.default(e.x-o,e.y-i).length>Math.ceil(t)||r.push(new g.default(o,i));return r}},{key:"getRandomOutsidePos",value:function(){var e=3*this.CENTER.length;return new g.default(e,0).rotate(360*Math.random()).add(this.CENTER.x,this.CENTER.y)}},{key:"spawnEnemy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length?arguments[1]:void 0;null===e&&(e=this.getRandomOutsidePos()),t&&(t=new g.default(Math.random()*t.x,Math.random()*t.y).rotate(360*Math.random()),e=e.add(t.x,t.y));e=new _.default(e.x,e.y);return this._entities.push(e),e}},{key:"update",value:function(d){var p=this;this._plantedTilesPerMin=this._plantedTilesPerMin.filter(function(e){return Date.now()-e<6e4}),this._enemyGroupsPerMin=this._enemyGroupsPerMin.filter(function(e){return Date.now()-e<6e4});for(var e=0;e<this._tiles.length;e++)for(var t=0;t<this._tiles[e].length;t++)this._tiles[e][t].update(d);var n=Math.ceil((this.tilesPlantedPerMin-40)/10);if(0<n){var r=n-this.enemyGroupsPerMin;if(0<r)for(var i=0;i<r;i++){for(var o=b.default.floor(3*Math.random())+1,a=this.getRandomOutsidePos(),s=0;s<o;s++)this.spawnEnemy(a,new g.default(3*Math.random(),3*Math.random())).target=new g.default(Math.random()*this.SIZE,Math.random()*this.SIZE).floor();this._enemyGroupsPerMin.push(Date.now())}}var y,u=m(this.entities);try{for(u.s();!(y=u.n()).done;)!function(){var e,t,n=y.value;if(n instanceof _.default&&n.hasExploded){p._entities=p._entities.filter(function(e){return e!=n});var r,i=n.position.floor(),o=b.default.floor(3*Math.random()),a=m(p.getSurroundingTileCoords(i,o));try{for(a.s();!(r=a.n()).done;){var s,u=r.value,l=u.add(.5,.5).add(-(i.x+.5),-(i.y+.5)).length,c=1-l/3,f=.5<2*Math.random()/(l+1),h=p._tiles[u.y][u.x];f?((s=new v.default).damage=h.damage+c,p._tiles[u.y][u.x]=s):h.damage=h.damage+c}}catch(e){a.e(e)}finally{a.f()}}null!==n.target&&(n.isMoving||(n.isMoving=!0,n.initialPosition=new g.default(n.position.x,n.position.y)),e=n.speed*(d/1e3),0<(t=new g.default(n.target.x-n.position.x,n.target.y-n.position.y).length)&&n.initialPosition&&(o=new g.default(n.target.x-n.initialPosition.x,n.target.y-n.initialPosition.y).length,e*=1+2*w.default.easeInOutQuart(1-t/o)),n.position.x+=e*(n.target.x-n.position.x)/(t=t<=e?e:t),n.position.y+=e*(n.target.y-n.position.y)/t,n.position.x===n.target.x&&n.position.y===n.target.y&&(n instanceof _.default&&n.explode(),n.target=null,n.isMoving=!1,n.initialPosition=null))}()}catch(e){u.e(e)}finally{u.f()}}}])&&i(e.prototype,n),r&&i(e,r),t}()},{"../core/bit-math":7,"../core/easings":8,"../core/vector":12,"../entities/enemies/robot":13,"../tiles/empty-tile":15,"../tiles/tile":16,"../tiles/wall-tile":17,"../tiles/wheat-tile":18,"./player":5}],7:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"floor",value:function(e){return e<<0}},{key:"round",value:function(e){return.5+e<<0}},{key:"abs",value:function(e){return(e^e>>31)-(e>>31)}},{key:"isInt",value:function(e){var t=parseFloat(e);return!isNaN(e)&&(0|t)===t}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}()},{}],8:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"easeInCubic",value:function(e){return e*e*e}},{key:"easeInOutQuart",value:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}()},{}],9:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.simulationStep=1e3/60,this.frameDelta=0,this.lastFrameTimeMs=0,this.fps=60,this.lastFpsUpdate=0,this.framesThisSecond=0,this.numUpdateSteps=0,this.minFrameDelay=0,this.running=!1,this.started=!1,this.panic=!1,this.begin=function(e,t){},this.end=function(e,t){},this.update=function(e){},this.render=function(e){},this.animate=this.animate.bind(this)}var t,n,r;return t=e,(n=[{key:"maxAllowedFps",get:function(){return 1e3/this.minFrameDelay},set:function(e){0===(e=null==e?1/0:e)?this.stop():this.minFrameDelay=1e3/e}},{key:"resetFrameDelta",value:function(){var e=this.frameDelta;return this.frameDelta=0,e}},{key:"start",value:function(){var t=this;this.started||(this.started=!0,this.rafHandle=requestAnimationFrame(function(e){t.render(1),t.running=!0,t.lastFrameTimeMs=e,t.lastFpsUpdate=e,t.framesThisSecond=0,t.rafHandle=requestAnimationFrame(t.animate)}))}},{key:"stop",value:function(){this.running=!1,this.started=!1,this.rafHandle&&cancelAnimationFrame(this.rafHandle)}},{key:"animate",value:function(e){if(this.rafHandle=requestAnimationFrame(this.animate),!(e<this.lastFrameTimeMs+this.minFrameDelay)){for(this.frameDelta+=e-this.lastFrameTimeMs,this.lastFrameTimeMs=e,this.begin(e,this.frameDelta),e>this.lastFpsUpdate+1e3&&(this.fps=.25*this.framesThisSecond+.75*this.fps,this.lastFpsUpdate=e,this.framesThisSecond=0),++this.framesThisSecond,this.numUpdateSteps=0;this.frameDelta>=this.simulationStep;)if(this.update(this.simulationStep),this.frameDelta-=this.simulationStep,240<=++this.numUpdateSteps){this.panic=!0;break}this.render(this.frameDelta/this.simulationStep),this.end(this.fps,this.panic),this.panic=!1}}}])&&i(t.prototype,n),r&&i(t,r),e}()},{}],10:[function(e,t,n){"use strict";function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("../base/camera")),v=r(e("../tiles/empty-tile")),_=r(e("./util")),u=r(e("./vector")),a=r(e("../title-screen/title-screen")),g=r(e("./bit-math"));n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.FONT_SIZE=12,this.FONT_EMOJI_SIZE=16,this.SQUARE_SIZE=32,this._canvas=document.createElement("canvas"),this.camera=new o.default(this.SQUARE_SIZE),this.titleScreen=new a.default,this.mousePos=new u.default(0,0),this.equippedItem=null,this.setupCanvas()}var t,n,r;return t=e,(n=[{key:"width",get:function(){return this._canvas.width}},{key:"height",get:function(){return this._canvas.height}},{key:"z",get:function(){return this.camera.zoomAmount}},{key:"setupCanvas",value:function(){var t=this;this.setToWindowSize(),window.addEventListener("load",function(e){t.setToWindowSize()}),window.addEventListener("resize",function(e){t.setToWindowSize()}),document.body.append(this._canvas)}},{key:"setToWindowSize",value:function(){this._canvas.width=window.innerWidth,this._canvas.height=window.innerHeight}},{key:"paintChar",value:function(e,t,n,r,i,o){o&&(e.shadowColor="white",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=g.default.floor(5*this.z));var a=this.FONT_SIZE,o="Courier New";_.default.isAlphaNumeric(t)||(a=this.FONT_EMOJI_SIZE,o="OpenMoji");i=new u.default((this.SQUARE_SIZE*r+this.SQUARE_SIZE/2)*this.z-this.camera.position.x,(this.SQUARE_SIZE*i+this.SQUARE_SIZE/2)*this.z-this.camera.position.y),a=g.default.floor(a*this.z);e.fillStyle=n,e.textAlign="center",e.textBaseline="middle",e.font="".concat(a,'px "').concat(o,'"'),e.fillText(t,g.default.floor(i.x),g.default.floor(i.y)),e.shadowBlur=0}},{key:"paintSquare",value:function(e,t,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=6<arguments.length?arguments[6]:void 0,s=7<arguments.length?arguments[7]:void 0,u=this.camera.zoomAmount,l=e.globalAlpha;null!==o&&(e.globalAlpha=o),e.fillStyle=i,e.fillRect(this.SQUARE_SIZE*t*u-this.camera.position.x,this.SQUARE_SIZE*n*u-this.camera.position.y,this.SQUARE_SIZE*u,this.SQUARE_SIZE*u),a&&this.paintChar(e,a,s||"white",t,n,r),e.globalAlpha=l}},{key:"outlineSquare",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;e.strokeStyle="white",e.lineWidth=r*this.z,e.strokeRect((this.SQUARE_SIZE*t+r/2)*this.z-this.camera.position.x,(this.SQUARE_SIZE*n+r/2)*this.z-this.camera.position.y,(this.SQUARE_SIZE-r)*this.z,(this.SQUARE_SIZE-r)*this.z)}},{key:"paintProgressBar",value:function(e,t,n,r,i,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"green",s=e.globalAlpha;e.globalAlpha=.65,e.fillStyle="white",e.fillRect(this.SQUARE_SIZE*t*this.z-this.camera.position.x,this.SQUARE_SIZE*n*this.z-this.camera.position.y,this.SQUARE_SIZE*r*this.z,this.SQUARE_SIZE*i*this.z),e.fillStyle=a,e.fillRect((this.SQUARE_SIZE*t+1)*this.z-this.camera.position.x,(this.SQUARE_SIZE*n+1)*this.z-this.camera.position.y,(this.SQUARE_SIZE*r-2)*this.z*o,(this.SQUARE_SIZE*i-2)*this.z),e.globalAlpha=s}},{key:"render",value:function(e){var t=this._canvas.getContext("2d");if(t){var n=this.camera.worldPosFromScreen(this.mousePos);t.clearRect(0,0,this._canvas.width,this._canvas.height);for(var r=Math.floor(this.camera.position.x/(this.SQUARE_SIZE*this.camera.zoomAmount)),i=Math.ceil((this.camera.position.x+window.innerWidth)/(this.SQUARE_SIZE*this.camera.zoomAmount)),o=Math.floor(this.camera.position.y/(this.SQUARE_SIZE*this.camera.zoomAmount)),a=Math.ceil((this.camera.position.y+window.innerHeight)/(this.SQUARE_SIZE*this.camera.zoomAmount)),s=o;s<a;s++)for(var u=r;u<i;u++)this.paintSquare(t,u,s,!1,_.default.lightenDarkenColor(v.default.COLOR,8));for(var l=0;l<e.tiles.length;l++)for(var c=0;c<e.tiles[l].length;c++){t.globalAlpha=1;var f=g.default.floor(n.x)===c&&g.default.floor(n.y)===l,h=e.tiles[l][c];h.render(this,t,c,l,f),f&&this.outlineSquare(t,c,l),h.renderLatest(this,t,c,l,f)}var d,p=m(e.entities);try{for(p.s();!(d=p.n()).done;){var y=d.value;this.paintChar(t,y.getChar(),"white",y.position.x,y.position.y,!1)}}catch(e){p.e(e)}finally{p.f()}this.titleScreen.render(this,t)}}}])&&i(t.prototype,n),r&&i(t,r),e}()},{"../base/camera":2,"../tiles/empty-tile":15,"../title-screen/title-screen":21,"./bit-math":7,"./util":11,"./vector":12}],11:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s)}var e,t,n;return e=s,n=[{key:"isAlphaNumeric",value:function(e){return s.alphaNumericRegExp.test(e)}},{key:"leadZeros",value:function(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}},{key:"mixColors",value:function(e,t,n){var r=parseInt(e[1]+e[2],16),i=parseInt(e[3]+e[4],16),o=parseInt(e[5]+e[6],16),a=parseInt(t[1]+t[2],16),e=parseInt(t[3]+t[4],16),t=parseInt(t[5]+t[6],16),a=Math.round(s.mix(r,a,n)),e=Math.round(s.mix(i,e,n)),n=Math.round(s.mix(o,t,n));return s.generateHexFromRGB(a,e,n)}},{key:"generateHexFromRGB",value:function(e,t,n){for(var r=e.toString(16),i=t.toString(16),o=n.toString(16);r.length<2;)r="0"+r;for(;i.length<2;)i="0"+i;for(;o.length<2;)o="0"+o;return"#"+r+i+o}},{key:"mix",value:function(e,t,n){return e+n*(t-e)}},{key:"lightenDarkenColor",value:function(e,t){var n=!1;"#"==e[0]&&(e=e.slice(1),n=!0);var r=parseInt(e,16),i=(r>>16)+t;255<i?i=255:i<0&&(i=0);e=(r>>8&255)+t;255<e?e=255:e<0&&(e=0);t=(255&r)+t;return 255<t?t=255:t<0&&(t=0),(n?"#":"")+(t|e<<8|i<<16).toString(16)}}],(t=null)&&r(e.prototype,t),n&&r(e,n),s}();(n.default=i).alphaNumericRegExp=new RegExp("[\\w ]+")},{}],12:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("./bit-math"));n.default=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e,this.y=t}var e,t,r;return e=n,(t=[{key:"length",get:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"add",value:function(e,t){return new n(this.x+e,this.y+t)}},{key:"floor",value:function(){return new n(o.default.floor(this.x),o.default.floor(this.y))}},{key:"rotate",value:function(e){var t=-e*(Math.PI/180),e=Math.cos(t),t=Math.sin(t);return new n(Math.round(1e4*(this.x*e-this.y*t))/1e4,Math.round(1e4*(this.x*t+this.y*e))/1e4)}},{key:"toString",value:function(){return"Vector (".concat(this.x,", ").concat(this.y,")")}}])&&i(e.prototype,t),r&&i(e,r),n}()},{"./bit-math":7}],13:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("../../core/vector"));n.default=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.EXPLODE_TIME=3e3,this.name="Robot",this.speed=2,this.initialPosition=null,this.target=null,this.isHostile=!0,this.isMoving=!1,this._explodedAt=null,this.position=new o.default(e,t)}var e,t,r;return e=n,(t=[{key:"explosionProgress",get:function(){if(null===this._explodedAt)return 0;var e=(Date.now()-this._explodedAt)/this.EXPLODE_TIME;return 1<e?1:e}},{key:"hasExploded",get:function(){return 1===this.explosionProgress}},{key:"getChar",value:function(){if(0<this.explosionProgress){if(this.explosionProgress<=.6)return"üí£";if(.6<this.explosionProgress&&this.explosionProgress<.8)return"‚ú®";if(.8<this.explosionProgress&&this.explosionProgress<1)return"üí•";if(1<=this.explosionProgress)return"üî•"}return"ü§ñ"}},{key:"explode",value:function(){this._explodedAt=Date.now()}}])&&i(e.prototype,t),r&&i(e,r),n}()},{"../../core/vector":12}],14:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});n=r(e("./base/game")),e=r(e("./base/browser"));n.default.instance,e.default.isMobile()&&e.default.alert("Warning: This is an early-alpha build of the game, mobile is not yet supported.")},{"./base/browser":1,"./base/game":3}],15:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=r?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var f=r(e("./tile")),e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,f.default);var e,t,n,r=l(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.apply(this,arguments)).name="Empty",e.timeCreated=Date.now(),e}return e=o,(t=[{key:"getChar",value:function(){return"x"}},{key:"getHexColor",value:function(){return this.getDamagedHexColor(o.COLOR)}},{key:"getCharColor",value:function(){return"#666666"}},{key:"onClicked",value:function(){}},{key:"renderLatest",value:function(e,t,n,r,i){s(c(o.prototype),"renderLatest",this).call(this,e,t,n,r,i)}}])&&a(e.prototype,t),n&&a(e,n),o}();(n.default=e).COLOR="#ebb434"},{"./tile":16}],16:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("../core/util")),e=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="",this.timeCreated=Date.now(),this._damage=0}var e,n,r;return e=t,(n=[{key:"damage",get:function(){return this._damage},set:function(e){this._damage=1<e?1:e<0?0:e}},{key:"hasCollision",value:function(){return!1}},{key:"getChar",value:function(){return"x"}},{key:"getDamagedHexColor",value:function(e){var t=50*-this.damage;return o.default.lightenDarkenColor(e,t)}},{key:"getHexColor",value:function(){return"#000000"}},{key:"getCharColor",value:function(){return"#000000"}},{key:"onClicked",value:function(){}},{key:"paintSquare",value:function(e,t,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=this.getHexColor();a&&e.paintSquare(t,n,r,i,a,o,this.getChar(),this.getCharColor())}},{key:"render",value:function(e,t,n,r,i){this.paintSquare(e,t,n,r,i,5<arguments.length&&void 0!==arguments[5]?arguments[5]:null)}},{key:"renderLatest",value:function(e,t,n,r,i){i&&0<this.damage&&e.paintProgressBar(t,n+.125,r+.15,.75,.15,this.damage,"red")}},{key:"update",value:function(e){this.damage-=e/t.DAMAGE_HEAL_TIME}}])&&i(e.prototype,n),r&&i(e,r),t}();(n.default=e).DAMAGE_HEAL_TIME=6e4,e.COLOR=""},{"../core/util":11}],17:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=r?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var f=r(e("./tile"));n.default=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,f.default);var e,t,n,r=l(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.apply(this,arguments)).buyPrice=10,e.sellPrice=4,e.name="Wall",e}return e=o,(t=[{key:"hasCollision",value:function(){return!0}},{key:"getChar",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?"üö´":null}},{key:"getHexColor",value:function(){return"#111111"}},{key:"getCharColor",value:function(){return null}},{key:"onClicked",value:function(){}},{key:"renderLatest",value:function(e,t,n,r,i){s(c(o.prototype),"renderLatest",this).call(this,e,t,n,r,i)}}])&&a(e.prototype,t),n&&a(e,n),o}()},{"./tile":16}],18:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=r?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==i(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var f=r(e("../core/util")),h=r(e("./empty-tile")),d=r(e("./tile")),p=r(e("../core/easings")),y=r(e("../core/bit-math"));n.default=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,d.default);var e,t,n,r=l(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.apply(this,arguments)).buyPrice=0,e.sellPrice=0,e.GROWTH_TIME=7500,e.MIN_SEED_DROP=0,e.MAX_SEED_DROP=3,e.COLOR_GROWN="#7dbf21",e.name="Wheat",e}return e=a,(t=[{key:"growthState",get:function(){var e=(Date.now()-this.timeCreated)/this.GROWTH_TIME;return e<1?e*(1-this.damage):1<e?1:e}},{key:"getChar",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]||this.growthState<.4?"üå±":1<=this.growthState?"üåæ":"üåø"}},{key:"getCharColor",value:function(){return"#ffffff"}},{key:"getHexColor",value:function(){var e=p.default.easeInCubic(this.growthState),e=f.default.mixColors(h.default.COLOR,this.COLOR_GROWN,e);return this.getDamagedHexColor(e)}},{key:"onClicked",value:function(){}},{key:"dropSeeds",value:function(){return y.default.floor(Math.random()*(this.MAX_SEED_DROP-this.MIN_SEED_DROP+1))+this.MIN_SEED_DROP}},{key:"render",value:function(e,t,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;s(c(a.prototype),"render",this).call(this,e,t,n,r,i,o)}},{key:"renderLatest",value:function(e,t,n,r,i){s(c(a.prototype),"renderLatest",this).call(this,e,t,n,r,i),i&&this.growthState<1&&e.paintProgressBar(t,n+.125,r+.7,.75,.15,this.growthState)}}])&&o(e.prototype,t),n&&o(e,n),a}()},{"../core/bit-math":7,"../core/easings":8,"../core/util":11,"./empty-tile":15,"./tile":16}],19:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("../core/util"));n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.music=new Audio("audio/210107blunt164.ogg"),this.music.loop=!0}var t,n,r;return t=e,(n=[{key:"render",value:function(e,t){t.fillStyle="#111111",t.fillRect(0,0,e.width,e.height),t.fillStyle="#f3bc3c",t.textAlign="center",t.textBaseline="middle",t.font="".concat(20,'px "Courier New"'),t.shadowColor=o.default.lightenDarkenColor("#f3bc3c",20),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=7,t.fillText("Click to load".toUpperCase().split("").join(" "),e.width/2,e.height/2),t.shadowBlur=0}},{key:"update",value:function(e){}},{key:"onClick",value:function(e){this.music.paused&&this.music.play()}}])&&i(t.prototype,n),r&&i(t,r),e}()},{"../core/util":11}],20:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var l=r(e("../core/util"));n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._logo=[" __     __     __  __     ______     ______     ______      ______   ______     ______     __    __     ______     ______    ",'/\\ \\  _ \\ \\   /\\ \\_\\ \\   /\\  ___\\   /\\  __ \\   /\\__  _\\    /\\  ___\\ /\\  __ \\   /\\  == \\   /\\ "-./  \\   /\\  ___\\   /\\  == \\   ','\\ \\ \\/ ".\\ \\  \\ \\  __ \\  \\ \\  __\\   \\ \\  __ \\  \\/_/\\ \\/    \\ \\  __\\ \\ \\  __ \\  \\ \\  __<   \\ \\ \\-./\\ \\  \\ \\  __\\   \\ \\  __<   ',' \\ \\__/".~\\_\\  \\ \\_\\ \\_\\  \\ \\_____\\  \\ \\_\\ \\_\\    \\ \\_\\     \\ \\_\\    \\ \\_\\ \\_\\  \\ \\_\\ \\_\\  \\ \\_\\ \\ \\_\\  \\ \\_____\\  \\ \\_\\ \\_\\ ',"  \\/_/   \\/_/   \\/_/\\/_/   \\/_____/   \\/_/\\/_/     \\/_/      \\/_/     \\/_/\\/_/   \\/_/ /_/   \\/_/  \\/_/   \\/_____/   \\/_/ /_/ "],this._description=["Plant wheat seeds, harvest crops and sell them.","","Avoid robot attacks at all costs."],this._credits=["Programming by Alexander Roidl and Julian Arnold","Music by Julian Arnold"]}var t,n,r;return t=e,(n=[{key:"render",value:function(e,t){var n=this._logo.reduce(function(e,t){return e.length>t.length?e:t}).length,r=e.width/(20*n)*1.65*.75;t.fillStyle="#111111",t.fillRect(0,0,e.width,e.height),t.fillStyle="#f3bc3c",t.textAlign="center",t.textBaseline="middle",t.font="".concat(20*r,'px "Courier New"'),t.shadowColor=l.default.lightenDarkenColor("#f3bc3c",20),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=7;for(var i=20*Math.sin(Date.now()/1e3%4),o=0;o<this._logo.length;o++){var a=20*r*(o-this._logo.length);t.fillText(this._logo[o],e.width/2,e.height/2+a+i)}r=20,t.textBaseline="top",t.font="".concat(r,'px "Courier New"');for(var s=0;s<this._description.length;s++)t.fillText(this._description[s],e.width/2,e.height/2+1.5*r*(s+3));r=15,t.textBaseline="bottom",t.font="".concat(r,'px "Courier New"'),t.shadowBlur=5;for(var u=0;u<this._credits.length;u++)t.fillText(this._credits[u],e.width/2,e.height-4.5*r+1.5*r*u);t.shadowBlur=0}},{key:"update",value:function(e){}},{key:"onClick",value:function(e){}}])&&i(t.prototype,n),r&&i(t,r),e}()},{"../core/util":11}],21:[function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var a=r(e("./title-screen-logo-slide")),u=r(e("./title-screen-load"));n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hidden=!1,this._slideId=0,this._slides=[new u.default,new a.default],this._clickedAt=null}var t,n,r;return t=e,(n=[{key:"hidden",get:function(){return this._hidden},set:function(e){this._hidden=e}},{key:"onClick",value:function(e){if(null===this._clickedAt&&(this._clickedAt=Date.now()),this._slides[this._slideId].onClick(e),this._slideId+1>this._slides.length-1){var t,n=i(this._slides);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r instanceof u.default){r.music.volume=.25;break}}}catch(e){n.e(e)}finally{n.f()}this._hidden=!0}else this._slideId++}},{key:"update",value:function(e){this._slides[this._slideId]&&this._slides[this._slideId].update(e)}},{key:"render",value:function(e,t){this._hidden||this._slides[this._slideId]&&this._slides[this._slideId].render(e,t)}}])&&o(t.prototype,n),r&&o(t,r),e}()},{"./title-screen-load":19,"./title-screen-logo-slide":20}]},{},[14]);