!function i(n,o,s){function a(t,e){if(!o[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},n[t][0].call(r.exports,function(e){return a(n[t][1][e]||e)},r,r.exports,i,n,o,s)}return o[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,r){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,r){var i=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return i(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":1}],3:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],4:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],5:[function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}t.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],6:[function(e,t,r){var n=e("./superPropBase.js");function i(){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(e,t,r){var i=n(e,t);if(i)return i=Object.getOwnPropertyDescriptor(i,t),i.get?i.get.call(arguments.length<3?e:r):i.value},t.exports.__esModule=!0,t.exports.default=t.exports,i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{"./superPropBase.js":14}],7:[function(e,t,r){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],8:[function(e,t,r){var i=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":13}],9:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],10:[function(e,t,r){t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{}],11:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],12:[function(e,t,r){var i=e("./typeof.js").default,n=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return n(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":3,"./typeof.js":16}],13:[function(e,r,t){function i(e,t){return r.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r.exports.__esModule=!0,r.exports.default=r.exports,i(e,t)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports},{}],14:[function(e,t,r){var i=e("./getPrototypeOf.js");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./getPrototypeOf.js":7}],15:[function(e,t,r){var i=e("./arrayWithoutHoles.js"),n=e("./iterableToArray.js"),o=e("./unsupportedIterableToArray.js"),s=e("./nonIterableSpread.js");t.exports=function(e){return i(e)||n(e)||o(e)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithoutHoles.js":2,"./iterableToArray.js":10,"./nonIterableSpread.js":11,"./unsupportedIterableToArray.js":17}],16:[function(e,t,r){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],17:[function(e,t,r){var i=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":1}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/display"),p=e("@pixi/utils"),e={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};i.DisplayObject.mixin(e);function n(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(p.isMobile.tablet||p.isMobile.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}Object.defineProperty(n.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),n.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},n.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},n.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null!=(e=this.renderer.view.parentNode)&&e.appendChild(this.div))},n.prototype.deactivate=function(){var e;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null!=(e=this.div.parentNode)&&e.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},n.prototype.update=function(){var e=performance.now();if(!(p.isMobile.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.left,r=e.top,i=e.width,e=e.height,n=this.renderer,o=n.width,s=n.height,n=n.resolution,a=i/o*n,u=e/s*n;(h=this.div).style.left=t+"px",h.style.top=r+"px",h.style.width=o+"px",h.style.height=s+"px";for(var l=0;l<this.children.length;l++){var h,c,f,d=this.children[l];d.renderId!==this.renderId?(d._accessibleActive=!1,p.removeItems(this.children,l,1),this.div.removeChild(d._accessibleDiv),this.pool.push(d._accessibleDiv),d._accessibleDiv=null,l--):(h=d._accessibleDiv,c=d.hitArea,f=d.worldTransform,d.hitArea?(h.style.left=(f.tx+c.x*f.a)*a+"px",h.style.top=(f.ty+c.y*f.d)*u+"px",h.style.width=c.width*f.a*a+"px",h.style.height=c.height*f.d*u+"px"):(c=d.getBounds(),this.capHitArea(c),h.style.left=c.x*a+"px",h.style.top=c.y*u+"px",h.style.width=c.width*a+"px",h.style.height=c.height*u+"px",h.title!==d.accessibleTitle&&null!==d.accessibleTitle&&(h.title=d.accessibleTitle),h.getAttribute("aria-label")!==d.accessibleHint&&null!==d.accessibleHint&&h.setAttribute("aria-label",d.accessibleHint)),d.accessibleTitle===h.title&&d.tabIndex===h.tabIndex||(h.title=d.accessibleTitle,h.tabIndex=d.tabIndex,this.debug&&this.updateDebugHTML(h)))}this.renderId++}},n.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},n.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,r=t.width,t=t.height;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>t&&(e.height=t-e.y)},n.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,(e._accessibleDiv=t).displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},n.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,e=e.target.displayObject,r=t.eventData;t.dispatchEvent(e,"click",r),t.dispatchEvent(e,"pointertap",r),t.dispatchEvent(e,"tap",r)},n.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,e=e.target.displayObject,r=t.eventData;t.dispatchEvent(e,"mouseover",r)},n.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,e=e.target.displayObject,r=t.eventData;t.dispatchEvent(e,"mouseout",r)},n.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},n.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},n.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r.AccessibilityManager=n,r.accessibleTarget=e},{"@pixi/display":23,"@pixi/utils":85}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/display"),n=e("@pixi/core"),e=(o.registerPlugin=function(e){o._plugins.push(e)},o.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(o.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),o.prototype.destroy=function(e,t){var r=this,i=o._plugins.slice(0);i.reverse(),i.forEach(function(e){e.destroy.call(r)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},o._plugins=[],o);function o(t){var r=this;this.stage=new i.Container,t=Object.assign({forceCanvas:!1},t),this.renderer=n.autoDetectRenderer(t),o._plugins.forEach(function(e){e.init.call(r,t)})}function s(){}s.init=function(e){var r=this;Object.defineProperty(this,"resizeTo",{set:function(e){globalThis.removeEventListener("resize",this.queueResize),(this._resizeTo=e)&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){var e,t;r._resizeTo&&(r.cancelResize(),t=r._resizeTo===globalThis.window?(e=globalThis.innerWidth,globalThis.innerHeight):(e=(t=r._resizeTo).clientWidth,t.clientHeight),r.renderer.resize(e,t))},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},s.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e.registerPlugin(s),r.Application=e},{"@pixi/core":22,"@pixi/display":23}],20:[function(e,N,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var R=e("@pixi/core"),f=e("@pixi/loaders"),d=e("@pixi/utils"),A=e("@pixi/constants"),P=((e=t.INTERNAL_FORMATS||(t.INTERNAL_FORMATS={}))[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",(e={})[t.INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,e[t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,e[t.INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,e[t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,e[t.INTERNAL_FORMATS.COMPRESSED_R11_EAC]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_RG11_EAC]=1,e[t.INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]=1,e[t.INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]=1,e[t.INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,e[t.INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,e[t.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,e[t.INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]=.5,e[t.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,e[t.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,e),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function r(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function n(i,n){var o,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(i,u)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}r(s,o=R.BufferResource),s.prototype.onBlobLoaded=function(e){},s.prototype.load=function(){return o=this,s=void 0,a=Promise,u=function(){var t;return n(this,function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new R.ViewableBuffer(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}})},new(a=a||Promise)(function(e,t){function r(e){try{n(u.next(e))}catch(e){t(e)}}function i(e){try{n(u.throw(e))}catch(e){t(e)}}function n(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,i)}n((u=u.apply(o,s||[])).next())});var o,s,a,u};var o,e=s;function s(e,t){void 0===t&&(t={width:1,height:1,autoLoad:!0});var r,i=this,e="string"==typeof e?(r=e,new Uint8Array):(r=null,e);return(i=o.call(this,e,t)||this).origin=r,i.buffer=e?new R.ViewableBuffer(e):null,i.origin&&!1!==t.autoLoad&&i.load(),e&&e.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}r(u,a=e),u.prototype.upload=function(e,t,r){var i=e.gl;if(!e.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var n=0,o=this.levels;n<o;n++){var s=this._levelBuffers[n],a=s.levelID,u=s.levelWidth,l=s.levelHeight,s=s.levelBuffer;i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,u,l,0,s)}return!0},u.prototype.onBlobLoaded=function(){this._levelBuffers=u._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},u._formatToExtension=function(e){if(33776<=e&&e<=33779)return"s3tc";if(37488<=e&&e<=37497)return"etc";if(35840<=e&&e<=35843)return"pvrtc";if(36196<=e)return"etc1";if(35986<=e&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},u._createLevelBuffers=function(e,t,r,i,n,o,s){for(var a=new Array(r),u=e.byteOffset,l=o,h=s,c=l+i-1&~(i-1),f=h+n-1&~(n-1),d=c*f*P[t],p=0;p<r;p++)a[p]={levelID:p,levelWidth:1<r?l:c,levelHeight:1<r?h:f,levelBuffer:new Uint8Array(e.buffer,u,d)},u+=d,d=(c=(l=l>>1||1)+i-1&~(i-1))*(f=(h=h>>1||1)+n-1&~(n-1))*P[t];return a};var a,C=u;function u(e,t){var r=a.call(this,e,t)||this;return r.format=t.format,r.levels=t.levels||1,r._width=t.width,r._height=t.height,r._extension=u._formatToExtension(r.format),(t.levelBuffers||r.buffer)&&(r._levelBuffers=t.levelBuffers||u._createLevelBuffers(e instanceof Uint8Array?e:r.buffer.uint8View,r.format,r.levels,4,4,r.width,r.height)),r}p.use=function(r,i){var e=r.data;if(r.type===f.LoaderResource.TYPE.JSON&&e&&e.cacheID&&e.textures){for(var t,n,o=e.textures,s=void 0,a=void 0,u=0,l=o.length;u<l;u++){var h=o[u],c=h.src,h=h.format;if(h||(a=c),p.textureFormats[h]){s=c;break}}(s=s||a)?s===r.url?i(new Error("URL of compressed texture cannot be the same as the manifest's URL")):(t={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},n=d.url.resolve(r.url.replace(this.baseUrl,""),s),e=e.cacheID,this.add(e,n,t,function(e){var t;e.error?i(e.error):(t=e.texture,e=e.textures,Object.assign(r,{texture:void 0===t?null:t,textures:void 0===e?{}:e}),i())})):i(new Error("Cannot load compressed-textures in "+r.url+", make sure you provide a fallback"))}else i()},p.add=function(){var e=document.createElement("canvas").getContext("webgl");if(e){var t,r={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};for(t in p.textureExtensions=r,p.textureFormats={},r){var i=r[t];i&&Object.assign(p.textureFormats,Object.getPrototypeOf(i))}}else void 0};var l=p;function p(){}function h(n,e,t){var o={textures:{},texture:null};return e&&e.map(function(e){return new R.Texture(new R.BaseTexture(e,Object.assign({mipmap:A.MIPMAP_MODES.OFF,alphaMode:A.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA},t)))}).forEach(function(e,t){var r=e.baseTexture,i=n+"-"+(t+1);R.BaseTexture.addToCache(r,i),R.Texture.addToCache(e,i),0===t&&(R.BaseTexture.addToCache(r,n),R.Texture.addToCache(e,n),o.texture=e),o.textures[i]=e}),o}f.LoaderResource.setExtensionXhrType("dds",f.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var v,g=3,b=4,x=7,T=19,E=2,O=0,S=1,M=2,w=3,B=((y=c=c||{})[y.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",y[y.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",y[y.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",y[y.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",y[y.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",y[y.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",y[y.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",y[y.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",y[y.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",y[y.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",y[y.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",y[y.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",y[y.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",y[y.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",y[y.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",y[y.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",y[y.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",y[y.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",y[y.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",y[y.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",y[y.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",y[y.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",y[y.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",y[y.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",y[y.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",y[y.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",y[y.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",y[y.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",y[y.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",y[y.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",y[y.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",y[y.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",y[y.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",y[y.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",y[y.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",y[y.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",y[y.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",y[y.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",y[y.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",y[y.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",y[y.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",y[y.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",y[y.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",y[y.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",y[y.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",y[y.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",y[y.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",y[y.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",y[y.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",y[y.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",y[y.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",y[y.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",y[y.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",y[y.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",y[y.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",y[y.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",y[y.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",y[y.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",y[y.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",y[y.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",y[y.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",y[y.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",y[y.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",y[y.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",y[y.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",y[y.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",y[y.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",y[y.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",y[y.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",y[y.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",y[y.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",y[y.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",y[y.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",y[y.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",y[y.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",y[y.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",y[y.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",y[y.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",y[y.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",y[y.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",y[y.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",y[y.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",y[y.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",y[y.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",y[y.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",y[y.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",y[y.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",y[y.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",y[y.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",y[y.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",y[y.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",y[y.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",y[y.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",y[y.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",y[y.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",y[y.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",y[y.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",y[y.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",y[y.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",y[y.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",y[y.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",y[y.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",y[y.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",y[y.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",y[y.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",y[y.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",y[y.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",y[y.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",y[y.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",y[y.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",y[y.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",y[y.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",y[y.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",y[y.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",y[y.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",y[y.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",y[y.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",y[y.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",y[y.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",y[y.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",y[y.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",y[y.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",(y=v=v||{})[y.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",y[y.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",y[y.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",(y={})[827611204]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,y[861165636]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,y[894720068]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,y),k=((y={})[c.DXGI_FORMAT_BC1_TYPELESS]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,y[c.DXGI_FORMAT_BC1_UNORM]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,y[c.DXGI_FORMAT_BC2_TYPELESS]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,y[c.DXGI_FORMAT_BC2_UNORM]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,y[c.DXGI_FORMAT_BC3_TYPELESS]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,y[c.DXGI_FORMAT_BC3_UNORM]=t.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,y[c.DXGI_FORMAT_BC1_UNORM_SRGB]=t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,y[c.DXGI_FORMAT_BC2_UNORM_SRGB]=t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,y[c.DXGI_FORMAT_BC3_UNORM_SRGB]=t.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,y),c=(_.use=function(e,t){if("dds"===e.extension&&e.data)try{Object.assign(e,h(e.name||e.url,_.parse(e.data),e.metadata))}catch(e){return void t(e)}t()},_.parse=function(e){var t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");var r=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),i=r[g],n=r[b],o=r[x],r=new Uint32Array(e,T*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),s=r[1];if(4&s){r=r[E];if(808540228!==r)return r=B[r],a=new Uint8Array(e,128),[new C(a,{format:r,width:n,height:i,levels:o})];var a=new Uint32Array(t.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),r=a[O],t=a[S],u=a[M],l=a[w],h=k[r];if(void 0===h)throw new Error("DDSLoader cannot parse texture data with DXGI format "+r);if(4===u)throw new Error("DDSLoader does not support cubemap textures");if(t===v.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var c=new Array;if(1===l)c.push(new Uint8Array(e,148));else{for(var f=P[h],d=0,p=n,_=i,m=0;m<o;m++)d+=Math.max(1,p+3&-4)*Math.max(1,_+3&-4)*f,p>>>=1,_>>>=1;for(var y=148,m=0;m<l;m++)c.push(new Uint8Array(e,y,d)),y+=d}return c.map(function(e){return new C(e,{format:h,width:n,height:i,levels:o})})}if(64&s)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&s)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&s)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&s)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},_);function _(){}f.LoaderResource.setExtensionXhrType("ktx",f.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var m=[171,75,84,88,32,49,49,187,13,10,26,10],U=12,G=16,j=24,X=28,H=36,z=40,Y=44,V=48,W=52,q=56,K=60,I=((y={})[A.TYPES.UNSIGNED_BYTE]=1,y[A.TYPES.UNSIGNED_SHORT]=2,y[A.TYPES.INT]=4,y[A.TYPES.UNSIGNED_INT]=4,y[A.TYPES.FLOAT]=4,y[A.TYPES.HALF_FLOAT]=8,y),D=((y={})[A.FORMATS.RGBA]=4,y[A.FORMATS.RGB]=3,y[A.FORMATS.RG]=2,y[A.FORMATS.RED]=1,y[A.FORMATS.LUMINANCE]=1,y[A.FORMATS.LUMINANCE_ALPHA]=2,y[A.FORMATS.ALPHA]=1,y),L=((y={})[A.TYPES.UNSIGNED_SHORT_4_4_4_4]=2,y[A.TYPES.UNSIGNED_SHORT_5_5_5_1]=2,y[A.TYPES.UNSIGNED_SHORT_5_6_5]=2,y),y=(F.use=function(e,t){if("ktx"===e.extension&&e.data)try{var i,n=e.name||e.url,r=F.parse(n,e.data),o=r.compressed,s=r.uncompressed;o?Object.assign(e,h(n,o,e.metadata)):s&&(i={},s.forEach(function(e,t){var e=new R.Texture(new R.BaseTexture(e.resource,{mipmap:A.MIPMAP_MODES.OFF,alphaMode:A.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,type:e.type,format:e.format})),r=n+"-"+(t+1);R.BaseTexture.addToCache(e.baseTexture,r),R.Texture.addToCache(e,r),0===t&&(i[n]=e,R.BaseTexture.addToCache(e.baseTexture,n),R.Texture.addToCache(e,n)),i[r]=e}),Object.assign(e,{textures:i}))}catch(e){return void t(e)}t()},F.parse=function(e,t){var r=new DataView(t);if(!F.validate(e,r))return null;var i=67305985===r.getUint32(U,!0),n=r.getUint32(G,i),o=r.getUint32(j,i),s=r.getUint32(X,i),a=r.getUint32(H,i),u=r.getUint32(z,i)||1,e=r.getUint32(Y,i)||1,l=r.getUint32(V,i)||1,h=r.getUint32(W,i),c=r.getUint32(q,i),f=r.getUint32(K,i);if(0===u||1!==e)throw new Error("Only 2D textures are supported");if(1!==h)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==l)throw new Error("WebGL does not support array textures");var e=a+3&-4,h=u+3&-4,d=new Array(l),p=0===n?e*h:a*u,_=0!==n?I[n]?I[n]*D[o]:L[n]:P[s];if(void 0===_)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var m=p*_,y=a,v=u,g=e,b=h,x=64+f,T=0;T<c;T++){for(var E=r.getUint32(x,i),O=x+4,S=0;S<l;S++)(d[S]||(d[S]=new Array(c)))[T]={levelID:T,levelWidth:1<c||0!==n?y:g,levelHeight:1<c||0!==n?v:b,levelBuffer:new Uint8Array(t,O,m)},O+=m;x=(x+=E+4)%4!=0?x+4-x%4:x,m=(g=(y=y>>1||1)+4-1&-4)*(b=(v=v>>1||1)+4-1&-4)*_}return 0!==n?{uncompressed:d.map(function(e){var t=e[0].levelBuffer,r=!1;return n===A.TYPES.FLOAT?t=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):n===A.TYPES.UNSIGNED_INT?(r=!0,t=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):n===A.TYPES.INT&&(r=!0,t=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new R.BufferResource(t,{width:e[0].levelWidth,height:e[0].levelHeight}),type:n,format:r?F.convertFormatToInteger(o):o}})}:{compressed:d.map(function(e){return new C(null,{format:s,width:a,height:u,levels:c,levelBuffers:e})})}},F.validate=function(e,t){for(var r=0;r<m.length;r++)if(t.getUint8(r)!==m[r])return void 0,!1;return!0},F.convertFormatToInteger=function(e){switch(e){case A.FORMATS.RGBA:return A.FORMATS.RGBA_INTEGER;case A.FORMATS.RGB:return A.FORMATS.RGB_INTEGER;case A.FORMATS.RG:return A.FORMATS.RG_INTEGER;case A.FORMATS.RED:return A.FORMATS.RED_INTEGER;default:return e}},F);function F(){}t.BlobResource=e,t.CompressedTextureLoader=l,t.CompressedTextureResource=C,t.DDSLoader=c,t.FORMATS_TO_COMPONENTS=D,t.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=P,t.KTXLoader=y,t.TYPES_TO_BYTES_PER_COMPONENT=I,t.TYPES_TO_BYTES_PER_PIXEL=L},{"@pixi/constants":21,"@pixi/core":22,"@pixi/loaders":66,"@pixi/utils":85}],21:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),(i=r.ENV||(r.ENV={}))[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2",(i=r.RENDERER_TYPE||(r.RENDERER_TYPE={}))[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS",(i=r.BUFFER_BITS||(r.BUFFER_BITS={}))[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL",(i=r.BLEND_MODES||(r.BLEND_MODES={}))[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR",(i=r.DRAW_MODES||(r.DRAW_MODES={}))[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN",(i=r.FORMATS||(r.FORMATS={}))[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.RG=33319]="RG",i[i.RED=6403]="RED",i[i.RGBA_INTEGER=36249]="RGBA_INTEGER",i[i.RGB_INTEGER=36248]="RGB_INTEGER",i[i.RG_INTEGER=33320]="RG_INTEGER",i[i.RED_INTEGER=36244]="RED_INTEGER",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(i=r.TARGETS||(r.TARGETS={}))[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(i=r.TYPES||(r.TYPES={}))[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",i[i.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",i[i.BYTE=5120]="BYTE",i[i.SHORT=5122]="SHORT",i[i.INT=5124]="INT",i[i.FLOAT=5126]="FLOAT",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",i[i.HALF_FLOAT=36193]="HALF_FLOAT",(i=r.SAMPLER_TYPES||(r.SAMPLER_TYPES={}))[i.FLOAT=0]="FLOAT",i[i.INT=1]="INT",i[i.UINT=2]="UINT",(i=r.SCALE_MODES||(r.SCALE_MODES={}))[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR",(i=r.WRAP_MODES||(r.WRAP_MODES={}))[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(i=r.MIPMAP_MODES||(r.MIPMAP_MODES={}))[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL",(i=r.ALPHA_MODES||(r.ALPHA_MODES={}))[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(i=r.CLEAR_MODES||(r.CLEAR_MODES={}))[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT",(i=r.GC_MODES||(r.GC_MODES={}))[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL",(i=r.PRECISION||(r.PRECISION={})).LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp",(i=r.MASK_TYPES||(r.MASK_TYPES={}))[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",(i=r.MSAA_QUALITY||(r.MSAA_QUALITY={}))[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH",(i=r.BUFFER_TYPE||(r.BUFFER_TYPE={}))[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"},{}],22:[function(e,N,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=e("@pixi/settings"),_=e("@pixi/constants"),m=e("@pixi/utils"),i=e("@pixi/runner"),B=e("@pixi/ticker"),u=e("@pixi/math"),k=(p.settings.PREFER_ENV=m.isMobile.any?_.ENV.WEBGL:_.ENV.WEBGL2,p.settings.STRICT_TEXTURE_CACHE=!1,[]);function U(e,t){if(!e)return null;var r,i="";"string"==typeof e&&(r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e))&&(i=r[1].toLowerCase());for(var n=k.length-1;0<=n;--n){var o=k[n];if(o.test&&o.test(e,i))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var G=function(e,t){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function a(e,t){function r(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var j=function(){return(j=Object.assign||function(e){for(var t,r=arguments,i=1,n=arguments.length;i<n;i++)for(var o in t=r[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};r.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},r.prototype.resize=function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(e,t,r){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(e,t){return!1};var X=r;function r(e,t){void 0===t&&(t=0),this._width=e=void 0===e?0:e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new i.Runner("setRealSize"),this.onUpdate=new i.Runner("update"),this.onError=new i.Runner("onError")}a(Y,H=X),Y.prototype.upload=function(e,t,r){var e=e.gl,i=(e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===_.ALPHA_MODES.UNPACK),t.realWidth),n=t.realHeight;return r.width===i&&r.height===n?e.texSubImage2D(t.target,0,0,0,i,n,t.format,r.type,this.data):(r.width=i,r.height=n,e.texImage2D(t.target,0,r.internalFormat,i,n,0,t.format,r.type,this.data)),!0},Y.prototype.dispose=function(){this.data=null},Y.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array};var H,z=Y;function Y(e,t){var r=this,t=t||{},i=t.width,t=t.height;if(i&&t)return(r=H.call(this,i,t)||this).data=e,r;throw new Error("BufferResource width or height invalid")}var V,W={scaleMode:_.SCALE_MODES.NEAREST,format:_.FORMATS.RGBA,alphaMode:_.ALPHA_MODES.NPM},f=(a(s,V=m.EventEmitter),Object.defineProperty(s.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),s.prototype.setStyle=function(e,t){var r;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this},s.prototype.setSize=function(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)},s.prototype.setRealSize=function(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this},s.prototype._refreshPOT=function(){this.isPowerOfTwo=m.isPow2(this.realWidth)&&m.isPow2(this.realHeight)},s.prototype.setResolution=function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this},s.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},s.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},s.prototype.onError=function(e){this.emit("error",this,e)},s.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete m.BaseTextureCache[this.cacheId],delete m.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),s.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},s.prototype.dispose=function(){this.emit("dispose",this)},s.prototype.castToBaseTexture=function(){return this},s.from=function(e,t,r){void 0===r&&(r=p.settings.STRICT_TEXTURE_CACHE);var i="string"==typeof e,n=null,n=i?e:(e._pixiId||(o=t&&t.pixiIdPrefix||"pixiid",e._pixiId=o+"_"+m.uid()),e._pixiId),o=m.BaseTextureCache[n];if(i&&r&&!o)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return o||((o=new s(e,t)).cacheId=n,s.addToCache(o,n)),o},s.fromBuffer=function(e,t,r,i){e=e||new Float32Array(t*r*4);var n=new z(e,{width:t,height:r}),e=e instanceof Float32Array?_.TYPES.FLOAT:_.TYPES.UNSIGNED_BYTE;return new s(n,Object.assign(W,i||{width:t,height:r,type:e}))},s.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),m.BaseTextureCache[t]&&void 0,m.BaseTextureCache[t]=e)},s.removeFromCache=function(e){if("string"==typeof e){var t,r=m.BaseTextureCache[e];if(r)return-1<(t=r.textureCacheIds.indexOf(e))&&r.textureCacheIds.splice(t,1),delete m.BaseTextureCache[e],r}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)delete m.BaseTextureCache[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},s._globalBatch=0,s);function s(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var r=V.call(this)||this,i=(t=t||{}).alphaMode,n=t.mipmap,o=t.anisotropicLevel,s=t.scaleMode,a=t.width,u=t.height,l=t.wrapMode,h=t.format,c=t.type,f=t.target,d=t.resolution,t=t.resourceOptions;return!e||e instanceof X||((e=U(e,t)).internal=!0),r.resolution=d||p.settings.RESOLUTION,r.width=Math.round((a||0)*r.resolution)/r.resolution,r.height=Math.round((u||0)*r.resolution)/r.resolution,r._mipmap=void 0!==n?n:p.settings.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==o?o:p.settings.ANISOTROPIC_LEVEL,r._wrapMode=l||p.settings.WRAP_MODE,r._scaleMode=void 0!==s?s:p.settings.SCALE_MODE,r.format=h||_.FORMATS.RGBA,r.type=c||_.TYPES.UNSIGNED_BYTE,r.target=f||_.TARGETS.TEXTURE_2D,r.alphaMode=void 0!==i?i:_.ALPHA_MODES.UNPACK,r.uid=m.uid(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=0<a&&0<u,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(e),r}a(K,q=X),K.prototype.initFromArray=function(e,t){for(var r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof X?this.addResourceAt(e[r],r):this.addResourceAt(U(e[r],t),r))},K.prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},K.prototype.addResourceAt=function(e,t){if(this.items[t])return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this;throw new Error("Index "+t+" is out of bounds")},K.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");q.prototype.bind.call(this,e);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)},K.prototype.unbind=function(e){q.prototype.unbind.call(this,e);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)},K.prototype.load=function(){var r=this;if(this._load)return this._load;var e=this.items.map(function(e){return e.resource}).filter(function(e){return e}).map(function(e){return e.load()});return this._load=Promise.all(e).then(function(){var e=r.items[0],t=e.realWidth,e=e.realHeight;return r.resize(t,e),Promise.resolve(r)}),this._load};var q,e=K;function K(e,t){var r=this,t=t||{},i=t.width,t=t.height;(r=q.call(this,i,t)||this).items=[],r.itemDirtyIds=[];for(var n=0;n<e;n++){var o=new f;r.items.push(o),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}a(J,Z=e),J.prototype.addBaseTextureAt=function(e,t){if(e.resource)return this.addResourceAt(e.resource,t),this;throw new Error("ArrayResource does not support RenderTexture")},J.prototype.bind=function(e){Z.prototype.bind.call(this,e),e.target=_.TARGETS.TEXTURE_2D_ARRAY},J.prototype.upload=function(e,t,r){var i=this.length,n=this.itemDirtyIds,o=this.items,s=e.gl;r.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,t.format,r.type,null);for(var a=0;a<i;a++){var u=o[a];n[a]<u.dirtyId&&(n[a]=u.dirtyId,u.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,u.resource.width,u.resource.height,1,t.format,r.type,u.resource.source))}return!0};var Z,Q=J;function J(e,t){var r,i=this,n=t||{},o=n.width,n=n.height,e=Array.isArray(e)?(r=e).length:e,i=Z.call(this,e,{width:o,height:n})||this;return r&&i.initFromArray(r,t),i}a(ee,$=X),ee.crossOrigin=function(e,t,r){void 0===r&&0!==t.indexOf("data:")?e.crossOrigin=m.determineCrossOrigin(t):!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous")},ee.prototype.upload=function(e,t,r,i){var e=e.gl,n=t.realWidth,o=t.realHeight;if((i=i||this.source)instanceof HTMLImageElement){if(!i.complete||0===i.naturalWidth)return!1}else if(i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===_.ALPHA_MODES.UNPACK),this.noSubImage||t.target!==e.TEXTURE_2D||r.width!==n||r.height!==o?(r.width=n,r.height=o,e.texImage2D(t.target,0,r.internalFormat,t.format,r.type,i)):e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.format,r.type,i),!0},ee.prototype.update=function(){var e,t;this.destroyed||(e=(t=this.source).naturalWidth||t.videoWidth||t.width,t=t.naturalHeight||t.videoHeight||t.height,this.resize(e,t),$.prototype.update.call(this))},ee.prototype.dispose=function(){this.source=null};var $,h=ee;function ee(e){var t=this,r=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;return(t=$.call(this,r,i)||this).source=e,t.noSubImage=!1,t}a(ie,te=h),ie.test=function(e){var t=globalThis.OffscreenCanvas;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement};var te,re=ie;function ie(e){return te.call(this,e)||this}a(l,ne=e),l.prototype.bind=function(e){ne.prototype.bind.call(this,e),e.target=_.TARGETS.TEXTURE_CUBE_MAP},l.prototype.addBaseTextureAt=function(e,t,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[t])throw new Error("Index "+t+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||0<Object.keys(e._glTextures).length){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=_.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this},l.prototype.upload=function(e,t,r){for(var i=this.itemDirtyIds,n=0;n<l.SIDES;n++){var o=this.items[n];i[n]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[n]=o.dirtyId):i[n]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),i[n]=-1))}return!0},l.test=function(e){return Array.isArray(e)&&e.length===l.SIDES},l.SIDES=6;var ne,oe=l;function l(e,t){var r=this,i=t||{},n=i.width,o=i.height,s=i.autoLoad,i=i.linkBaseTexture;if(e&&e.length!==l.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");for(var r=ne.call(this,6,{width:n,height:o})||this,a=0;a<l.SIDES;a++)r.items[a].target=_.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+a;return r.linkBaseTexture=!1!==i,e&&r.initFromArray(e,t),!1!==s&&r.load(),r}a(ue,se=h),ue.prototype.load=function(e){var n=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise(function(e,t){function r(){n.destroyed||(i.onload=null,i.onerror=null,n.resize(i.width,i.height),n._load=null,n.createBitmap?e(n.process()):e(n))}var i=n.source;n.url=i.src;i.complete&&i.src?r():(i.onload=r,i.onerror=function(e){t(e),n.onError.emit(e)})}),this._load)},ue.prototype.process=function(){var t=this,r=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,e=!r.crossOrigin||"anonymous"===r.crossOrigin;return this._process=fetch(r.src,{mode:e?"cors":"no-cors"}).then(function(e){return e.blob()}).then(function(e){return i(e,0,0,r.width,r.height,{premultiplyAlpha:t.alphaMode===_.ALPHA_MODES.UNPACK?"premultiply":"none"})}).then(function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))}),this._process},ue.prototype.upload=function(e,t,r){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return se.prototype.upload.call(this,e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(se.prototype.upload.call(this,e,t,r,this.bitmap),!this.preserveBitmap){var i,n=!0,o=t._glTextures;for(i in o){var s=o[i];if(s!==r&&s.dirtyId!==t.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},ue.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,se.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},ue.test=function(e){return"string"==typeof e||e instanceof HTMLImageElement};var se,ae=ue;function ue(e,t){var r,i=this;return t=t||{},e instanceof HTMLImageElement||(r=new Image,h.crossOrigin(r,e,t.crossorigin),r.src=e,e=r),i=se.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==t.createBitmap?t.createBitmap:p.settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,i.bitmap=null,i._load=null,!1!==t.autoLoad&&i.load(),i}a(n,le=h),n.prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},n.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},n.prototype._loadSvg=function(){var o=this,s=new Image;h.crossOrigin(s,this.svg,this._crossorigin),s.src=this.svg,s.onerror=function(e){o._resolve&&(s.onerror=null,o.onError.emit(e))},s.onload=function(){if(o._resolve){var e=s.width,t=s.height;if(!e||!t)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=e*o.scale,i=t*o.scale,n=((o._overrideWidth||o._overrideHeight)&&(r=o._overrideWidth||o._overrideHeight/t*e,i=o._overrideHeight||o._overrideWidth/e*t),r=Math.round(r),i=Math.round(i),o.source);n.width=r,n.height=i,n._pixiId="canvas_"+m.uid(),n.getContext("2d").drawImage(s,0,0,e,t,0,0,r,i),o._resolve(),o._resolve=null}}},n.getSize=function(e){var e=n.SVG_SIZE.exec(e),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},n.prototype.dispose=function(){le.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},n.test=function(e,t){return"svg"===t||"string"==typeof e&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||"string"==typeof e&&n.SVG_XML.test(e)},n.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,n.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var le,he=n;function n(e,t){var r=this;return t=t||{},(r=le.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=t.scale||1,r._overrideWidth=t.width,r._overrideHeight=t.height,r._resolve=null,r._crossorigin=t.crossorigin,r._load=null,!1!==t.autoLoad&&r.load(),r}a(c,ce=h),c.prototype.update=function(e){var t;this.destroyed||(t=B.Ticker.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(ce.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},c.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(e){t.valid?e(t):(t._resolve=e,r.load())}),this._load},c.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},c.prototype._isSourcePlaying=function(){var e=this.source;return 0<e.currentTime&&!1===e.paused&&!1===e.ended&&2<e.readyState},c.prototype._isSourceReady=function(){var e=this.source;return 3===e.readyState||4===e.readyState},c.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(B.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},c.prototype._onPlayStop=function(){this._isConnectedToTicker&&(B.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},c.prototype._onCanPlay=function(){var e=this.source,t=(e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),this.valid);this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},c.prototype.dispose=function(){this._isConnectedToTicker&&(B.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),ce.prototype.dispose.call(this)},Object.defineProperty(c.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(B.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(B.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),c.test=function(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||-1<c.TYPES.indexOf(t)},c.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],c.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var ce,fe=c;function c(e,t){var r=this;if(t=t||{},!(e instanceof HTMLVideoElement)){var i=document.createElement("video"),n=(i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),(e="string"==typeof e?[e]:e)[0].src||e[0]);h.crossOrigin(i,n,t.crossorigin);for(var o=0;o<e.length;++o){var s=document.createElement("source"),a=e[o],u=a.src,a=a.mime,l=(u=u||e[o]).split("?").shift().toLowerCase(),l=l.slice(l.lastIndexOf(".")+1),a=a||c.MIME_TYPES[l]||"video/"+l;s.src=u,s.type=a,i.appendChild(s)}e=i}return(r=ce.call(this,e)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=t.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==t.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==t.autoLoad&&r.load(),r}a(_e,de=h),_e.test=function(e){return!!globalThis.createImageBitmap&&e instanceof ImageBitmap};var de,pe=_e;function _e(e){return de.call(this,e)||this}k.push(ae,pe,re,fe,he,z,oe,Q);var me,ye={__proto__:null,Resource:X,BaseImageResource:h,INSTALLED:k,autoDetectResource:U,AbstractMultiResource:e,ArrayResource:Q,BufferResource:z,CanvasResource:re,CubeResource:oe,ImageResource:ae,SVGResource:he,VideoResource:fe,ImageBitmapResource:pe},ve=(a(ge,me=z),ge.prototype.upload=function(e,t,r){var e=e.gl,i=(e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===_.ALPHA_MODES.UNPACK),t.realWidth),n=t.realHeight;return r.width===i&&r.height===n?e.texSubImage2D(t.target,0,0,0,i,n,t.format,r.type,this.data):(r.width=i,r.height=n,e.texImage2D(t.target,0,r.internalFormat,i,n,0,t.format,r.type,this.data)),!0},ge);function ge(){return null!==me&&me.apply(this,arguments)||this}Object.defineProperty(o.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),o.prototype.addColorTexture=function(e,t){return this.colorTextures[e=void 0===e?0:e]=t||new f(null,{scaleMode:_.SCALE_MODES.NEAREST,resolution:1,mipmap:_.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},o.prototype.addDepthTexture=function(e){return this.depthTexture=e||new f(new ve(null,{width:this.width,height:this.height}),{scaleMode:_.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:_.MIPMAP_MODES.OFF,format:_.FORMATS.DEPTH_COMPONENT,type:_.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},o.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},o.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},o.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(e/n,t/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(e/n,t/n))}},o.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},o.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)};var be=o;function o(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new i.Runner("disposeFramebuffer"),this.multisample=_.MSAA_QUALITY.NONE}a(Ee,xe=f),Ee.prototype.resize=function(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},Ee.prototype.dispose=function(){this.framebuffer.dispose(),xe.prototype.dispose.call(this)},Ee.prototype.destroy=function(){xe.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null};var xe,Te=Ee;function Ee(e){var t=this;return(e="number"==typeof(e=void 0===e?{}:e)?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:e).width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:_.MSAA_QUALITY.NONE,(t=xe.call(this,null,e)||this).mipmap=_.MIPMAP_MODES.OFF,t.valid=!0,t.clearColor=[0,0,0,0],t.framebuffer=new be(t.realWidth,t.realHeight).addColorTexture(0,t),t.framebuffer.multisample=e.multisample,t.maskStack=[],t.filterStack=[{}],t}Se.prototype.set=function(e,t,r){var i,n,o,s,a=t.width,t=t.height;r?(i=e.width/2/a,n=e.height/2/t,o=e.x/a+i,s=e.y/t+n,r=u.groupD8.add(r,u.groupD8.NW),this.x0=o+i*u.groupD8.uX(r),this.y0=s+n*u.groupD8.uY(r),r=u.groupD8.add(r,2),this.x1=o+i*u.groupD8.uX(r),this.y1=s+n*u.groupD8.uY(r),r=u.groupD8.add(r,2),this.x2=o+i*u.groupD8.uX(r),this.y2=s+n*u.groupD8.uY(r),r=u.groupD8.add(r,2),this.x3=o+i*u.groupD8.uX(r),this.y3=s+n*u.groupD8.uY(r)):(this.x0=e.x/a,this.y0=e.y/t,this.x1=(e.x+e.width)/a,this.y1=e.y/t,this.x2=(e.x+e.width)/a,this.y2=(e.y+e.height)/t,this.x3=e.x/a,this.y3=(e.y+e.height)/t),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},Se.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"};var Oe=Se;function Se(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var Re,Ae=new Oe,d=(a(y,Re=m.EventEmitter),y.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},y.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},y.prototype.destroy=function(e){this.baseTexture&&(e&&((e=this.baseTexture.resource)&&e.url&&m.TextureCache[e.url]&&y.removeFromCache(e.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,y.removeFromCache(this),this.textureCacheIds=null},y.prototype.clone=function(){var e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),t=new y(this.baseTexture,!this.noFrame&&e,t,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(t._frame=e),t},y.prototype.updateUvs=function(){this._uvs===Ae&&(this._uvs=new Oe),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},y.from=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r=p.settings.STRICT_TEXTURE_CACHE);var i="string"==typeof e,n=null,n=i?e:e instanceof f?(e.cacheId||(o=t&&t.pixiIdPrefix||"pixiid",e.cacheId=o+"-"+m.uid(),f.addToCache(e,e.cacheId)),e.cacheId):(e._pixiId||(o=t&&t.pixiIdPrefix||"pixiid",e._pixiId=o+"_"+m.uid()),e._pixiId),o=m.TextureCache[n];if(i&&r&&!o)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return o||e instanceof f?!o&&e instanceof f&&(o=new y(e),y.addToCache(o,n)):(t.resolution||(t.resolution=m.getResolutionOfUrl(e)),(o=new y(new f(e,t))).baseTexture.cacheId=n,f.addToCache(o.baseTexture,n),y.addToCache(o,n)),o},y.fromURL=function(e,t){var r=Object.assign({autoLoad:!1},null==t?void 0:t.resourceOptions),i=y.from(e,Object.assign({resourceOptions:r},t),!1),e=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):e.load().then(function(){return Promise.resolve(i)})},y.fromBuffer=function(e,t,r,i){return new y(f.fromBuffer(e,t,r,i))},y.fromLoader=function(e,t,r,i){var e=new f(e,Object.assign({scaleMode:p.settings.SCALE_MODE,resolution:m.getResolutionOfUrl(t)},i)),i=e.resource,n=(i instanceof ae&&(i.url=t),new y(e));return f.addToCache(n.baseTexture,r=r||t),y.addToCache(n,r),r!==t&&(f.addToCache(n.baseTexture,t),y.addToCache(n,t)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(e){n.baseTexture.once("loaded",function(){return e(n)})})},y.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),m.TextureCache[t]&&void 0,m.TextureCache[t]=e)},y.removeFromCache=function(e){if("string"==typeof e){var t,r=m.TextureCache[e];if(r)return-1<(t=r.textureCacheIds.indexOf(e))&&r.textureCacheIds.splice(t,1),delete m.TextureCache[e],r}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)m.TextureCache[e.textureCacheIds[i]]===e&&delete m.TextureCache[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(y.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,r=e.y,i=e.width,n=e.height,o=t+i>this.baseTexture.width,s=r+n>this.baseTexture.height;if(o||s)throw t="X: "+t+" + "+i+" = "+(t+i)+" > "+this.baseTexture.width,r="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height,new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+t+" "+(o&&s?"and":"or")+" "+r);this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),y.prototype.castToBaseTexture=function(){return this.baseTexture},y);function y(e,t,r,i,n,o){var s=Re.call(this)||this;if(s.noFrame=!1,t||(s.noFrame=!0,t=new u.Rectangle(0,0,1,1)),e instanceof y&&(e=e.baseTexture),s.baseTexture=e,s._frame=t,s.trim=i,s.valid=!1,s._uvs=Ae,s.uvMatrix=null,s.orig=r||t,s._rotate=Number(n||0),!0===n)s._rotate=2;else if(s._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return s.defaultAnchor=o?new u.Point(o.x,o.y):new u.Point(0,0),s._updateID=0,s.textureCacheIds=[],e.valid?s.noFrame?e.valid&&s.onBaseTextureUpdated(e):s.frame=t:e.once("loaded",s.onBaseTextureUpdated,s),s.noFrame&&e.on("update",s.onBaseTextureUpdated,s),s}function Pe(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}d.EMPTY=new d(new f),Pe(d.EMPTY),Pe(d.EMPTY.baseTexture),d.WHITE=((Ht=document.createElement("canvas")).width=16,Ht.height=16,(je=Ht.getContext("2d")).fillStyle="white",je.fillRect(0,0,16,16),new d(new f(new re(Ht)))),Pe(d.WHITE),Pe(d.WHITE.baseTexture);a(we,Ce=d),Object.defineProperty(we.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(we.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),we.prototype.resize=function(e,t,r){void 0===r&&(r=!0);var i=this.baseTexture.resolution,e=Math.round(e*i)/i,t=Math.round(t*i)/i;this.valid=0<e&&0<t,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,r&&this.baseTexture.resize(e,t),this.updateUvs()},we.prototype.setResolution=function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))},we.create=function(e){for(var t=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=t[i];return"number"==typeof e&&(m.deprecation("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:r[0],scaleMode:r[1],resolution:r[2]}),new we(new Te(e))};var Ce,Me=we;function we(e,t){e=Ce.call(this,e,t)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}v.prototype.createTexture=function(e,t,r){void 0===r&&(r=_.MSAA_QUALITY.NONE);e=new Te(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new Me(e)},v.prototype.getOptimalTexture=function(e,t,r,i){void 0===r&&(r=1),void 0===i&&(i=_.MSAA_QUALITY.NONE),e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?n=1<i?-i:-1:(n=((65535&(e=m.nextPow2(e)))<<16|65535&(t=m.nextPow2(t)))>>>0,1<i&&(n+=4294967296*i)),this.texturePool[n]||(this.texturePool[n]=[]);var n,o=this.texturePool[n].pop();return(o=o||this.createTexture(e,t,i)).filterPoolKey=n,o.setResolution(r),o},v.prototype.getFilterTexture=function(e,t,r){t=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||_.MSAA_QUALITY.NONE);return t.filterFrame=e.filterFrame,t},v.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},v.prototype.returnFilterTexture=function(e){this.returnTexture(e)},v.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},v.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=0<e.width&&0<e.height,this.texturePool)if(Number(t)<0){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},v.SCREEN_KEY=-1;var Ie=v;function v(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}Le.prototype.destroy=function(){this.buffer=null},Le.from=function(e,t,r,i,n){return new Le(e,t,r,i,n)};var De=Le;function Le(e,t,r,i,n,o,s){void 0===t&&(t=0),void 0===r&&(r=!1),void 0===i&&(i=_.TYPES.FLOAT),this.buffer=e,this.size=t,this.normalized=r,this.type=i,this.stride=n,this.start=o,this.instance=s}var Fe=0,g=(Ne.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},Ne.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Ne.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(Ne.prototype,"index",{get:function(){return this.type===_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:_.BUFFER_TYPE.ARRAY_BUFFER},enumerable:!1,configurable:!0}),Ne.from=function(e){return new Ne(e=e instanceof Array?new Float32Array(e):e)},Ne);function Ne(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=Fe++,this.disposeRunner=new i.Runner("disposeBuffer")}var Be={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var ke={5126:4,5123:2,5121:1},Ue=0,Ge={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},je=(b.prototype.addAttribute=function(e,t,r,i,n,o,s,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof g||(t instanceof Array&&(t=new Float32Array(t)),t=new g(t));var u=e.split("|");if(1<u.length){for(var l=0;l<u.length;l++)this.addAttribute(u[l],t,r,i,n);return this}var h=this.buffers.indexOf(t);return-1===h&&(this.buffers.push(t),h=this.buffers.length-1),this.attributes[e]=new De(h,r,i,n,o,s,a),this.instanced=this.instanced||a,this},b.prototype.getAttribute=function(e){return this.attributes[e]},b.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},b.prototype.addIndex=function(e){return e instanceof g||(e instanceof Array&&(e=new Uint16Array(e)),e=new g(e)),e.type=_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},b.prototype.getIndex=function(){return this.indexBuffer},b.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],r=[],i=new g;for(e in this.attributes){var n=this.attributes[e],o=this.buffers[n.buffer];t.push(o.data),r.push(n.size*ke[n.type]/4),n.buffer=0}for(i.data=function(e,t){for(var r=0,i=0,n={},o=0;o<e.length;o++)i+=t[o],r+=e[o].length;for(var s=new ArrayBuffer(4*r),a=null,u=0,o=0;o<e.length;o++){var l=t[o],h=e[o],c=m.getBufferType(h);n[c]||(n[c]=new Be[c](s));for(var a=n[c],f=0;f<h.length;f++)a[(f/l|0)*i+u+f%l]=h[f];u+=l}return new Float32Array(s)}(t,r),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},b.prototype.getSize=function(){for(var e in this.attributes){e=this.attributes[e];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},b.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},b.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},b.prototype.clone=function(){for(var e=new b,t=0;t<this.buffers.length;t++)e.buffers[t]=new g(this.buffers[t].data.slice(0));for(t in this.attributes){var r=this.attributes[t];e.attributes[t]=new De(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),e},b.merge=function(e){for(var t=new b,r=[],i=[],n=[],o=0;o<e.length;o++)for(var s=e[o],a=0;a<s.buffers.length;a++)i[a]=i[a]||0,i[a]+=s.buffers[a].data.length,n[a]=0;for(o=0;o<s.buffers.length;o++)r[o]=new Ge[m.getBufferType(s.buffers[o].data)](i[o]),t.buffers[o]=new g(r[o]);for(o=0;o<e.length;o++){s=e[o];for(a=0;a<s.buffers.length;a++)r[a].set(s.buffers[a].data,n[a]),n[a]+=s.buffers[a].data.length}if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.type=_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,h=0,c=0,o=0;o<s.buffers.length;o++)if(s.buffers[o]!==s.indexBuffer){c=o;break}for(o in s.attributes){var f=s.attributes[o];(0|f.buffer)===c&&(l+=f.size*ke[f.type]/4)}for(o=0;o<e.length;o++){for(var d=e[o].indexBuffer.data,a=0;a<d.length;a++)t.indexBuffer.data[a+h]+=u;u+=e[o].buffers[c].data.length/l,h+=d.length}}return t},b);function b(e,t){void 0===t&&(t={}),this.buffers=e=void 0===e?[]:e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Ue++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new i.Runner("disposeGeometry"),this.refCount=0}a(ze,Xe=je);var Xe,He=ze;function ze(){var e=Xe.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}a(We,Ye=je),We.prototype.map=function(e,t){var r;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+t.width/e.width,this.uvs[3]=0,this.uvs[4]=0+t.width/e.width,this.uvs[5]=0+t.height/e.height,this.uvs[6]=0,this.uvs[7]=0+t.height/e.height,e=t.x,r=t.y,this.vertices[0]=e,this.vertices[1]=r,this.vertices[2]=e+t.width,this.vertices[3]=r,this.vertices[4]=e+t.width,this.vertices[5]=r+t.height,this.vertices[6]=e,this.vertices[7]=r+t.height,this.invalidate(),this},We.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this};var Ye,Ve=We;function We(){var e=Ye.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new g(e.vertices),e.uvBuffer=new g(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}var qe=0,Ke=(Ze.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},Ze.prototype.add=function(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new Ze(t,r)},Ze.from=function(e,t,r){return new Ze(e,t,r)},Ze.uboFrom=function(e,t){return new Ze(e,null==t||t,!0)},Ze);function Ze(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=qe++,this.static=!!t,this.ubo=!!r,e instanceof g?(this.buffer=e,this.buffer.type=_.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new g(new Float32Array(1)),this.buffer.type=_.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}Je.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var Qe=Je;function Je(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=_.MSAA_QUALITY.NONE,this.sourceFrame=new u.Rectangle,this.destinationFrame=new u.Rectangle,this.bindingSourceFrame=new u.Rectangle,this.bindingDestinationFrame=new u.Rectangle,this.filters=[],this.transform=null}var $e=[new u.Point,new u.Point,new u.Point,new u.Point],et=new u.Matrix,tt=(x.prototype.push=function(e,t){for(var r,i=this.renderer,n=this.defaultFilterStack,o=this.statePool.pop()||new Qe,s=this.renderer.renderTexture,a=t[0].resolution,u=t[0].multisample,l=t[0].padding,h=t[0].autoFit,c=null==(r=t[0].legacy)||r,f=1;f<t.length;f++)var d=t[f],a=Math.min(a,d.resolution),u=Math.min(u,d.multisample),l=this.useMaxPadding?Math.max(l,d.padding):l+d.padding,h=h&&d.autoFit,c=c||null==(d=d.legacy)||d;1===n.length&&(this.defaultFilterStack[0].renderTexture=s.current),n.push(o),o.resolution=a,o.multisample=u,o.legacy=c,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(l),h&&(r=this.tempRect.copyFrom(s.sourceFrame),i.projection.transform&&this.transformAABB(et.copyFrom(i.projection.transform).invert(),r),o.sourceFrame.fit(r)),this.roundFrame(o.sourceFrame,(s.current||i).resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,a,u),o.filters=t,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;n=this.tempRect;n.x=0,n.y=0,n.width=o.sourceFrame.width,n.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(s.sourceFrame),o.bindingDestinationFrame.copyFrom(s.destinationFrame),o.transform=i.projection.transform,i.projection.transform=null,s.bind(o.renderTexture,o.sourceFrame,n),i.framebuffer.clear(0,0,0,0)},x.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),r=t.filters,i=(this.activeState=t,this.globalUniforms.uniforms),n=(i.outputFrame=t.sourceFrame,i.resolution=t.resolution,i.inputSize),o=i.inputPixel,s=i.inputClamp,n=(n[0]=t.destinationFrame.width,n[1]=t.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*t.resolution),o[1]=Math.round(n[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=t.sourceFrame.width*n[2]-.5*o[2],s[3]=t.sourceFrame.height*n[3]-.5*o[3],t.legacy&&((s=i.filterArea)[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp),this.globalUniforms.update(),e[e.length-1]);if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,n.renderTexture,_.CLEAR_MODES.BLEND,t),this.returnFilterTexture(t.renderTexture);else{for(var a=t.renderTexture,u=((h=this.getOptimalFilterTexture(a.width,a.height,t.resolution)).filterFrame=a.filterFrame,0),u=0;u<r.length-1;++u){1===u&&1<t.multisample&&((h=this.getOptimalFilterTexture(a.width,a.height,t.resolution)).filterFrame=a.filterFrame),r[u].apply(this,a,h,_.CLEAR_MODES.CLEAR,t);var l=a,a=h,h=l}r[u].apply(this,a,n.renderTexture,_.CLEAR_MODES.BLEND,t),1<u&&1<t.multisample&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(a),this.returnFilterTexture(h)}t.clear(),this.statePool.push(t)},x.prototype.bindAndClear=function(e,t){void 0===t&&(t=_.CLEAR_MODES.CLEAR);var r=this.renderer,i=r.renderTexture,r=r.state,n=(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame?((n=this.tempRect).x=0,n.y=0,n.width=e.filterFrame.width,n.height=e.filterFrame.height,i.bind(e,e.filterFrame,n)):e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame),1&r.stateId||this.forceClear);(t===_.CLEAR_MODES.CLEAR||t===_.CLEAR_MODES.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},x.prototype.applyFilter=function(e,t,r,i){var n=this.renderer;n.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(_.DRAW_MODES.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(_.DRAW_MODES.TRIANGLE_STRIP))},x.prototype.calculateSpriteMatrix=function(e,t){var r=this.activeState,i=r.sourceFrame,r=r.destinationFrame,n=t._texture.orig,e=e.set(r.width,0,0,r.height,i.x,i.y),r=t.worldTransform.copyTo(u.Matrix.TEMP_MATRIX);return r.invert(),e.prepend(r),e.scale(1/n.width,1/n.height),e.translate(t.anchor.x,t.anchor.y),e},x.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},x.prototype.getOptimalFilterTexture=function(e,t,r,i){return void 0===i&&(i=_.MSAA_QUALITY.NONE),this.texturePool.getOptimalTexture(e,t,r=void 0===r?1:r,i)},x.prototype.getFilterTexture=function(e,t,r){"number"==typeof e&&(i=e,e=t,t=i),e=e||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||_.MSAA_QUALITY.NONE);return i.filterFrame=e.filterFrame,i},x.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},x.prototype.emptyPool=function(){this.texturePool.clear(!0)},x.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},x.prototype.transformAABB=function(e,t){var r=$e[0],i=$e[1],n=$e[2],o=$e[3],e=(r.set(t.left,t.top),i.set(t.left,t.bottom),n.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(r,r),e.apply(i,i),e.apply(n,n),e.apply(o,o),Math.min(r.x,i.x,n.x,o.x)),s=Math.min(r.y,i.y,n.y,o.y),a=Math.max(r.x,i.x,n.x,o.x),r=Math.max(r.y,i.y,n.y,o.y);t.x=e,t.y=s,t.width=a-e,t.height=r-s},x.prototype.roundFrame=function(e,t,r,i,n){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(n){var o=n.a,s=n.b,a=n.c,u=n.d;if((1e-4<Math.abs(s)||1e-4<Math.abs(a))&&(1e-4<Math.abs(o)||1e-4<Math.abs(u)))return}(n=n?et.copyFrom(n):et.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,e),e.ceil(t),this.transformAABB(n.invert(),e)}},x);function x(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Ie,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new He,this.quadUv=new Ve,this.tempRect=new u.Rectangle,this.activeState={},this.globalUniforms=new Ke({outputFrame:new u.Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}it.prototype.flush=function(){},it.prototype.destroy=function(){this.renderer=null},it.prototype.start=function(){},it.prototype.stop=function(){this.flush()},it.prototype.render=function(e){};var rt=it;function it(e){this.renderer=e}ot.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},ot.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},ot.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},ot.prototype.copyBoundTextures=function(e,t){for(var r=this.renderer.texture.boundTextures,i=t-1;0<=i;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)},ot.prototype.boundArray=function(e,t,r,i){for(var n=e.elements,o=e.ids,s=e.count,a=0,u=0;u<s;u++){var l=n[u],h=l._batchLocation;if(0<=h&&h<i&&t[h]===l)o[u]=h;else for(;a<i;){var c=t[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){o[u]=a,t[l._batchLocation=a]=l;break}a++}}},ot.prototype.destroy=function(){this.renderer=null};var nt=ot;function ot(e){this.renderer=e,this.emptyRenderer=new rt(e),this.currentRenderer=this.emptyRenderer}var st=0,at=(Object.defineProperty(T.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),T.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=st++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},T.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=st++,this.renderer.runners.contextChange.emit(e)},T.prototype.initFromOptions=function(e){e=this.createContext(this.renderer.view,e);this.initFromContext(e)},T.prototype.createContext=function(e,t){var r;if(r=p.settings.PREFER_ENV>=_.ENV.WEBGL2?e.getContext("webgl2",t):r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},T.prototype.getExtensions=function(){var e=this.gl,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},T.prototype.handleContextLost=function(e){e.preventDefault()},T.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},T.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},T.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},T.prototype.validateContext=function(e){var t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext,t=(r&&(this.webGLVersion=2),t.stencil||void 0,r||!!e.getExtension("OES_element_index_uint"));(this.supports.uint32Indices=t)||void 0},T);function T(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}var ut=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=_.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},lt=new u.Rectangle,ht=(E.prototype.contextChange=function(){var t,e,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new u.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(t=this.renderer.context.extensions.drawBuffers,e=this.renderer.context.extensions.depthTexture,p.settings.PREFER_ENV===_.ENV.WEBGL_LEGACY&&(e=t=null),t?r.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,r.drawBuffers=function(){}),e||(this.writeDepthTexture=!1)):this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},E.prototype.bind=function(e,t,r){void 0===r&&(r=0);var i=this.gl;if(e){var n=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,n.mipLevel=r),n.dirtyId!==e.dirtyId&&(n.dirtyId=e.dirtyId,n.dirtyFormat!==e.dirtyFormat?(n.dirtyFormat=e.dirtyFormat,n.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):n.dirtySize!==e.dirtySize&&(n.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o,s,a=0;a<e.colorTextures.length;a++){var u=e.colorTextures[a];this.renderer.texture.unbind(u.parentTextureArray||u)}e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t?(o=t.width>>r,s=t.height>>r,n=o/t.width,this.setViewport(t.x*n,t.y*n,o,s)):(o=e.width>>r,s=e.height>>r,this.setViewport(0,0,o,s))}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},E.prototype.setViewport=function(e,t,r,i){var n=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),i=Math.round(i),n.width===r&&n.height===i&&n.x===e&&n.y===t||(n.x=e,n.y=t,n.width=r,n.height=i,this.gl.viewport(e,t,r,i))},Object.defineProperty(E.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),E.prototype.clear=function(e,t,r,i,n){void 0===n&&(n=_.BUFFER_BITS.COLOR|_.BUFFER_BITS.DEPTH);var o=this.gl;o.clearColor(e,t,r,i),o.clear(n)},E.prototype.initFramebuffer=function(e){var t=this.gl,t=new ut(t.createFramebuffer());return t.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=t,this.managedFramebuffers.push(e),e.disposeRunner.add(this),t},E.prototype.resizeFramebuffer=function(e){var t=this.gl,r=e.glFramebuffers[this.CONTEXT_UID],i=(r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,e.width,e.height)),r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height)),e.colorTextures),n=i.length;t.drawBuffers||(n=Math.min(n,1));for(var o=0;o<n;o++){var s=i[o],s=s.parentTextureArray||s;this.renderer.texture.bind(s,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},E.prototype.updateFramebuffer=function(e,t){for(var r,i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,s=o.length,a=(i.drawBuffers||(s=Math.min(s,1)),1<n.multisample&&this.canMultisampleFramebuffer(e)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null)),[]),u=0;u<s;u++){var l=o[u],h=l.parentTextureArray||l;this.renderer.texture.bind(h,0),0===u&&n.msaaBuffer||(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+u,l.target,h._glTextures[this.CONTEXT_UID].texture,t),a.push(i.COLOR_ATTACHMENT0+u))}1<a.length&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture&&(r=e.depthTexture,this.renderer.texture.bind(r,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,r._glTextures[this.CONTEXT_UID].texture,t)),!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil))},E.prototype.canMultisampleFramebuffer=function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture},E.prototype.detectSamples=function(e){var t=this.msaaSamples,r=_.MSAA_QUALITY.NONE;if(e<=1||null===t)return r;for(var i=0;i<t.length;i++)if(t[i]<=e){r=t[i];break}return r=1===r?_.MSAA_QUALITY.NONE:r},E.prototype.blit=function(e,t,r){var i=this.current,n=this.renderer,o=this.gl,s=this.CONTEXT_UID;if(2===n.context.webGLVersion&&i){n=i.glFramebuffers[s];if(n){if(!e){if(!n.msaaBuffer)return;s=i.colorTextures[0];if(!s)return;n.blitFramebuffer||(n.blitFramebuffer=new be(i.width,i.height),n.blitFramebuffer.addColorTexture(0,s)),(e=n.blitFramebuffer).colorTextures[0]!==s&&(e.colorTextures[0]=s,e.dirtyId++,e.dirtyFormat++),e.width===i.width&&e.height===i.height||(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||((t=lt).width=i.width,t.height=i.height);s=t.width===(r=r||t).width&&t.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,n.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,s?o.NEAREST:o.LINEAR)}}},E.prototype.disposeFramebuffer=function(e,t){var r,i=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;i&&(delete e.glFramebuffers[this.CONTEXT_UID],0<=(r=this.managedFramebuffers.indexOf(e))&&this.managedFramebuffers.splice(r,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose())},E.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)},E.prototype.forceStencil=function(){var e,t,r,i,n=this.current;!n||(e=n.glFramebuffers[this.CONTEXT_UID])&&!e.stencil&&(n.stencil=!0,t=n.width,n=n.height,i=(r=this.gl).createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i),e.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,e.multisample,r.DEPTH24_STENCIL8,t,n):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,n),e.stencil=i,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i))},E.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new u.Rectangle},E.prototype.destroy=function(){this.renderer=null},E);function E(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new be(10,10),this.msaaSamples=null}var ct={5126:4,5123:2,5121:1},ft=(O.prototype.contextChange=function(){this.disposeAll(!0);var t,o,e=this.gl=this.renderer.gl,r=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==r.webGLVersion&&(t=this.renderer.context.extensions.vertexArrayObject,(t=p.settings.PREFER_ENV===_.ENV.WEBGL_LEGACY?null:t)?(e.createVertexArray=function(){return t.createVertexArrayOES()},e.bindVertexArray=function(e){return t.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return t.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})),2!==r.webGLVersion&&((o=e.getExtension("ANGLE_instanced_arrays"))?(e.vertexAttribDivisor=function(e,t){return o.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,r,i,n){return o.drawElementsInstancedANGLE(e,t,r,i,n)},e.drawArraysInstanced=function(e,t,r,i){return o.drawArraysInstancedANGLE(e,t,r,i)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===r.webGLVersion||!!r.extensions.uint32ElementIndex},O.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var r=this.gl,i=e.glVertexArrayObjects[this.CONTEXT_UID],n=!1,i=(i||((this.managedGeometries[e.id]=e).disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0),i[t.program.id]||this.initGeometryVao(e,t,n));this._activeGeometry=e,this._activeVao!==i&&(this._activeVao=i,this.hasVao?r.bindVertexArray(i):this.activateVao(e,t.program)),this.updateBuffers()},O.prototype.reset=function(){this.unbind()},O.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,r=0;r<e.buffers.length;r++){var i=e.buffers[r];t.update(i)}},O.prototype.checkCompatibility=function(e,t){var r,i=e.attributes;for(r in t.attributeData)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},O.prototype.getSignature=function(e,t){var r,i=e.attributes,n=t.attributeData,o=["g",e.id];for(r in i)n[r]&&o.push(r,n[r].location);return o.join("-")},O.prototype.initGeometryVao=function(e,t,r){void 0===r&&(r=!0);var i=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,s=t.program,t=(s.glPrograms[n]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,s),this.getSignature(e,s)),a=e.glVertexArrayObjects[this.CONTEXT_UID],u=a[t];if(u)return a[s.id]=u;var l,h=e.buffers,c=e.attributes,f={},d={};for(l in h)f[l]=0,d[l]=0;for(l in c)!c[l].size&&s.attributeData[l]?c[l].size=s.attributeData[l].size:c[l].size||void 0,f[c[l].buffer]+=c[l].size*ct[c[l].type];for(l in c){var p=c[l],_=p.size;void 0===p.stride&&(f[p.buffer]===_*ct[p.type]?p.stride=0:p.stride=f[p.buffer]),void 0===p.start&&(p.start=d[p.buffer],d[p.buffer]+=_*ct[p.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(var m=0;m<h.length;m++){var y=h[m];o.bind(y),r&&y._glBuffers[n].refCount++}return this.activateVao(e,s),this._activeVao=u,a[s.id]=u,a[t]=u},O.prototype.disposeGeometry=function(e,t){var r;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,o=e.buffers,s=null==(r=this.renderer)?void 0:r.buffer;if(e.disposeRunner.remove(this),i){if(s)for(var a=0;a<o.length;a++){var u=o[a]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||t||s.dispose(o[a],t))}if(!t)for(var l in i)"g"===l[0]&&(l=i[l],this._activeVao===l&&this.unbind(),n.deleteVertexArray(l));delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},O.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)},O.prototype.activateVao=function(e,t){var r,i=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,s=e.buffers,a=e.attributes,u=(e.indexBuffer&&o.bind(e.indexBuffer),null);for(r in a){var l=a[r],h=s[l.buffer],c=h._glBuffers[n];if(t.attributeData[r]){u!==c&&(o.bind(h),u=c);h=t.attributeData[r].location;if(i.enableVertexAttribArray(h),i.vertexAttribPointer(h,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(h,1)}}}},O.prototype.draw=function(e,t,r,i){var n,o,s=this.gl,a=this._activeGeometry;return a.indexBuffer?(o=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?s.UNSIGNED_SHORT:s.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(e,t||a.indexBuffer.data.length,o,(r||0)*n,i||1):s.drawElements(e,t||a.indexBuffer.data.length,o,(r||0)*n):void 0):a.instanced?s.drawArraysInstanced(e,r,t||a.getSize(),i||1):s.drawArrays(e,r,t||a.getSize()),this},O.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},O.prototype.destroy=function(){this.renderer=null},O);function O(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}Object.defineProperty(pt.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),pt.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=_.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},pt.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var dt=pt;function pt(e){void 0===e&&(e=null),this.type=_.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=p.settings.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}function _t(e,t,r){t=e.createShader(t);return e.shaderSource(t,r),e.compileShader(t),t}function mt(e,t){var r=e.getShaderSource(t).split("\n").map(function(e,t){return t+": "+e}),e=e.getShaderInfoLog(t),t=e.split("\n"),i={},t=t.map(function(e){return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(e){return!(!e||i[e])&&(i[e]=!0)}),n=[""],t=(t.forEach(function(e){r[e-1]="%c"+r[e-1]+"%c",n.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}),r.join("\n"));n[0]=t,void 0,void 0,console.warn.apply(console,n),void 0}function yt(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t}function vt(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return yt(2*t);case"bvec3":return yt(3*t);case"bvec4":return yt(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var gt,bt={},xt=bt;function Tt(){var e,t;return(xt===bt||xt&&xt.isContextLost())&&(e=document.createElement("canvas"),t=void 0,(t=p.settings.PREFER_ENV>=_.ENV.WEBGL2?e.getContext("webgl2",{}):t)||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),xt=t),xt}function Et(e,t,r){return"precision"!==e.substring(0,9)?"precision "+(t===_.PRECISION.HIGH&&r!==_.PRECISION.HIGH?_.PRECISION.MEDIUM:t)+" float;\n"+e:r!==_.PRECISION.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var Ot={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function St(e){return Ot[e]}var Rt=null,At={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Pt(e,t){if(!Rt){var r=Object.keys(At);Rt={};for(var i=0;i<r.length;++i){var n=r[i];Rt[e[n]]=At[n]}}return Rt[t]}var Ct=[{test:function(e){return"float"===e.type&&1===e.size},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '},codeUbo:function(e){return"\n                var "+e+"_matrix = uv."+e+".toArray(true);\n\n                data[offset] = "+e+"_matrix[0];\n                data[offset+1] = "+e+"_matrix[1];\n                data[offset+2] = "+e+"_matrix[2];\n        \n                data[offset + 4] = "+e+"_matrix[3];\n                data[offset + 5] = "+e+"_matrix[4];\n                data[offset + 6] = "+e+"_matrix[5];\n        \n                data[offset + 8] = "+e+"_matrix[6];\n                data[offset + 9] = "+e+"_matrix[7];\n                data[offset + 10] = "+e+"_matrix[8];\n            "}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&void 0!==t.x},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'},codeUbo:function(e){return"\n                v = uv."+e+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(e){return"vec2"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&void 0!==t.width},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(e){return"\n                    v = uv."+e+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(e){return"vec4"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Mt={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},wt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var It,Dt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Lt(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=t.createShader(t.FRAGMENT_SHADER);;){var i=Dt.replace(/%forloop%/gi,function(e){for(var t="",r=0;r<e;++r)0<r&&(t+="\nelse "),r<e-1&&(t+="if(test == "+r+".0){}");return t}(e));if(t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e}var Ft=0,Nt={},Bt=(Object.defineProperty(kt,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(kt,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),kt.from=function(e,t,r){var i=e+t,n=m.ProgramCache[i];return n||(m.ProgramCache[i]=n=new kt(e,t,r)),n},kt);function kt(e,t,r){void 0===r&&(r="pixi-shader"),this.id=Ft++,this.vertexSrc=e||kt.defaultVertexSrc,this.fragmentSrc=t||kt.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Nt[r]?(Nt[r]++,r+="-"+Nt[r]):Nt[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Et(this.vertexSrc,p.settings.PRECISION_VERTEX,_.PRECISION.HIGH),this.fragmentSrc=Et(this.fragmentSrc,p.settings.PRECISION_FRAGMENT,(gt||(gt=_.PRECISION.MEDIUM,(e=Tt())&&e.getShaderPrecisionFormat&&(e=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT),gt=e.precision?_.PRECISION.HIGH:_.PRECISION.MEDIUM)),gt))),this.glPrograms={},this.syncUniforms=null}Gt.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var r in t.uniforms){r=t.uniforms[r];if(r.group&&this.checkUniformExists(e,r))return!0}return!1},Gt.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(Gt.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),Gt.from=function(e,t,r){return new Gt(Bt.from(e,t),r)};var Ut=Gt;function Gt(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof Ke?t:new Ke(t):new Ke({})}Object.defineProperty(S.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==_.BLEND_MODES.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),S.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},S.for2d=function(){var e=new S;return e.depthTest=!1,e.blend=!0,e};var jt=S;function S(){this.data=0,this.blendMode=_.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}a(R,Xt=Ut),R.prototype.apply=function(e,t,r,i,n){e.applyFilter(this,t,r,i)},Object.defineProperty(R.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(R,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(R,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0});var Xt,Ht=R;function R(e,t,r){var i=this,e=Bt.from(e||R.defaultVertexSrc,t||R.defaultFragmentSrc);return(i=Xt.call(this,e,r)||this).padding=0,i.resolution=p.settings.FILTER_RESOLUTION,i.multisample=p.settings.FILTER_MULTISAMPLE,i.enabled=!0,i.autoFit=!0,i.state=new jt,i}var zt=new u.Matrix,Yt=(Object.defineProperty(Vt.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),Vt.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,i=0;i<e.length;i+=2){var n=e[i],o=e[i+1];t[i]=n*r.a+o*r.c+r.tx,t[i+1]=n*r.b+o*r.d+r.ty}return t},Vt.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var e=t._uvs,e=(this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0),t.orig),r=t.trim,e=(r&&(zt.set(e.width/r.width,0,0,e.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(zt)),t.baseTexture),r=this.uClampFrame,i=this.clampMargin/e.resolution,n=this.clampOffset;return r[0]=(t._frame.x+i+n)/e.width,r[1]=(t._frame.y+i+n)/e.height,r[2]=(t._frame.x+t._frame.width-i+n)/e.width,r[3]=(t._frame.y+t._frame.height-i+n)/e.height,this.uClampOffset[0]=n/e.realWidth,this.uClampOffset[1]=n/e.realHeight,this.isSimple=t._frame.width===e.width&&t._frame.height===e.height&&0===t.rotate,!0},Vt);function Vt(e,t){this._texture=e,this.mapCoord=new u.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}a(Kt,Wt=Ht),Object.defineProperty(Kt.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),Kt.prototype.apply=function(e,t,r,i){var n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Yt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,r,i))};var Wt,qt=Kt;function Kt(e,t,r){var i=this,n=null;return"string"!=typeof e&&void 0===t&&void 0===r&&(n=e,r=t=e=void 0),(i=Wt.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=n,i.maskMatrix=new u.Matrix,i}Qt.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},Qt.prototype.push=function(e,t){var r,i=t,t=(i.isMaskData||((r=this.maskDataPool.pop()||new dt).pooled=!0,r.maskObject=t,i=r),0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null);if(i.copyCountersOrReset(t),i.autoDetect&&this.detect(i),i._target=e,i.type!==_.MASK_TYPES.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case _.MASK_TYPES.SCISSOR:this.renderer.scissor.push(i);break;case _.MASK_TYPES.STENCIL:this.renderer.stencil.push(i);break;case _.MASK_TYPES.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i)}i.type===_.MASK_TYPES.SPRITE&&this.maskStack.push(i)},Qt.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case _.MASK_TYPES.SCISSOR:this.renderer.scissor.pop();break;case _.MASK_TYPES.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case _.MASK_TYPES.SPRITE:this.popSpriteMask(t)}t.reset(),t.pooled&&this.maskDataPool.push(t),0===this.maskStack.length||(e=this.maskStack[this.maskStack.length-1]).type===_.MASK_TYPES.SPRITE&&e._filters&&(e._filters[0].maskSprite=e.maskObject)}},Qt.prototype.detect=function(e){e.maskObject.isSprite?e.type=_.MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=_.MASK_TYPES.SCISSOR:e.type=_.MASK_TYPES.STENCIL},Qt.prototype.pushSpriteMask=function(e){var t,r=e.maskObject,i=e._target,n=(n=e._filters)||((n=this.alphaMaskPool[this.alphaMaskIndex])||(this.alphaMaskPool[this.alphaMaskIndex]=[new qt])),o=this.renderer,s=o.renderTexture,a=(s=s.current?(s=s.current,t=e.resolution||s.resolution,null!=(a=e.multisample)?a:s.multisample):(t=e.resolution||o.resolution,null!=(a=e.multisample)?a:o.multisample),n[0].resolution=t,n[0].multisample=s,n[0].maskSprite=r,i.filterArea);i.filterArea=r.getBounds(!0),o.filter.push(i,n),i.filterArea=a,e._filters||this.alphaMaskIndex++},Qt.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},Qt.prototype.destroy=function(){this.renderer=null};var Zt=Qt;function Qt(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}$t.prototype.getStackLength=function(){return this.maskStack.length},$t.prototype.setMaskStack=function(e){var t=this.renderer.gl,r=this.getStackLength(),e=(this.maskStack=e,this.getStackLength());e!==r&&(0===e?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},$t.prototype._useCurrent=function(){},$t.prototype.destroy=function(){this.renderer=null,this.maskStack=null};var Jt=$t;function $t(e){this.renderer=e,this.maskStack=[],this.glConst=0}var er,tr=new u.Matrix,rr=(a(A,er=Jt),A.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},A.prototype.calcScissorRect=function(e){var t,r,i,n,o;e._scissorRectLocal||(t=e._scissorRect,r=e.maskObject,n=(i=this.renderer).renderTexture,r.renderable=!0,o=r.getBounds(),this.roundFrameToPixels(o,(n.current||i).resolution,n.sourceFrame,n.destinationFrame,i.projection.transform),r.renderable=!1,t&&o.fit(t),e._scissorRectLocal=o)},A.isMatrixRotated=function(e){if(!e)return!1;var t=e.a,r=e.b,i=e.c,e=e.d;return(1e-4<Math.abs(r)||1e-4<Math.abs(i))&&(1e-4<Math.abs(t)||1e-4<Math.abs(e))},A.prototype.testScissor=function(e){var t=e.maskObject;if(!t.isFastRect||!t.isFastRect())return!1;if(A.isMatrixRotated(t.worldTransform))return!1;if(A.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);t=e._scissorRectLocal;return 0<t.width&&0<t.height},A.prototype.roundFrameToPixels=function(e,t,r,i,n){A.isMatrixRotated(n)||((n=n?tr.copyFrom(n):tr.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(n,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))},A.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var t=this.renderer.gl;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},A.prototype.pop=function(){var e=this.renderer.gl;0<this.getStackLength()?this._useCurrent():e.disable(e.SCISSOR_TEST)},A.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y;this.renderer.gl.scissor(e.x,t,e.width,e.height)},A);function A(e){e=er.call(this,e)||this;return e.glConst=WebGLRenderingContext.SCISSOR_TEST,e}a(or,ir=Jt),or.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},or.prototype.push=function(e){var t=e.maskObject,r=this.renderer.gl,i=e._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},or.prototype.pop=function(e){var t=this.renderer.gl;0===this.getStackLength()?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},or.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)};var ir,nr=or;function or(e){e=ir.call(this,e)||this;return e.glConst=WebGLRenderingContext.STENCIL_TEST,e}ar.prototype.update=function(e,t,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);t=this.renderer;t.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,t.globalUniforms.update(),t.shader.shader&&t.shader.syncUniformGroup(t.shader.shader.uniforms.globals)},ar.prototype.calculateProjection=function(e,t,r,i){var n=this.projectionMatrix,i=i?-1:1;n.identity(),n.a=1/t.width*2,n.d=i*(1/t.height*2),n.tx=-1-t.x*n.a,n.ty=-i-t.y*n.d},ar.prototype.setTransform=function(e){},ar.prototype.destroy=function(){this.renderer=null};var sr=ar;function ar(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new u.Matrix,this.transform=null}var ur=new u.Rectangle,lr=new u.Rectangle,hr=(cr.prototype.bind=function(e,t,r){var i,n,o,s=this.renderer,a=((this.current=e=void 0===e?null:e)?(o=(i=e.baseTexture).resolution,t||(ur.width=e.frame.width,ur.height=e.frame.height,t=ur),r||(lr.x=e.frame.x,lr.y=e.frame.y,lr.width=t.width,lr.height=t.height,r=lr),n=i.framebuffer):(o=s.resolution,t||(ur.width=s.screen.width,ur.height=s.screen.height,t=ur),r||((r=ur).width=t.width,r.height=t.height)),this.viewportFrame);a.x=r.x*o,a.y=r.y*o,a.width=r.width*o,a.height=r.height*o,e||(a.y=s.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(r,t,o,!n),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)},cr.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var r,i,n,o=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,o=o.width!==s.width||o.height!==s.height;o&&(r=(s=this.viewportFrame).x,i=s.y,n=s.width,s=s.height,r=Math.round(r),i=Math.round(i),n=Math.round(n),s=Math.round(s),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(r,i,n,s)),this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),o&&this.renderer.scissor.pop()},cr.prototype.resize=function(){this.bind(null)},cr.prototype.reset=function(){this.bind(null)},cr.prototype.destroy=function(){this.renderer=null},cr);function cr(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new u.Rectangle,this.destinationFrame=new u.Rectangle,this.viewportFrame=new u.Rectangle}function fr(e,t,r,i,n){r.buffer.update(n)}var dr={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},pr={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function _r(e){for(var t=e.map(function(e){return{data:e,offset:0,dataLen:0,dirty:0}}),r=0,i=0,n=0,o=0;o<t.length;o++){var s,a=t[o],r=pr[a.data.type];1<a.data.size&&(r=Math.max(r,16)*a.data.size),i%(a.dataLen=r)!=0&&i<16&&(i+=s=i%r%16,n+=s),16<i+r?(n=16*Math.ceil(n/16),a.offset=n,n+=r,i=r):(a.offset=n,i+=r,n+=r)}return{uboElements:t,size:n=16*Math.ceil(n/16)}}function mr(e,t){var r,i=[];for(r in e)t[r]&&i.push(t[r]);return i.sort(function(e,t){return e.index-t.index}),i}function yr(e,t){if(!e.autoManage)return{size:0,syncFunc:fr};for(var t=_r(mr(e.uniforms,t)),r=t.uboElements,t=t.size,i=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],n=0;n<r.length;n++){for(var o,s,a=r[n],u=e.uniforms[a.data.name],l=a.data.name,h=!1,c=0;c<Ct.length;c++){var f=Ct[c];if(f.codeUbo&&f.test(a.data,u)){i.push("offset = "+a.offset/4+";",Ct[c].codeUbo(a.data.name,u)),h=!0;break}}h||(1<a.data.size?(o=St(a.data.type),s=Math.max(pr[a.data.type]/16,1),i.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+a.data.size*s+"; i++)\n                {\n                    for(var j = 0; j < "+(o=o/s)+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+(4-o%4)%4+";\n                }\n\n                ")):(s=dr[a.data.type],i.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n                "+s+";\n                ")))}return i.push("\n       renderer.buffer.update(buffer);\n    "),{size:t,syncFunc:new Function("ud","uv","renderer","syncData","buffer",i.join("\n"))}}function vr(){}br.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null};var gr=br;function br(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}function xr(e,t){var r,i,n,o,s=_t(e,e.VERTEX_SHADER,t.vertexSrc),a=_t(e,e.FRAGMENT_SHADER,t.fragmentSrc),u=e.createProgram();if(e.attachShader(u,s),e.attachShader(u,a),e.linkProgram(u),e.getProgramParameter(u,e.LINK_STATUS)||(i=u,n=s,o=a,(r=e).getProgramParameter(i,r.LINK_STATUS)||(r.getShaderParameter(n,r.COMPILE_STATUS)||mt(r,n),r.getShaderParameter(o,r.COMPILE_STATUS)||mt(r,o),void 0,""!==r.getProgramInfoLog(i)&&void 0)),t.attributeData=function(e,t){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var o,s=t.getActiveAttrib(e,n);0!==s.name.indexOf("gl_")&&(o={type:o=Pt(t,s.type),name:s.name,size:St(o),location:t.getAttribLocation(e,s.name)},r[s.name]=o)}return r}(u,e),t.uniformData=function(e,t){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var o=t.getActiveUniform(e,n),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),u=Pt(t,o.type);r[s]={name:s,index:n,type:u,size:o.size,isArray:a,value:vt(u,o.size)}}return r}(u,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var l=Object.keys(t.attributeData);l.sort(function(e,t){return t<e?1:-1});for(var h=0;h<l.length;h++)t.attributeData[l[h]].location=h,e.bindAttribLocation(u,h,l[h]);e.linkProgram(u)}e.deleteShader(s),e.deleteShader(a);var c={};for(h in t.uniformData){var f=t.uniformData[h];c[h]={location:e.getUniformLocation(u,h),value:vt(f.type,f.size)}}return new gr(u,c)}var Tr=0,Er={textureCount:0,uboCount:0},Or=(P.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof It)return It;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");It=!0===e({a:"b"},"a","b")}catch(e){It=!1}return It}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},P.prototype.contextChange=function(e){this.gl=e,this.reset()},P.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),t||(Er.textureCount=0,Er.uboCount=0,this.syncUniformGroup(e.uniformGroup,Er)),i},P.prototype.setUniforms=function(e){var t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)},P.prototype.syncUniformGroup=function(e,t){var r=this.getGlProgram();e.static&&e.dirtyId===r.uniformDirtyGroups[e.id]||(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))},P.prototype.syncUniforms=function(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)},P.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){var r,i=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(r in e.uniforms){var n=t[r];if(n){for(var o,s=e.uniforms[r],a=!1,u=0;u<Ct.length;u++)if(Ct[u].test(n,s)){i.push(Ct[u].code(r,s)),a=!0;break}a||(o=(1===n.size?Mt:wt)[n.type].replace("location",'ud["'+r+'"].location'),i.push('\n            cu = ud["'+r+'"];\n            cv = cu.value;\n            v = uv["'+r+'"];\n            '+o+";"))}else null!=(o=e.uniforms[r])&&o.group&&(e.uniforms[r].ubo?i.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+r+", '"+r+"');\n                    "):i.push("\n                        renderer.shader.syncUniformGroup(uv."+r+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},P.prototype.syncUniformBufferGroup=function(e,t){var r,i=this.getGlProgram();e.static&&0===e.dirtyId&&i.uniformGroups[e.id]||(e.dirtyId=0,r=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,t),e.buffer.update(),r(i.uniformData,e.uniforms,this.renderer,Er,e.buffer)),this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[t])},P.prototype.createSyncBufferGroup=function(e,t,r){var i=this.renderer.gl,n=(this.renderer.buffer.bind(e.buffer),this.gl.getUniformBlockIndex(t.program,r)),r=(t.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++,this.getSignature(e,this.shader.program.uniformData,"ubo")),i=(i=this._uboCache[r])||(this._uboCache[r]=yr(e,this.shader.program.uniformData));return e.autoManage&&(n=new Float32Array(i.size/4),e.buffer.update(n)),t.uniformGroups[e.id]=i.syncFunc,t.uniformGroups[e.id]},P.prototype.getSignature=function(e,t,r){var i,n=[r+"-"];for(i in e.uniforms)n.push(i),t[i]&&n.push(t[i].type);return n.join("-")},P.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},P.prototype.generateProgram=function(e){var t=this.gl,e=e.program,t=xr(t,e);return e.glPrograms[this.renderer.CONTEXT_UID]=t},P.prototype.reset=function(){this.program=null,this.shader=null},P.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},P);function P(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Tr++}C.prototype.contextChange=function(e){var t;this.gl=e,this.blendModes=(e=e,(t=void 0===t?[]:t)[_.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.ADD]=[e.ONE,e.ONE],t[_.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.NONE]=[0,0],t[_.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[_.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[_.BLEND_MODES.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[_.BLEND_MODES.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[_.BLEND_MODES.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[_.BLEND_MODES.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[_.BLEND_MODES.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[_.BLEND_MODES.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t),this.set(this.defaultState),this.reset()},C.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,r=0;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,e)},C.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},C.prototype.setBlend=function(e){this.updateCheck(C.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},C.prototype.setOffset=function(e){this.updateCheck(C.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},C.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},C.prototype.setDepthMask=function(e){this.gl.depthMask(e)},C.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},C.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},C.prototype.setBlendMode=function(e){var t;e!==this.blendMode&&(this.blendMode=e,e=this.blendModes[e],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},C.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},C.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},C.prototype.updateCheck=function(e,t){var r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):t||-1===r||this.checks.splice(r,1)},C.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},C.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},C.prototype.destroy=function(){this.gl=null};var Sr=C;function C(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=_.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new jt,this.defaultState.blend=!0}Ar.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==_.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},Ar.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,r=!1,i=0;i<t.length;i++){var n=t[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),r=!(t[i]=null))}if(r){for(var o=0,i=0;i<t.length;i++)null!==t[i]&&(t[o++]=t[i]);t.length=o}},Ar.prototype.unload=function(e){var t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(var i=e.children.length-1;0<=i;i--)this.unload(e.children[i])},Ar.prototype.destroy=function(){this.renderer=null};var Rr=Ar;function Ar(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=p.settings.GC_MAX_IDLE,this.checkCountMax=p.settings.GC_MAX_CHECK_COUNT,this.mode=p.settings.GC_MODE}var Pr=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=_.TYPES.UNSIGNED_BYTE,this.internalFormat=_.FORMATS.RGBA,this.samplerType=0},Cr=(M.prototype.contextChange=function(){var e,t,r=this.gl=this.renderer.gl,i=(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=(e=r,e="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?((o={})[_.TYPES.UNSIGNED_BYTE]=((t={})[_.FORMATS.RGBA]=e.RGBA8,t[_.FORMATS.RGB]=e.RGB8,t[_.FORMATS.RG]=e.RG8,t[_.FORMATS.RED]=e.R8,t[_.FORMATS.RGBA_INTEGER]=e.RGBA8UI,t[_.FORMATS.RGB_INTEGER]=e.RGB8UI,t[_.FORMATS.RG_INTEGER]=e.RG8UI,t[_.FORMATS.RED_INTEGER]=e.R8UI,t[_.FORMATS.ALPHA]=e.ALPHA,t[_.FORMATS.LUMINANCE]=e.LUMINANCE,t[_.FORMATS.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,t),o[_.TYPES.BYTE]=((t={})[_.FORMATS.RGBA]=e.RGBA8_SNORM,t[_.FORMATS.RGB]=e.RGB8_SNORM,t[_.FORMATS.RG]=e.RG8_SNORM,t[_.FORMATS.RED]=e.R8_SNORM,t[_.FORMATS.RGBA_INTEGER]=e.RGBA8I,t[_.FORMATS.RGB_INTEGER]=e.RGB8I,t[_.FORMATS.RG_INTEGER]=e.RG8I,t[_.FORMATS.RED_INTEGER]=e.R8I,t),o[_.TYPES.UNSIGNED_SHORT]=((t={})[_.FORMATS.RGBA_INTEGER]=e.RGBA16UI,t[_.FORMATS.RGB_INTEGER]=e.RGB16UI,t[_.FORMATS.RG_INTEGER]=e.RG16UI,t[_.FORMATS.RED_INTEGER]=e.R16UI,t[_.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,t),o[_.TYPES.SHORT]=((t={})[_.FORMATS.RGBA_INTEGER]=e.RGBA16I,t[_.FORMATS.RGB_INTEGER]=e.RGB16I,t[_.FORMATS.RG_INTEGER]=e.RG16I,t[_.FORMATS.RED_INTEGER]=e.R16I,t),o[_.TYPES.UNSIGNED_INT]=((t={})[_.FORMATS.RGBA_INTEGER]=e.RGBA32UI,t[_.FORMATS.RGB_INTEGER]=e.RGB32UI,t[_.FORMATS.RG_INTEGER]=e.RG32UI,t[_.FORMATS.RED_INTEGER]=e.R32UI,t[_.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,t),o[_.TYPES.INT]=((t={})[_.FORMATS.RGBA_INTEGER]=e.RGBA32I,t[_.FORMATS.RGB_INTEGER]=e.RGB32I,t[_.FORMATS.RG_INTEGER]=e.RG32I,t[_.FORMATS.RED_INTEGER]=e.R32I,t),o[_.TYPES.FLOAT]=((t={})[_.FORMATS.RGBA]=e.RGBA32F,t[_.FORMATS.RGB]=e.RGB32F,t[_.FORMATS.RG]=e.RG32F,t[_.FORMATS.RED]=e.R32F,t[_.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,t),o[_.TYPES.HALF_FLOAT]=((t={})[_.FORMATS.RGBA]=e.RGBA16F,t[_.FORMATS.RGB]=e.RGB16F,t[_.FORMATS.RG]=e.RG16F,t[_.FORMATS.RED]=e.R16F,t),o[_.TYPES.UNSIGNED_SHORT_5_6_5]=((t={})[_.FORMATS.RGB]=e.RGB565,t),o[_.TYPES.UNSIGNED_SHORT_4_4_4_4]=((t={})[_.FORMATS.RGBA]=e.RGBA4,t),o[_.TYPES.UNSIGNED_SHORT_5_5_5_1]=((t={})[_.FORMATS.RGBA]=e.RGB5_A1,t),o[_.TYPES.UNSIGNED_INT_2_10_10_10_REV]=((t={})[_.FORMATS.RGBA]=e.RGB10_A2,t[_.FORMATS.RGBA_INTEGER]=e.RGB10_A2UI,t),o[_.TYPES.UNSIGNED_INT_10F_11F_11F_REV]=((t={})[_.FORMATS.RGB]=e.R11F_G11F_B10F,t),o[_.TYPES.UNSIGNED_INT_5_9_9_9_REV]=((t={})[_.FORMATS.RGB]=e.RGB9_E5,t),o[_.TYPES.UNSIGNED_INT_24_8]=((t={})[_.FORMATS.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,t),o[_.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]=((t={})[_.FORMATS.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,t),o):((t={})[_.TYPES.UNSIGNED_BYTE]=((o={})[_.FORMATS.RGBA]=e.RGBA,o[_.FORMATS.RGB]=e.RGB,o[_.FORMATS.ALPHA]=e.ALPHA,o[_.FORMATS.LUMINANCE]=e.LUMINANCE,o[_.FORMATS.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,o),t[_.TYPES.UNSIGNED_SHORT_5_6_5]=((o={})[_.FORMATS.RGB]=e.RGB,o),t[_.TYPES.UNSIGNED_SHORT_4_4_4_4]=((o={})[_.FORMATS.RGBA]=e.RGBA,o),t[_.TYPES.UNSIGNED_SHORT_5_5_5_1]=((o={})[_.FORMATS.RGBA]=e.RGBA,o),t)),r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS));this.boundTextures.length=i;for(var n=0;n<i;n++)this.boundTextures[n]=null;this.emptyTextures={};var o=new Pr(r.createTexture());r.bindTexture(r.TEXTURE_2D,o.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[r.TEXTURE_2D]=o,this.emptyTextures[r.TEXTURE_CUBE_MAP]=new Pr(r.createTexture()),r.bindTexture(r.TEXTURE_CUBE_MAP,this.emptyTextures[r.TEXTURE_CUBE_MAP].texture);for(n=0;n<6;n++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,null);r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR);for(n=0;n<this.boundTextures.length;n++)this.bind(null,n)},M.prototype.bind=function(e,t){void 0===t&&(t=0);var r,i=this.gl;(e=null==e?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray?(e.touched=this.renderer.textureGC.count,r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e),this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e):(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null)},M.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},M.prototype.unbind=function(e){var t=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)},M.prototype.ensureSamplerType=function(e){var t=this.boundTextures,r=this.hasIntegerTextures,i=this.CONTEXT_UID;if(r)for(var n=e-1;0<=n;--n){var o=t[n];o&&o._glTextures[i].samplerType!==_.SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(o)}},M.prototype.initTexture=function(e){var t=new Pr(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},M.prototype.initTextureType=function(e,t){var r;t.internalFormat=null!=(r=null==(r=this.internalFormats[e.type])?void 0:r[e.format])?r:e.format,2===this.webGLVersion&&e.type===_.TYPES.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},M.prototype.updateTexture=function(e){var t,r,i,n=e._glTextures[this.CONTEXT_UID];n&&(i=this.renderer,this.initTextureType(e,n),e.resource&&e.resource.upload(i,e,n)?n.samplerType!==_.SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0):(t=e.realWidth,r=e.realHeight,i=i.gl,(n.width!==t||n.height!==r||n.dirtyId<0)&&(n.width=t,n.height=r,i.texImage2D(e.target,0,n.internalFormat,t,r,0,e.format,n.type,null))),e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId)},M.prototype.destroyTexture=function(e,t){var r=this.gl;(e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],t||-1!==(r=this.managedTextures.indexOf(e))&&m.removeItems(this.managedTextures,r,1))},M.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==_.MIPMAP_MODES.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=1<=e.mipmap:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=_.WRAP_MODES.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},M.prototype.setStyle=function(e,t){var r,i=this.gl;t.mipmap&&e.mipmap!==_.MIPMAP_MODES.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap?(i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===_.SCALE_MODES.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),(t=this.renderer.context.extensions.anisotropicFiltering)&&0<e.anisotropicLevel&&e.scaleMode===_.SCALE_MODES.LINEAR&&(r=Math.min(e.anisotropicLevel,i.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),i.texParameterf(e.target,t.TEXTURE_MAX_ANISOTROPY_EXT,r))):i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===_.SCALE_MODES.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===_.SCALE_MODES.LINEAR?i.LINEAR:i.NEAREST)},M.prototype.destroy=function(){this.renderer=null},M);function M(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new f,this.hasIntegerTextures=!1}var Mr,wr={__proto__:null,FilterSystem:tt,BatchSystem:nt,ContextSystem:at,FramebufferSystem:ht,GeometrySystem:ft,MaskSystem:Zt,ScissorSystem:rr,StencilSystem:nr,ProjectionSystem:sr,RenderTextureSystem:hr,ShaderSystem:Or,StateSystem:Sr,TextureGCSystem:Rr,TextureSystem:Cr},Ir=new u.Matrix,Jt=(a(w,Mr=m.EventEmitter),w.prototype.initPlugins=function(e){for(var t in e)this.plugins[t]=new e[t](this)},Object.defineProperty(w.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),w.prototype.resize=function(e,t){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(t*this.resolution);e=this.view.width/this.resolution,t=this.view.height/this.resolution;this.screen.width=e,this.screen.height=t,this.autoDensity&&(this.view.style.width=e+"px",this.view.style.height=t+"px"),this.emit("resize",e,t)},w.prototype.generateTexture=function(e,t,r,i){"number"==typeof(t=void 0===t?{}:t)&&(m.deprecation("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),t={scaleMode:t,resolution:r,region:i});r=t.region,t=function(e,t){var r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]]);return r}(t,["region"]),0===(i=r||e.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1),r=Me.create(j({width:i.width,height:i.height},t));return Ir.tx=-i.x,Ir.ty=-i.y,this.render(e,{renderTexture:r,clear:!1,transform:Ir,skipUpdateTransform:!!e.parent}),r},w.prototype.destroy=function(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);e=this;e.plugins=null,e.type=_.RENDERER_TYPE.UNKNOWN,e.view=null,e.screen=null,e._tempDisplayObjectParent=null,e.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(w.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=m.hex2string(e),m.hex2rgb(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),w);function w(e,t){void 0===e&&(e=_.RENDERER_TYPE.UNKNOWN);var r=Mr.call(this)||this;return t=Object.assign({},p.settings.RENDER_OPTIONS,t),r.options=t,r.type=e,r.screen=new u.Rectangle(0,0,t.width,t.height),r.view=t.view||document.createElement("canvas"),r.resolution=t.resolution||p.settings.RESOLUTION,r.useContextAlpha=t.useContextAlpha,r.autoDensity=!!t.autoDensity,r.preserveDrawingBuffer=t.preserveDrawingBuffer,r.clearBeforeRender=t.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=t.backgroundColor||r._backgroundColor,r.backgroundAlpha=t.backgroundAlpha,void 0!==t.transparent&&(m.deprecation("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=t.transparent,r.backgroundAlpha=t.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}var Dr=function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Lr=(I.prototype.destroy=function(){this.renderer=null},I.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},I.prototype.bind=function(e){var t=this.gl,r=this.CONTEXT_UID,r=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)},I.prototype.bindBufferBase=function(e,t){var r=this.gl,i=this.CONTEXT_UID;this.boundBufferBases[t]!==e&&(i=e._glBuffers[i]||this.createGLBuffer(e),this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,i.buffer))},I.prototype.bindBufferRange=function(e,t,r){var i=this.gl,n=this.CONTEXT_UID,n=(r=r||0,e._glBuffers[n]||this.createGLBuffer(e));i.bindBufferRange(i.UNIFORM_BUFFER,t||0,n.buffer,256*r,256)},I.prototype.update=function(e){var t,r=this.gl,i=this.CONTEXT_UID,i=e._glBuffers[i];e._updateID!==i.updateID&&(i.updateID=e._updateID,r.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength?r.bufferSubData(e.type,0,e.data):(t=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW,i.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,t)))},I.prototype.dispose=function(e,t){var r,i;this.managedBuffers[e.id]&&(delete this.managedBuffers[e.id],r=e._glBuffers[this.CONTEXT_UID],i=this.gl,e.disposeRunner.remove(this),r&&(t||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID]))},I.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)},I.prototype.createGLBuffer=function(e){var t=this.CONTEXT_UID,r=this.gl;return e._glBuffers[t]=new Dr(r.createBuffer()),(this.managedBuffers[e.id]=e).disposeRunner.add(this),e._glBuffers[t]},I);function I(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}a(D,Fr=Jt),D.create=function(e){if(m.isWebGLSupported())return new D(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},D.prototype.contextChange=function(){var e,t,r=this.gl;1===this.context.webGLVersion?(t=r.getParameter(r.FRAMEBUFFER_BINDING),r.bindFramebuffer(r.FRAMEBUFFER,null),e=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,t)):(t=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),e=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,t)),e>=_.MSAA_QUALITY.HIGH?this.multisample=_.MSAA_QUALITY.HIGH:e>=_.MSAA_QUALITY.MEDIUM?this.multisample=_.MSAA_QUALITY.MEDIUM:e>=_.MSAA_QUALITY.LOW?this.multisample=_.MSAA_QUALITY.LOW:this.multisample=_.MSAA_QUALITY.NONE},D.prototype.addSystem=function(e,t){var r,i=new e(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');for(r in this[t]=i,this.runners)this.runners[r].add(i);return this},D.prototype.render=function(e,t){var r,i,n,o;t&&(o=t instanceof Me?(m.deprecation("6.0.0","Renderer#render arguments changed, use options instead."),r=t,i=arguments[2],n=arguments[3],arguments[4]):(r=t.renderTexture,i=t.clear,n=t.transform,t.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(r||(this._lastObjectRendered=e),o||(t=e.enableTempParent(),e.updateTransform(),e.disableTempParent(t)),this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},D.prototype.generateTexture=function(e,t,r,i){e=Fr.prototype.generateTexture.call(this,e,t=void 0===t?{}:t,r,i);return this.framebuffer.blit(),e},D.prototype.resize=function(e,t){Fr.prototype.resize.call(this,e,t),this.runners.resize.emit(this.screen.height,this.screen.width)},D.prototype.reset=function(){return this.runners.reset.emit(),this},D.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},D.prototype.destroy=function(e){for(var t in this.runners.destroy.emit(),this.runners)this.runners[t].destroy();Fr.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(D.prototype,"extract",{get:function(){return m.deprecation("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),D.registerPlugin=function(e,t){(D.__plugins=D.__plugins||{})[e]=t};var Fr,Nr=D;function D(e){var t=Fr.call(this,_.RENDERER_TYPE.WEBGL,e)||this;return e=t.options,t.gl=null,t.CONTEXT_UID=0,t.runners={destroy:new i.Runner("destroy"),contextChange:new i.Runner("contextChange"),reset:new i.Runner("reset"),update:new i.Runner("update"),postrender:new i.Runner("postrender"),prerender:new i.Runner("prerender"),resize:new i.Runner("resize")},t.runners.contextChange.add(t),t.globalUniforms=new Ke({projectionMatrix:new u.Matrix},!0),t.addSystem(Zt,"mask").addSystem(at,"context").addSystem(Sr,"state").addSystem(Or,"shader").addSystem(Cr,"texture").addSystem(Lr,"buffer").addSystem(ft,"geometry").addSystem(ht,"framebuffer").addSystem(rr,"scissor").addSystem(nr,"stencil").addSystem(sr,"projection").addSystem(Rr,"textureGC").addSystem(tt,"filter").addSystem(hr,"renderTexture").addSystem(nt,"batch"),t.initPlugins(D.__plugins),t.multisample=void 0,e.context?t.context.initFromContext(e.context):t.context.initFromOptions({alpha:!!t.useContextAlpha,antialias:e.antialias,premultipliedAlpha:t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:t.options.powerPreference}),t.renderingToScreen=!0,m.sayHello(2===t.context.webGLVersion?"WebGL 2":"WebGL 1"),t.resize(t.options.width,t.options.height),t}kr.prototype.destroy=function(){this.renderer=null};var Br=kr;function kr(e){m.deprecation("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}var Ur=function(){this.texArray=null,this.blend=0,this.type=_.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null},Gr=(jr.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},jr);function jr(){this.elements=[],this.ids=[],this.count=0}Object.defineProperty(L.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),L.prototype.view=function(e){return this[e+"View"]},L.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},L.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}};var Xr=L;function L(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}a(F,Hr=rt),F.prototype.contextChange=function(){var e=this.renderer.gl;p.settings.PREFER_ENV===_.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),p.settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Lt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()},F.prototype.initFlushBuffers=function(){for(var e=F._drawCallPool,t=F._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;e.length<r;)e.push(new Ur);for(;t.length<i;)t.push(new Gr);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},F.prototype.onPrerender=function(){this._flushId=0},F.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},F.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,t=this.MAX_TEXTURES,r=F._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,o=this.renderer.textureGC.count,s=++f._globalBatch,a=0,u=r[0],l=0;i.copyBoundTextures(n,t);for(var h=0;h<this._bufferSize;++h){var c=e[h];e[h]=null,c._batchEnabled!==s&&(u.count>=t&&(i.boundArray(u,n,s,t),this.buildDrawCalls(u,l,h),l=h,u=r[++a],++s),c._batchEnabled=s,c.touched=o,u.elements[u.count++]=c)}0<u.count&&(i.boundArray(u,n,s,t),this.buildDrawCalls(u,l,this._bufferSize),++a,++s);for(h=0;h<n.length;h++)n[h]=null;f._globalBatch=s},F.prototype.buildDrawCalls=function(e,t,r){var i=this._bufferedElements,n=this._attributeBuffer,o=this._indexBuffer,s=this.vertexSize,a=F._drawCallPool,u=this._dcIndex,l=this._aIndex,h=this._iIndex,c=a[u];c.start=this._iIndex,c.texArray=e;for(var f=t;f<r;++f){var d=i[f],p=d._texture.baseTexture,p=m.premultiplyBlendMode[p.alphaMode?1:0][d.blendMode];i[f]=null,t<f&&c.blend!==p&&(c.size=h-c.start,t=f,(c=a[++u]).texArray=e,c.start=h),this.packInterleavedGeometry(d,n,o,l,h),l+=d.vertexData.length/2*s,h+=d.indices.length,c.blend=p}t<r&&(c.size=h-c.start,++u),this._dcIndex=u,this._aIndex=l,this._iIndex=h},F.prototype.bindAndClearTexArray=function(e){for(var t=this.renderer.texture,r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0},F.prototype.updateGeometry=function(){var e=this._packedGeometries,t=this._attributeBuffer,r=this._indexBuffer;p.settings.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},F.prototype.drawBatches=function(){for(var e=this._dcIndex,t=this.renderer,r=t.gl,i=t.state,n=F._drawCallPool,o=null,s=0;s<e;s++){var a=n[s],u=a.texArray,l=a.type,h=a.size,c=a.start,a=a.blend;o!==u&&this.bindAndClearTexArray(o=u),this.state.blendMode=a,i.set(this.state),r.drawElements(l,h,r.UNSIGNED_SHORT,2*c)}},F.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},F.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),p.settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},F.prototype.stop=function(){this.flush()},F.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),Hr.prototype.destroy.call(this)},F.prototype.getAttributeBuffer=function(e){var e=m.nextPow2(Math.ceil(e/8)),t=m.log2(e),e=8*e,t=(this._aBuffers.length<=t&&(this._iBuffers.length=t+1),this._aBuffers[e]);return t||(this._aBuffers[e]=t=new Xr(e*this.vertexSize*4)),t},F.prototype.getIndexBuffer=function(e){var e=m.nextPow2(Math.ceil(e/12)),t=m.log2(e),e=12*e,r=(this._iBuffers.length<=t&&(this._iBuffers.length=t+1),this._iBuffers[t]);return r||(this._iBuffers[t]=r=new Uint16Array(e)),r},F.prototype.packInterleavedGeometry=function(e,t,r,i,n){for(var o=t.uint32View,s=t.float32View,a=i/this.vertexSize,u=e.uvs,l=e.indices,h=e.vertexData,c=e._texture.baseTexture._batchLocation,t=Math.min(e.worldAlpha,1),f=t<1&&e._texture.baseTexture.alphaMode?m.premultiplyTint(e._tintRGB,t):e._tintRGB+(255*t<<24),d=0;d<h.length;d+=2)s[i++]=h[d],s[i++]=h[d+1],s[i++]=u[d],s[i++]=u[d+1],o[i++]=f,s[i++]=c;for(d=0;d<l.length;d++)r[n++]=a+l[d]},F._drawCallPool=[],F._textureArrayPool=[];var Hr,zr=F;function F(e){var t=Hr.call(this,e)||this;return t.shaderGenerator=null,t.geometryClass=null,t.vertexSize=null,t.state=jt.for2d(),t.size=4*p.settings.SPRITE_BATCH_SIZE,t._vertexCount=0,t._indexCount=0,t._bufferedElements=[],t._bufferedTextures=[],t._bufferSize=0,t._shader=null,t._packedGeometries=[],t._packedGeometryPoolSize=2,t._flushId=0,t._aBuffers={},t._iBuffers={},t.MAX_TEXTURES=1,t.renderer.on("prerender",t.onPrerender,t),e.runners.contextChange.add(t),t._dcIndex=0,t._aIndex=0,t._iIndex=0,t._attributeBuffer=null,t._indexBuffer=null,t._tempBoundTextures=[],t}Vr.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=Ke.from({uSamplers:t},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Bt(this.vertexSrc,i)}i={tint:new Float32Array([1,1,1,1]),translationMatrix:new u.Matrix,default:this.defaultGroupCache[e]};return new Ut(this.programCache[e],i)},Vr.prototype.generateSampleSrc=function(e){for(var t=(t="")+"\n"+"\n",r=0;r<e;r++)0<r&&(t+="\nelse "),r<e-1&&(t+="if(vTextureId < "+r+".5)"),t=(t+="\n{")+"\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);\n}";return t=t+"\n"+"\n"};var Yr=Vr;function Vr(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}a(Kr,Wr=je);var Wr,qr=Kr;function Kr(e){void 0===e&&(e=!1);var t=Wr.call(this)||this;return t._buffer=new g(null,e,!1),t._indexBuffer=new g(null,e,!0),t.addAttribute("aVertexPosition",t._buffer,2,!1,_.TYPES.FLOAT).addAttribute("aTextureCoord",t._buffer,2,!1,_.TYPES.FLOAT).addAttribute("aColor",t._buffer,4,!0,_.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",t._buffer,1,!0,_.TYPES.FLOAT).addIndex(t._indexBuffer),t}var Zr="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Qr="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Jr=($r.create=function(e){var t,e=Object.assign({vertex:Zr,fragment:Qr,geometryClass:qr,vertexSize:6},e),r=e.vertex,i=e.fragment,n=e.vertexSize,o=e.geometryClass;return a(s,t=zr),s;function s(e){e=t.call(this,e)||this;return e.shaderGenerator=new Yr(r,i),e.geometryClass=o,e.vertexSize=n,e}},Object.defineProperty($r,"defaultVertexSrc",{get:function(){return Zr},enumerable:!1,configurable:!0}),Object.defineProperty($r,"defaultFragmentTemplate",{get:function(){return Qr},enumerable:!1,configurable:!0}),$r);function $r(){}var ei=Jr.create(),ti={};for(ri in ye)!function(e){Object.defineProperty(ti,e,{get:function(){return m.deprecation("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),ye[e]}})}(ri);var ri,ii={};for(ri in wr)!function(e){Object.defineProperty(ii,e,{get:function(){return m.deprecation("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),wr[e]}})}(ri);t.AbstractBatchRenderer=zr,t.AbstractMultiResource=e,t.AbstractRenderer=Jt,t.ArrayResource=Q,t.Attribute=De,t.BaseImageResource=h,t.BaseRenderTexture=Te,t.BaseTexture=f,t.BatchDrawCall=Ur,t.BatchGeometry=qr,t.BatchPluginFactory=Jr,t.BatchRenderer=ei,t.BatchShaderGenerator=Yr,t.BatchSystem=nt,t.BatchTextureArray=Gr,t.Buffer=g,t.BufferResource=z,t.CanvasResource=re,t.ContextSystem=at,t.CubeResource=oe,t.Filter=Ht,t.FilterState=Qe,t.FilterSystem=tt,t.Framebuffer=be,t.FramebufferSystem=ht,t.GLFramebuffer=ut,t.GLProgram=gr,t.GLTexture=Pr,t.Geometry=je,t.GeometrySystem=ft,t.IGLUniformData=vr,t.INSTALLED=k,t.ImageBitmapResource=pe,t.ImageResource=ae,t.MaskData=dt,t.MaskSystem=Zt,t.ObjectRenderer=rt,t.Program=Bt,t.ProjectionSystem=sr,t.Quad=He,t.QuadUv=Ve,t.RenderTexture=Me,t.RenderTexturePool=Ie,t.RenderTextureSystem=hr,t.Renderer=Nr,t.Resource=X,t.SVGResource=he,t.ScissorSystem=rr,t.Shader=Ut,t.ShaderSystem=Or,t.SpriteMaskFilter=qt,t.State=jt,t.StateSystem=Sr,t.StencilSystem=nr,t.System=Br,t.Texture=d,t.TextureGCSystem=Rr,t.TextureMatrix=Yt,t.TextureSystem=Cr,t.TextureUvs=Oe,t.UniformGroup=Ke,t.VideoResource=fe,t.ViewableBuffer=Xr,t.autoDetectRenderer=function(e){return Nr.create(e)},t.autoDetectResource=U,t.checkMaxIfStatementsInShader=Lt,t.createUBOElements=_r,t.defaultFilterVertex="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",t.defaultVertex="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",t.generateProgram=xr,t.generateUniformBufferSync=yr,t.getTestContext=Tt,t.getUBOData=mr,t.resources=ti,t.systems=ii,t.uniformParsers=Ct},{"@pixi/constants":21,"@pixi/math":67,"@pixi/runner":76,"@pixi/settings":77,"@pixi/ticker":84,"@pixi/utils":85}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/settings"),o=e("@pixi/math"),s=e("@pixi/utils"),a=(i.settings.SORTABLE_CHILDREN=!1,n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},n.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?o.Rectangle.EMPTY:((e=e||new o.Rectangle(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},n.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},n.prototype.addPointMatrix=function(e,t){var r=e.a,i=e.b,n=e.c,o=e.d,s=e.tx,e=e.ty,r=r*t.x+n*t.y+s,n=i*t.x+o*t.y+e;this.minX=Math.min(this.minX,r),this.maxX=Math.max(this.maxX,r),this.minY=Math.min(this.minY,n),this.maxY=Math.max(this.maxY,n)},n.prototype.addQuad=function(e){var t=this.minX,r=this.minY,i=this.maxX,n=this.maxY,o=e[0],s=e[1],t=o<t?o:t,r=s<r?s:r,i=i<o?o:i,n=n<s?s:n;t=(o=e[2])<t?o:t,r=(s=e[3])<r?s:r,i=i<o?o:i,n=n<s?s:n,t=(o=e[4])<t?o:t,r=(s=e[5])<r?s:r,i=i<o?o:i,n=n<s?s:n,o=e[6],r=(s=e[7])<r?s:r,i=i<o?o:i,n=n<s?s:n,this.minX=t=o<t?o:t,this.minY=r,this.maxX=i,this.maxY=n},n.prototype.addFrame=function(e,t,r,i,n){this.addFrameMatrix(e.worldTransform,t,r,i,n)},n.prototype.addFrameMatrix=function(e,t,r,i,n){var o=e.a,s=e.b,a=e.c,u=e.d,l=e.tx,e=e.ty,h=o*t+a*r+l,c=s*t+u*r+e,f=h<(f=this.minX)?h:f,d=c<(d=this.minY)?c:d,p=(p=this.maxX)<h?h:p,_=(_=this.maxY)<c?c:_;f=(h=o*i+a*r+l)<f?h:f,d=(c=s*i+u*r+e)<d?c:d,p=p<h?h:p,_=_<c?c:_,f=(h=o*t+a*n+l)<f?h:f,d=(c=s*t+u*n+e)<d?c:d,_=_<c?c:_,d=(c=s*i+u*n+e)<d?c:d,p=(p=p<h?h:p)<(h=o*i+a*n+l)?h:p,_=_<c?c:_,this.minX=f=h<f?h:f,this.minY=d,this.maxX=p,this.maxY=_},n.prototype.addVertexData=function(e,t,r){for(var i=this.minX,n=this.minY,o=this.maxX,s=this.maxY,a=t;a<r;a+=2)var u=e[a],l=e[a+1],i=u<i?u:i,n=l<n?l:n,o=o<u?u:o,s=s<l?l:s;this.minX=i,this.minY=n,this.maxX=o,this.maxY=s},n.prototype.addVertices=function(e,t,r,i){this.addVerticesMatrix(e.worldTransform,t,r,i)},n.prototype.addVerticesMatrix=function(e,t,r,i,n,o){void 0===n&&(n=0),void 0===o&&(o=n);for(var s=e.a,a=e.b,u=e.c,l=e.d,h=e.tx,c=e.ty,f=this.minX,d=this.minY,p=this.maxX,_=this.maxY,m=r;m<i;m+=2)var y=t[m],v=t[m+1],g=s*y+u*v+h,v=l*v+a*y+c,f=Math.min(f,g-n),p=Math.max(p,g+n),d=Math.min(d,v-o),_=Math.max(_,v+o);this.minX=f,this.minY=d,this.maxX=p,this.maxY=_},n.prototype.addBounds=function(e){var t=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>n?e.maxY:n},n.prototype.addBoundsMask=function(e,t){var r,i,n,o=(e.minX>t.minX?e:t).minX,s=(e.minY>t.minY?e:t).minY,a=(e.maxX<t.maxX?e:t).maxX,e=(e.maxY<t.maxY?e:t).maxY;o<=a&&s<=e&&(t=this.minX,r=this.minY,i=this.maxX,n=this.maxY,this.minX=o<t?o:t,this.minY=s<r?s:r,this.maxX=i<a?a:i,this.maxY=n<e?e:n)},n.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},n.prototype.addBoundsArea=function(e,t){var r,i,n,o=e.minX>t.x?e.minX:t.x,s=e.minY>t.y?e.minY:t.y,a=e.maxX<t.x+t.width?e.maxX:t.x+t.width,e=e.maxY<t.y+t.height?e.maxY:t.y+t.height;o<=a&&s<=e&&(t=this.minX,r=this.minY,i=this.maxX,n=this.maxY,this.minX=o<t?o:t,this.minY=s<r?s:r,this.maxX=i<a?a:i,this.maxY=n<e?e:n)},n.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},n.prototype.addFramePad=function(e,t,r,i,n,o){t-=o,r+=n,i+=o,this.minX=this.minX<(e-=n)?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},n);function n(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function l(e,t){function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}l(c,h=s.EventEmitter),c.mixin=function(e){for(var t=Object.keys(e),r=0;r<t.length;++r){var i=t[r];Object.defineProperty(c.prototype,i,Object.getOwnPropertyDescriptor(e,i))}},Object.defineProperty(c.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),c.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},c.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},c.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new o.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},c.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._localBounds||(this._localBounds=new a);var t=this.transform,r=this.parent,i=(this.parent=null,this.transform=this._tempDisplayObjectParent.transform,this._bounds),n=this._boundsID,e=(this._bounds=this._localBounds,this.getBounds(!1,e));return this.parent=r,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-n,e},c.prototype.toGlobal=function(e,t,r){return(r=void 0===r?!1:r)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},c.prototype.toLocal=function(e,t,r,i){return t&&(e=t.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)},c.prototype.setParent=function(e){if(e&&e.addChild)return e.addChild(this),e;throw new Error("setParent: Argument must be a Container")},c.prototype.setTransform=function(e,t,r,i,n,o,s,a,u){return void 0===t&&(t=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),this.position.x=e=void 0===e?0:e,this.position.y=t,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},c.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(c.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new p),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),c.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},c.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(c.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"angle",{get:function(){return this.transform.rotation*o.RAD_TO_DEG},set:function(e){this.transform.rotation=e*o.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1}while(e=e.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"mask",{get:function(){return this._mask},set:function(e){var t;this._mask!==e&&(this._mask&&((t=this._mask.maskObject||this._mask)._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1)),this._mask=e,this._mask&&(0===(t=this._mask.maskObject||this._mask)._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++))},enumerable:!1,configurable:!0});var h,e=c;function c(){var e=h.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new o.Transform,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new a,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}l(_,f=e);var f,d,p=_;function _(){var e=null!==f&&f.apply(this,arguments)||this;return e.sortDirty=null,e}function m(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}e.prototype.displayObjectUpdateTransform=e.prototype.updateTransform,(v={NORMAL:0,0:"NORMAL",ADD:1,1:"ADD",MULTIPLY:2,2:"MULTIPLY",SCREEN:3,3:"SCREEN",OVERLAY:4,4:"OVERLAY",DARKEN:5,5:"DARKEN",LIGHTEN:6,6:"LIGHTEN",COLOR_DODGE:7,7:"COLOR_DODGE",COLOR_BURN:8,8:"COLOR_BURN",HARD_LIGHT:9,9:"HARD_LIGHT",SOFT_LIGHT:10,10:"SOFT_LIGHT",DIFFERENCE:11,11:"DIFFERENCE",EXCLUSION:12,12:"EXCLUSION",HUE:13,13:"HUE",SATURATION:14,14:"SATURATION",COLOR:15,15:"COLOR",LUMINOSITY:16,16:"LUMINOSITY",NORMAL_NPM:17,17:"NORMAL_NPM",ADD_NPM:18,18:"ADD_NPM",SCREEN_NPM:19,19:"SCREEN_NPM",NONE:20,20:"NONE",SRC_OVER:0})[0]="SRC_OVER",v[v.SRC_IN=21]="SRC_IN",v[v.SRC_OUT=22]="SRC_OUT",v[v.SRC_ATOP=23]="SRC_ATOP",v[v.DST_OVER=24]="DST_OVER",v[v.DST_IN=25]="DST_IN",v[v.DST_OUT=26]="DST_OUT",v[v.DST_ATOP=27]="DST_ATOP",v[v.ERASE=26]="ERASE",v[v.SUBTRACT=28]="SUBTRACT",v[v.XOR=29]="XOR",(v={NPM:0,0:"NPM",UNPACK:1,1:"UNPACK",PMA:2,2:"PMA",NO_PREMULTIPLIED_ALPHA:0})[0]="NO_PREMULTIPLIED_ALPHA",v[v.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",v[v.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",v[v.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(v={NO:0,0:"NO",YES:1,1:"YES",AUTO:2,2:"AUTO",BLEND:0})[0]="BLEND",v[v.CLEAR=1]="CLEAR",v[v.BLIT=2]="BLIT",(v=d=d||{})[v.NONE=0]="NONE",v[v.SCISSOR=1]="SCISSOR",v[v.STENCIL=2]="STENCIL",v[v.SPRITE=3]="SPRITE";l(g,y=e),g.prototype.onChildrenChange=function(e){},g.prototype.addChild=function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];if(1<t.length)for(var i=0;i<t.length;i++)this.addChild(t[i]);else{var n=t[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return t[0]},g.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),(e.parent=this).sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},g.prototype.swapChildren=function(e,t){var r,i;e!==t&&(r=this.getChildIndex(e),i=this.getChildIndex(t),this.children[r]=t,this.children[i]=e,this.onChildrenChange(r<i?r:i))},g.prototype.getChildIndex=function(e){e=this.children.indexOf(e);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},g.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(e);s.removeItems(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},g.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},g.prototype.removeChild=function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];if(1<t.length)for(var i=0;i<t.length;i++)this.removeChild(t[i]);else{var n=t[0],o=this.children.indexOf(n);if(-1===o)return null;n.parent=null,n.transform._parentID=-1,s.removeItems(this.children,o,1),this._boundsID++,this.onChildrenChange(o),n.emit("removed",this),this.emit("childRemoved",n,this,o)}return t[0]},g.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,s.removeItems(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},g.prototype.removeChildren=function(e,t){var r=e=void 0===e?0:e,i=(t=void 0===t?this.children.length:t)-r;if(0<i&&i<=t){for(var n=this.children.splice(r,i),o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0==i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},g.prototype.sortChildren=function(){for(var e=!1,t=0,r=this.children.length;t<r;++t){var i=this.children[t];i._lastSortedIndex=t,e||0===i.zIndex||(e=!0)}e&&1<this.children.length&&this.children.sort(m),this.sortDirty=!1},g.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];r.visible&&r.updateTransform()}},g.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t,r=this.children[e];r.visible&&r.renderable&&(r.calculateBounds(),r._mask?((t=r._mask.maskObject||r._mask).calculateBounds(),this._bounds.addBoundsMask(r._bounds,t._bounds)):r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds))}this._bounds.updateID=this._boundsID},g.prototype.getLocalBounds=function(e,t){void 0===t&&(t=!1);e=y.prototype.getLocalBounds.call(this,e);if(!t)for(var r=0,i=this.children.length;r<i;++r){var n=this.children[r];n.visible&&n.updateTransform()}return e},g.prototype._calculateBounds=function(){},g.prototype._renderWithCulling=function(e){var t,r,i=e.renderTexture.sourceFrame;if(0<i.width&&0<i.height){if(this.cullArea?(t=this.cullArea,r=this.worldTransform):this._render!==g.prototype._render&&(t=this.getBounds(!0)),t&&i.intersects(t,r))this._render(e);else if(this.cullArea)return;for(var n=0,o=this.children.length;n<o;++n){var s=this.children[n],a=s.cullable;s.cullable=a||!this.cullArea,s.render(e),s.cullable=a}}},g.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}},g.prototype.renderAdvanced=function(e){var t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<t.length;i++)t[i].enabled&&this._enabledFilters.push(t[i])}var n=t&&this._enabledFilters&&this._enabledFilters.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==d.NONE));if(n&&e.batch.flush(),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(var i=0,o=this.children.length;i<o;++i)this.children[i].render(e)}n&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},g.prototype._render=function(e){},g.prototype.destroy=function(e){y.prototype.destroy.call(this),this.sortDirty=!1;var t="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(t)for(var i=0;i<r.length;++i)r[i].destroy(e)},Object.defineProperty(g.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e},enumerable:!1,configurable:!0});var y,v=g;function g(){var e=y.call(this)||this;return e.children=[],e.sortableChildren=i.settings.SORTABLE_CHILDREN,e.sortDirty=!1,e}v.prototype.containerUpdateTransform=v.prototype.updateTransform,r.Bounds=a,r.Container=v,r.DisplayObject=e,r.TemporaryDisplayObject=p},{"@pixi/math":67,"@pixi/settings":77,"@pixi/utils":85}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var h=e("@pixi/utils"),i=e("@pixi/math"),c=e("@pixi/core"),f=new i.Rectangle;function d(e){this.renderer=e}d.prototype.image=function(e,t,r){var i=new Image;return i.src=this.base64(e,t,r),i},d.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},d.prototype.canvas=function(e){var t,r,i=this.renderer,n=!1,o=!1,e=(e&&(e instanceof c.RenderTexture?t=e:(t=this.renderer.generateTexture(e),o=!0)),t?(r=t.baseTexture.resolution,l=t.frame,n=!1,i.renderTexture.bind(t)):(r=this.renderer.resolution,n=!0,(l=f).width=this.renderer.width,l.height=this.renderer.height,i.renderTexture.bind(null)),Math.floor(l.width*r+1e-4)),s=Math.floor(l.height*r+1e-4),a=new h.CanvasRenderTarget(e,s,1),u=new Uint8Array(4*e*s),i=i.gl,l=(i.readPixels(l.x*r,l.y*r,e,s,i.RGBA,i.UNSIGNED_BYTE,u),a.context.getImageData(0,0,e,s));return d.arrayPostDivide(u,l.data),a.context.putImageData(l,0,0),n&&((r=new h.CanvasRenderTarget(a.width,a.height,1)).context.scale(1,-1),r.context.drawImage(a.canvas,0,-s),a.destroy(),a=r),o&&t.destroy(!0),a.canvas},d.prototype.pixels=function(e){var t,r,i,n=this.renderer,o=!1,e=(e&&(e instanceof c.RenderTexture?i=e:(i=this.renderer.generateTexture(e),o=!0)),i?(t=i.baseTexture.resolution,r=i.frame,n.renderTexture.bind(i)):(t=n.resolution,(r=f).width=n.width,r.height=n.height,n.renderTexture.bind(null)),r.width*t),s=r.height*t,a=new Uint8Array(4*e*s),n=n.gl;return n.readPixels(r.x*t,r.y*t,e,s,n.RGBA,n.UNSIGNED_BYTE,a),o&&i.destroy(!0),d.arrayPostDivide(a,a),a},d.prototype.destroy=function(){this.renderer=null},d.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var i=t[r+3]=e[r+3];0!==i?(t[r]=Math.round(Math.min(255*e[r]/i,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/i,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/i,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},r.Extract=d},{"@pixi/core":22,"@pixi/math":67,"@pixi/utils":85}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),a.prototype.apply=function(e,t,r,i){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,e.applyFilter(this,t,r,i)};var n,o,e=a;function s(){this.constructor=o}function a(e){var t=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float gamma;\nuniform float contrast;\nuniform float saturation;\nuniform float brightness;\nuniform float red;\nuniform float green;\nuniform float blue;\nuniform float alpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (c.a > 0.0) {\n        c.rgb /= c.a;\n\n        vec3 rgb = pow(c.rgb, vec3(1. / gamma));\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);\n        rgb.r *= red;\n        rgb.g *= green;\n        rgb.b *= blue;\n        c.rgb = rgb * brightness;\n\n        c.rgb *= c.a;\n    }\n\n    gl_FragColor = c * alpha;\n}\n")||this;return t.gamma=1,t.saturation=1,t.contrast=1,t.brightness=1,t.red=1,t.green=1,t.blue=1,t.alpha=1,Object.assign(t,e),t}r.AdjustmentFilter=e},{"@pixi/core":22}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),a=e("@pixi/filter-kawase-blur"),u=e("@pixi/settings"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s,l="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",h=(o(c,s=i.Filter),Object.defineProperty(c.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(e){this.uniforms.threshold=e},enumerable:!1,configurable:!0}),c);function c(e){void 0===e&&(e=.5);var t=s.call(this,l,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n")||this;return t.threshold=e,t}o(d,f=i.Filter),d.prototype.apply=function(e,t,r,i,n){var o=e.getFilterTexture(),n=(this._extractFilter.apply(e,t,o,1,n),e.getFilterTexture());this._blurFilter.apply(e,o,n,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=n,e.applyFilter(this,t,r,i),e.returnFilterTexture(n),e.returnFilterTexture(o)},Object.defineProperty(d.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e,this._extractFilter&&(this._extractFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(e){this._extractFilter.threshold=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(e){this._blurFilter.kernels=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(e){this._blurFilter.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(e){this._blurFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(e){this._blurFilter.pixelSize=e},enumerable:!1,configurable:!0}),d.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:u.settings.FILTER_RESOLUTION};var f,e=d;function d(e){var t=f.call(this,l,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n")||this,e=(t.bloomScale=1,t.brightness=1,t._resolution=u.settings.FILTER_RESOLUTION,"number"==typeof e&&(e={threshold:e}),Object.assign(d.defaults,e)),r=(t.bloomScale=e.bloomScale,t.brightness=e.brightness,e.kernels),i=e.blur,n=e.quality,o=e.pixelSize,s=e.resolution;return t._extractFilter=new h(e.threshold),t._extractFilter.resolution=s,t._blurFilter=r?new a.KawaseBlurFilter(r):new a.KawaseBlurFilter(i,n),t.pixelSize=o,t.resolution=s,t}r.AdvancedBloomFilter=e},{"@pixi/core":22,"@pixi/filter-kawase-blur":48,"@pixi/settings":77}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};o=i.Filter,n(s=u,e=o),s.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a),Object.defineProperty(u.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0});var o,s,e=u;function a(){this.constructor=s}function u(e){void 0===e&&(e=1);var t=o.call(this,i.defaultVertex,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return t.alpha=e,t}r.AlphaFilter=e},{"@pixi/core":22}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),Object.defineProperty(a.prototype,"size",{get:function(){return this.uniforms.pixelSize},set:function(e){this.uniforms.pixelSize=e},enumerable:!1,configurable:!0});var n,o,e=a;function s(){this.constructor=o}function a(e){void 0===e&&(e=8);var t=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n    return floor( coord / size ) * size;\n}\n\nvec2 getMod(vec2 coord, vec2 size)\n{\n    return mod( coord , size) / size;\n}\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n\n    if (clamp(p.x, 0.0, 4.0) == p.x)\n    {\n        if (clamp(p.y, 0.0, 4.0) == p.y)\n        {\n            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n        }\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    // get the rounded color..\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\n    pixCoord = unmapCoord(pixCoord);\n\n    vec4 color = texture2D(uSampler, pixCoord);\n\n    // determine the character to use\n    float gray = (color.r + color.g + color.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    // get the mod..\n    vec2 modd = getMod(coord, vec2(pixelSize));\n\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\n\n}\n")||this;return t.size=e,t}r.AsciiFilter=e},{"@pixi/core":22}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/math"),o=e("@pixi/utils"),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};a=i.Filter,s(u=h,e=a),u.prototype=null===e?Object.create(e):(l.prototype=e.prototype,new l),h.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},Object.defineProperty(h.prototype,"rotation",{get:function(){return this._angle/n.DEG_TO_RAD},set:function(e){this._angle=e*n.DEG_TO_RAD,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"thickness",{get:function(){return this._thickness},set:function(e){this._thickness=e,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"lightColor",{get:function(){return o.rgb2hex(this.uniforms.lightColor)},set:function(e){o.hex2rgb(e,this.uniforms.lightColor)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"lightAlpha",{get:function(){return this.uniforms.lightAlpha},set:function(e){this.uniforms.lightAlpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"shadowColor",{get:function(){return o.rgb2hex(this.uniforms.shadowColor)},set:function(e){o.hex2rgb(e,this.uniforms.shadowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"shadowAlpha",{get:function(){return this.uniforms.shadowAlpha},set:function(e){this.uniforms.shadowAlpha=e},enumerable:!1,configurable:!0});var a,u,i=h;function l(){this.constructor=u}function h(e){var t=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float transformX;\nuniform float transformY;\nuniform vec3 lightColor;\nuniform float lightAlpha;\nuniform vec3 shadowColor;\nuniform float shadowAlpha;\n\nvoid main(void) {\n    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float light = texture2D(uSampler, vTextureCoord - transform).a;\n    float shadow = texture2D(uSampler, vTextureCoord + transform).a;\n\n    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));\n    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));\n    gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n")||this;return t._thickness=2,t._angle=0,t.uniforms.lightColor=new Float32Array(3),t.uniforms.shadowColor=new Float32Array(3),Object.assign(t,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},e),t.padding=1,t}r.BevelFilter=i},{"@pixi/core":22,"@pixi/math":67,"@pixi/utils":85}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),a=e("@pixi/constants"),u=e("@pixi/filter-alpha"),l=e("@pixi/filter-blur"),h=e("@pixi/settings"),c=e("@pixi/math"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};f=i.Filter,n(o=d,e=f),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),d.prototype.apply=function(e,t,r,i){var n=e.getFilterTexture();this.defaultFilter.apply(e,t,r,i),this.blurXFilter.apply(e,t,n,1),this.blurYFilter.apply(e,n,r,0),e.returnFilterTexture(n)},Object.defineProperty(d.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e},enumerable:!1,configurable:!0});var f,o,i=d;function s(){this.constructor=o}function d(e,t,r,i){void 0===e&&(e=2),void 0===t&&(t=4),void 0===r&&(r=h.settings.FILTER_RESOLUTION),void 0===i&&(i=5);var n,o,s=f.call(this)||this;return"number"==typeof e?o=n=e:e instanceof c.Point?(n=e.x,o=e.y):Array.isArray(e)&&(n=e[0],o=e[1]),s.blurXFilter=new l.BlurFilterPass(!0,n,t,r,i),s.blurYFilter=new l.BlurFilterPass(!1,o,t,r,i),s.blurYFilter.blendMode=a.BLEND_MODES.SCREEN,s.defaultFilter=new u.AlphaFilter,s}r.BloomFilter=i},{"@pixi/constants":21,"@pixi/core":22,"@pixi/filter-alpha":27,"@pixi/filter-blur":31,"@pixi/math":67,"@pixi/settings":77}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),a=e("@pixi/settings"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var u="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";var h,l={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},c=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");(e={NORMAL:0,0:"NORMAL",ADD:1,1:"ADD",MULTIPLY:2,2:"MULTIPLY",SCREEN:3,3:"SCREEN",OVERLAY:4,4:"OVERLAY",DARKEN:5,5:"DARKEN",LIGHTEN:6,6:"LIGHTEN",COLOR_DODGE:7,7:"COLOR_DODGE",COLOR_BURN:8,8:"COLOR_BURN",HARD_LIGHT:9,9:"HARD_LIGHT",SOFT_LIGHT:10,10:"SOFT_LIGHT",DIFFERENCE:11,11:"DIFFERENCE",EXCLUSION:12,12:"EXCLUSION",HUE:13,13:"HUE",SATURATION:14,14:"SATURATION",COLOR:15,15:"COLOR",LUMINOSITY:16,16:"LUMINOSITY",NORMAL_NPM:17,17:"NORMAL_NPM",ADD_NPM:18,18:"ADD_NPM",SCREEN_NPM:19,19:"SCREEN_NPM",NONE:20,20:"NONE",SRC_OVER:0})[0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",(e={NPM:0,0:"NPM",UNPACK:1,1:"UNPACK",PMA:2,2:"PMA",NO_PREMULTIPLIED_ALPHA:0})[0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(e=h=h||{})[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT";o(d,f=i.Filter),d.prototype.apply=function(e,t,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,i);else{var n=e.getFilterTexture(),o=e.renderer,s=t,a=n;this.state.blend=!1,e.applyFilter(this,s,a,h.CLEAR);for(var u=1;u<this.passes-1;u++){e.bindAndClear(s,h.BLIT);var l=this.uniforms.uSampler=a,a=s,s=l;o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,a,r,i),e.returnFilterTexture(n)}},Object.defineProperty(d.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+2*Math.abs(e),this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0});var f,s=d;function d(e,t,r,i,n){void 0===t&&(t=8),void 0===r&&(r=4),void 0===i&&(i=a.settings.FILTER_RESOLUTION);var o=this,s=function(e,t){for(var r=Math.ceil(e/2),i=u,n="",o=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);",s=0;s<e;s++)n=n+o.replace("%index%",s.toString()).replace("%sampleIndex%",s-(r-1)+".0")+"\n";return i=(i=i.replace("%blur%",n)).replace("%size%",e.toString())}(n=void 0===n?5:n,e),n=function(e){for(var t=l[e],r=t.length,i=c,n="",o=0;o<e;o++)var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString()),a=o,n=n+(s=s.replace("%value%",t[a=r<=o?e-o-1:a].toString()))+"\n";return i=(i=i.replace("%blur%",n)).replace("%size%",e.toString())}(n);return(o=f.call(this,s,n)||this).horizontal=e,o.resolution=i,o._quality=0,o.quality=r,o.blur=t,o}o(_,p=i.Filter),_.prototype.apply=function(e,t,r,i){var n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);n&&o?(n=e.getFilterTexture(),this.blurXFilter.apply(e,t,n,h.CLEAR),this.blurYFilter.apply(e,n,r,i),e.returnFilterTexture(n)):(o?this.blurYFilter:this.blurXFilter).apply(e,t,r,i)},_.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(_.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0});var p,e=_;function _(e,t,r,i){void 0===e&&(e=8),void 0===t&&(t=4),void 0===r&&(r=a.settings.FILTER_RESOLUTION),void 0===i&&(i=5);var n=p.call(this)||this;return n.blurXFilter=new s(!0,e,t,r,i),n.blurYFilter=new s(!1,e,t,r,i),n.resolution=r,n.quality=t,n.blur=e,n.repeatEdgePixels=!1,n}r.BlurFilter=e,r.BlurFilterPass=s},{"@pixi/core":22,"@pixi/settings":77}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),a.prototype.apply=function(e,t,r,i){var n=t.filterFrame,o=n.width,n=n.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=n,e.applyFilter(this,t,r,i)},Object.defineProperty(a.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(e){this.uniforms.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"center",{get:function(){return this.uniforms.center},set:function(e){this.uniforms.center=e},enumerable:!1,configurable:!0}),a.defaults={center:[.5,.5],radius:100,strength:1};var n,o,e=a;function s(){this.constructor=o}function a(e){var t=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n")||this;return t.uniforms.dimensions=new Float32Array(2),Object.assign(t,a.defaults,e),t}r.BulgePinchFilter=e},{"@pixi/core":22}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/constants"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};s=i.Filter,o(a=l,e=s),a.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),l.prototype.apply=function(e,t,r,i){this.uniforms._mix=this.mix,e.applyFilter(this,t,r,i)},Object.defineProperty(l.prototype,"colorSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"colorMap",{get:function(){return this._colorMap},set:function(e){var t;e&&(null!=(t=e=e instanceof i.Texture?e:i.Texture.from(e))&&t.baseTexture&&(e.baseTexture.scaleMode=this._scaleMode,e.baseTexture.mipmap=n.MIPMAP_MODES.OFF,this._size=e.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=e),this._colorMap=e)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"nearest",{get:function(){return this._nearest},set:function(e){this._nearest=e,this._scaleMode=e?n.SCALE_MODES.NEAREST:n.SCALE_MODES.LINEAR;e=this._colorMap;e&&e.baseTexture&&(e.baseTexture._glTextures={},e.baseTexture.scaleMode=this._scaleMode,e.baseTexture.mipmap=n.MIPMAP_MODES.OFF,e._updateID++,e.baseTexture.emit("update",e.baseTexture))},enumerable:!1,configurable:!0}),l.prototype.updateColorMap=function(){var e=this._colorMap;e&&e.baseTexture&&(e._updateID++,e.baseTexture.emit("update",e.baseTexture),this.colorMap=e)},l.prototype.destroy=function(e){void 0===e&&(e=!1),this._colorMap&&this._colorMap.destroy(e),s.prototype.destroy.call(this)};var s,a,e=l;function u(){this.constructor=a}function l(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=1);var i=s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D colorMap;\nuniform float _mix;\nuniform float _size;\nuniform float _sliceSize;\nuniform float _slicePixelSize;\nuniform float _sliceInnerSize;\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord.xy);\n\n    vec4 adjusted;\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n        float innerWidth = _size - 1.0;\n        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);\n        float zSlice1 = min(zSlice0 + 1.0, innerWidth);\n        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;\n        float s0 = xOffset + (zSlice0 * _sliceSize);\n        float s1 = xOffset + (zSlice1 * _sliceSize);\n        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);\n        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));\n        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));\n        float zOffset = fract(color.b * innerWidth);\n        adjusted = mix(slice0Color, slice1Color, zOffset);\n\n        color.rgb *= color.a;\n    }\n    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);\n\n}")||this;return i.mix=1,i._size=0,i._sliceSize=0,i._slicePixelSize=0,i._sliceInnerSize=0,i._nearest=!1,i._scaleMode=null,i._colorMap=null,i._scaleMode=null,i.nearest=t,i.mix=r,i.colorMap=e,i}r.ColorMapFilter=e},{"@pixi/constants":21,"@pixi/core":22}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};o=i.Filter,n(s=u,e=o),s.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a),u.prototype._loadMatrix=function(e,t){var r=e;(t=void 0===t?!1:t)&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r},u.prototype._multiply=function(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e},u.prototype._colorMatrix=function(e){e=new Float32Array(e);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},u.prototype.brightness=function(e,t){this._loadMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],t)},u.prototype.tint=function(e,t){this._loadMatrix([(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0],t)},u.prototype.greyscale=function(e,t){this._loadMatrix([e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],t)},u.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},u.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var r=Math.cos(e),e=Math.sin(e),i=1/3,n=(0,Math.sqrt)(i);this._loadMatrix([r+(1-r)*i,i*(1-r)-n*e,i*(1-r)+n*e,0,0,i*(1-r)+n*e,r+i*(1-r),i*(1-r)-n*e,0,0,i*(1-r)-n*e,i*(1-r)+n*e,r+i*(1-r),0,0,0,0,0,1,0],t)},u.prototype.contrast=function(e,t){var e=(e||0)+1,r=-.5*(e-1);this._loadMatrix([e,0,0,0,r,0,e,0,0,r,0,0,e,0,r,0,0,0,1,0],t)},u.prototype.saturate=function(e,t){var e=2*(e=void 0===e?0:e)/3+1,r=-.5*(e-1);this._loadMatrix([e,r,r,0,0,r,e,r,0,0,r,r,e,0,0,0,0,0,1,0],t)},u.prototype.desaturate=function(){this.saturate(-1)},u.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},u.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},u.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},u.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},u.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},u.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},u.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},u.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},u.prototype.colorTone=function(e,t,r,i,n){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,r=(255&r)/255,a=((i=i||3375104)>>16&255)/255,u=(i>>8&255)/255,i=(255&i)/255;this._loadMatrix([.3,.59,.11,0,0,o,s,r,e=e||.2,0,a,u,i,t=t||.15,0,o-a,s-u,r-i,0,0],n)},u.prototype.night=function(e,t){this._loadMatrix([-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],t)},u.prototype.predator=function(e,t){this._loadMatrix([11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0],t)},u.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},u.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(u.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0});var o,s,e=u;function a(){this.constructor=s}function u(){var e=this,t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=o.call(this,i.defaultFilterVertex,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",t)||this).alpha=1,e}e.prototype.grayscale=e.prototype.greyscale,r.ColorMatrixFilter=e},{"@pixi/core":22}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/utils"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};s=i.Filter,o(a=l,e=s),a.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),Object.defineProperty(l.prototype,"color",{get:function(){return this._color},set:function(e){var t=this.uniforms.color;"number"==typeof e?(n.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._color=n.rgb2hex(t))},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this.uniforms.alpha=e,this._alpha=e},enumerable:!1,configurable:!0});var s,a,i=l;function u(){this.constructor=a}function l(e,t){void 0===e&&(e=0),void 0===t&&(t=1);var r=s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 color;\nuniform float alpha;\n\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = vec4(mix(currentColor.rgb, color.rgb, currentColor.a * alpha), currentColor.a);\n}\n")||this;return r._color=0,r._alpha=1,r.uniforms.color=new Float32Array(3),r.color=e,r.alpha=t,r}r.ColorOverlayFilter=i},{"@pixi/core":22,"@pixi/utils":85}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/utils"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};s=i.Filter,o(a=l,e=s),a.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),Object.defineProperty(l.prototype,"originalColor",{get:function(){return this._originalColor},set:function(e){var t=this.uniforms.originalColor;"number"==typeof e?(n.hex2rgb(e,t),this._originalColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._originalColor=n.rgb2hex(t))},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"newColor",{get:function(){return this._newColor},set:function(e){var t=this.uniforms.newColor;"number"==typeof e?(n.hex2rgb(e,t),this._newColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._newColor=n.rgb2hex(t))},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(e){this.uniforms.epsilon=e},enumerable:!1,configurable:!0});var s,a,i=l;function u(){this.constructor=a}function l(e,t,r){void 0===e&&(e=16711680),void 0===t&&(t=0),void 0===r&&(r=.4);var i=s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 originalColor;\nuniform vec3 newColor;\nuniform float epsilon;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    float doReplace = step(colorDistance, epsilon);\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\n}\n")||this;return i._originalColor=16711680,i._newColor=0,i.uniforms.originalColor=new Float32Array(3),i.uniforms.newColor=new Float32Array(3),i.originalColor=e,i.newColor=t,i.epsilon=r,i}r.ColorReplaceFilter=i},{"@pixi/core":22,"@pixi/utils":85}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),Object.defineProperty(a.prototype,"matrix",{get:function(){return this.uniforms.matrix},set:function(e){var r=this;e.forEach(function(e,t){r.uniforms.matrix[t]=e})},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return 1/this.uniforms.texelSize[0]},set:function(e){this.uniforms.texelSize[0]=1/e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return 1/this.uniforms.texelSize[1]},set:function(e){this.uniforms.texelSize[1]=1/e},enumerable:!1,configurable:!0});var n,o,e=a;function s(){this.constructor=o}function a(e,t,r){void 0===t&&(t=200),void 0===r&&(r=200);var i=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n")||this;return i.uniforms.texelSize=new Float32Array(2),i.uniforms.matrix=new Float32Array(9),void 0!==e&&(i.matrix=e),i.width=t,i.height=r,i}r.ConvolutionFilter=e},{"@pixi/core":22}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s);var n,o,e=a;function s(){this.constructor=o}function a(){return n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")||this}r.CrossHatchFilter=e},{"@pixi/core":22}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),a.prototype.apply=function(e,t,r,i){var n=t.filterFrame,o=n.width,n=n.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=n,this.uniforms.seed=this.seed,this.uniforms.time=this.time,e.applyFilter(this,t,r,i)},Object.defineProperty(a.prototype,"curvature",{get:function(){return this.uniforms.curvature},set:function(e){this.uniforms.curvature=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lineWidth",{get:function(){return this.uniforms.lineWidth},set:function(e){this.uniforms.lineWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lineContrast",{get:function(){return this.uniforms.lineContrast},set:function(e){this.uniforms.lineContrast=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"verticalLine",{get:function(){return this.uniforms.verticalLine},set:function(e){this.uniforms.verticalLine=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(e){this.uniforms.noise=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(e){this.uniforms.noiseSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(e){this.uniforms.vignetting=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(e){this.uniforms.vignettingAlpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(e){this.uniforms.vignettingBlur=e},enumerable:!1,configurable:!0}),a.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0};var n,o,e=a;function s(){this.constructor=o}function a(e){var t=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));\n    \n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0)\n    {\n        float _c = curvature > 0. ? curvature : 1.;\n        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n        vec2 uv = dir * k;\n\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n")||this;return t.time=0,t.seed=0,t.uniforms.dimensions=new Float32Array(2),Object.assign(t,a.defaults,e),t}r.CRTFilter=e},{"@pixi/core":22}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/math"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};s=i.Filter,o(a=l,e=s),a.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),l.prototype.apply=function(e,t,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),s=Math.sqrt(n.c*n.c+n.d*n.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/s,this.uniforms.rotation[3]=n.d/s),e.applyFilter(this,t,r,i)},Object.defineProperty(l.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0});var s,a,i=l;function u(){this.constructor=a}function l(e,t){var r=this,i=new n.Matrix;return e.renderable=!1,(r=s.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=i,r.scale=new n.Point(t=null==t?20:t,t),r}r.DisplacementFilter=i},{"@pixi/core":22,"@pixi/math":67}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),Object.defineProperty(a.prototype,"scale",{get:function(){return this.uniforms.scale},set:function(e){this.uniforms.scale=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(e){this.uniforms.angle=e},enumerable:!1,configurable:!0});var n,o,e=a;function s(){this.constructor=o}function a(e,t){void 0===e&&(e=1),void 0===t&&(t=5);var r=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n")||this;return r.scale=e,r.angle=t,r}r.DotFilter=e},{"@pixi/core":22}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("@pixi/filter-kawase-blur"),u=e("@pixi/core"),l=e("@pixi/settings"),h=e("@pixi/math"),i=e("@pixi/utils"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var c,o,f=function(){return(f=Object.assign||function(e){for(var t,r=arguments,i=1,n=arguments.length;i<n;i++)for(var o in t=r[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},e=(c=u.Filter,n(o=d,e=c),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),d.prototype.apply=function(e,t,r,i){var n=e.getFilterTexture();this._tintFilter.apply(e,t,n,1),this._blurFilter.apply(e,n,r,i),!0!==this.shadowOnly&&e.applyFilter(this,t,r,0),e.returnFilterTexture(n)},d.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},d.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},Object.defineProperty(d.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e,this._tintFilter&&(this._tintFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"distance",{get:function(){return this._distance},set:function(e){this._distance=e,this._updatePadding(),this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"rotation",{get:function(){return this.angle/h.DEG_TO_RAD},set:function(e){this.angle=e*h.DEG_TO_RAD,this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"alpha",{get:function(){return this._tintFilter.uniforms.alpha},set:function(e){this._tintFilter.uniforms.alpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"color",{get:function(){return i.rgb2hex(this._tintFilter.uniforms.color)},set:function(e){i.hex2rgb(e,this._tintFilter.uniforms.color)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(e){this._blurFilter.kernels=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(e){this._blurFilter.blur=e,this._updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(e){this._blurFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(e){this._blurFilter.pixelSize=e},enumerable:!1,configurable:!0}),d.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:l.settings.FILTER_RESOLUTION},d);function s(){this.constructor=o}function d(e){var t=c.call(this)||this,e=(t.angle=45,t._distance=5,t._resolution=l.settings.FILTER_RESOLUTION,e?f(f({},d.defaults),e):d.defaults),r=e.kernels,i=e.blur,n=e.quality,o=e.pixelSize,s=e.resolution,r=(t._tintFilter=new u.Filter("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),t._tintFilter.uniforms.color=new Float32Array(4),t._tintFilter.uniforms.shift=new h.Point,t._tintFilter.resolution=s,t._blurFilter=r?new a.KawaseBlurFilter(r):new a.KawaseBlurFilter(i,n),t.pixelSize=o,t.resolution=s,e.shadowOnly),i=e.rotation,n=e.distance,o=e.alpha,s=e.color;return t.shadowOnly=r,t.rotation=i,t.distance=n,t.alpha=o,t.color=s,t._updatePadding(),t}r.DropShadowFilter=e},{"@pixi/core":22,"@pixi/filter-kawase-blur":48,"@pixi/math":67,"@pixi/settings":77,"@pixi/utils":85}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),Object.defineProperty(a.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(e){this.uniforms.strength=e},enumerable:!1,configurable:!0});var n,o,e=a;function s(){this.constructor=o}function a(e){void 0===e&&(e=5);var t=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float strength;\nuniform vec4 filterArea;\n\n\nvoid main(void)\n{\n\tvec2 onePixel = vec2(1.0 / filterArea);\n\n\tvec4 color;\n\n\tcolor.rgb = vec3(0.5);\n\n\tcolor -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\n\tcolor += texture2D(uSampler, vTextureCoord + onePixel) * strength;\n\n\tcolor.rgb = vec3((color.r + color.g + color.b) / 3.0);\n\n\tfloat alpha = texture2D(uSampler, vTextureCoord).a;\n\n\tgl_FragColor = vec4(color.rgb * alpha, alpha);\n}\n")||this;return t.strength=e,t}r.EmbossFilter=e},{"@pixi/core":22}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s);var n,o,e=a;function s(){this.constructor=o}function a(){return n.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}r.FXAAFilter=e},{"@pixi/core":22}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/constants"),o=e("@pixi/math"),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};a=i.Filter,s(u=h,e=a),u.prototype=null===e?Object.create(e):(l.prototype=e.prototype,new l),h.prototype.apply=function(e,t,r,i){var n=t.filterFrame,o=n.width,n=n.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=n,this.uniforms.aspect=n/o,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,e.applyFilter(this,t,r,i)},h.prototype._randomizeSizes=function(){var e=this._sizes,t=this._slices-1,r=this.sampleSize,i=Math.min(this.minSize/r,.9/this._slices);if(this.average){for(var n=this._slices,o=1,s=0;s<t;s++){var a=Math.max(o/(n-s)*(1-.6*Math.random()),i);o-=e[s]=a}e[t]=o}else{for(var o=1,u=Math.sqrt(1/this._slices),s=0;s<t;s++){a=Math.max(u*o*Math.random(),i);o-=e[s]=a}e[t]=o}this.shuffle()},h.prototype.shuffle=function(){for(var e=this._sizes,t=this._slices-1;0<t;t--){var r=Math.random()*t>>0,i=e[t];e[t]=e[r],e[r]=i}},h.prototype._randomizeOffsets=function(){for(var e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)},h.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},h.prototype.redraw=function(){for(var e=this.sampleSize,t=this.texture,r=this._canvas.getContext("2d"),i=(r.clearRect(0,0,8,e),0),n=0;n<this._slices;n++){var o=Math.floor(256*this._offsets[n]),s=this._sizes[n]*e;r.fillStyle="rgba("+(0<o?o:0)+", "+(o<0?-o:0)+", 0, 1)",r.fillRect(0,i>>0,e,1+s>>0),i+=s}t.baseTexture.update(),this.uniforms.displacementMap=t},Object.defineProperty(h.prototype,"sizes",{get:function(){return this._sizes},set:function(e){for(var t=Math.min(this._slices,e.length),r=0;r<t;r++)this._sizes[r]=e[r]},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"offsets",{get:function(){return this._offsets},set:function(e){for(var t=Math.min(this._slices,e.length),r=0;r<t;r++)this._offsets[r]=e[r]},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"slices",{get:function(){return this._slices},set:function(e){this._slices!==e&&(this._slices=e,this.uniforms.slices=e,this._sizes=this.uniforms.slicesWidth=new Float32Array(e),this._offsets=this.uniforms.slicesOffset=new Float32Array(e),this.refresh())},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction!==e&&(e=(this._direction=e)*o.DEG_TO_RAD,this.uniforms.sinDir=Math.sin(e),this.uniforms.cosDir=Math.cos(e))},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"red",{get:function(){return this.uniforms.red},set:function(e){this.uniforms.red=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"green",{get:function(){return this.uniforms.green},set:function(e){this.uniforms.green=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(e){this.uniforms.blue=e},enumerable:!1,configurable:!0}),h.prototype.destroy=function(){var e;null!=(e=this.texture)&&e.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null},h.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},h.TRANSPARENT=0,h.ORIGINAL=1,h.LOOP=2,h.CLAMP=3,h.MIRROR=4;var a,u,e=h;function l(){this.constructor=u}function h(e){var t=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n")||this;return t.offset=100,t.fillMode=h.TRANSPARENT,t.average=!1,t.seed=0,t.minSize=8,t.sampleSize=512,t._slices=0,t._offsets=new Float32Array(1),t._sizes=new Float32Array(1),t._direction=-1,t.uniforms.dimensions=new Float32Array(2),t._canvas=document.createElement("canvas"),t._canvas.width=4,t._canvas.height=t.sampleSize,t.texture=i.Texture.from(t._canvas,{scaleMode:n.SCALE_MODES.NEAREST}),Object.assign(t,h.defaults,e),t}r.GlitchFilter=e},{"@pixi/constants":21,"@pixi/core":22,"@pixi/math":67}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/utils"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};a=i.Filter,o(s=l,e=a),s.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),Object.defineProperty(l.prototype,"color",{get:function(){return n.rgb2hex(this.uniforms.glowColor)},set:function(e){n.hex2rgb(e,this.uniforms.glowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"outerStrength",{get:function(){return this.uniforms.outerStrength},set:function(e){this.uniforms.outerStrength=e},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"innerStrength",{get:function(){return this.uniforms.innerStrength},set:function(e){this.uniforms.innerStrength=e},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"knockout",{get:function(){return this.uniforms.knockout},set:function(e){this.uniforms.knockout=e},enumerable:!1,configurable:!0}),l.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1};var a,s,i=l;function u(){this.constructor=s}function l(e){var t=this,e=Object.assign({},l.defaults,e),r=e.outerStrength,i=e.innerStrength,n=e.color,o=e.knockout,s=e.quality,e=Math.round(e.distance);return(t=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    \n    if (knockout) {\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,""+(1/s/e).toFixed(7)).replace(/__DIST__/gi,e.toFixed(0)+".0"))||this).uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(t,{color:n,outerStrength:r,innerStrength:i,padding:e,knockout:o}),t}r.GlowFilter=i},{"@pixi/core":22,"@pixi/utils":85}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/math"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};s=i.Filter,o(a=l,e=s),a.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),l.prototype.apply=function(e,t,r,i){var n=t.filterFrame,o=n.width,n=n.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=n,this.uniforms.aspect=n/o,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,e.applyFilter(this,t,r,i)},Object.defineProperty(l.prototype,"angle",{get:function(){return this._angle},set:function(e){e=(this._angle=e)*n.DEG_TO_RAD;this._angleLight.x=Math.cos(e),this._angleLight.y=Math.sin(e)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"gain",{get:function(){return this.uniforms.gain},set:function(e){this.uniforms.gain=e},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"lacunarity",{get:function(){return this.uniforms.lacunarity},set:function(e){this.uniforms.lacunarity=e},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha=e},enumerable:!1,configurable:!0}),l.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1};var s,a,i=l;function u(){this.constructor=a}function l(e){var t=s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\nuniform float alpha;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n    // apply user alpha\n    mist *= alpha;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n\n}\n".replace("${perlin}","vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n"))||this,e=(t.parallel=!0,t.time=0,t._angle=0,t.uniforms.dimensions=new Float32Array(2),Object.assign(l.defaults,e));return t._angleLight=new n.Point,t.angle=e.angle,t.gain=e.gain,t.lacunarity=e.lacunarity,t.alpha=e.alpha,t.parallel=e.parallel,t.center=e.center,t.time=e.time,t}r.GodrayFilter=i},{"@pixi/core":22,"@pixi/math":67}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/math"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};s=i.Filter,o(a=l,e=s),a.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),l.prototype.apply=function(e,t,r,i){var n,o=this._pixelSize.x/t._frame.width,s=this._pixelSize.y/t._frame.height;if(1===this._quality||0===this._blur)n=this._kernels[0]+.5,this.uniforms.uOffset[0]=n*o,this.uniforms.uOffset[1]=n*s,e.applyFilter(this,t,r,i);else{for(var a,u=e.getFilterTexture(),l=t,h=u,c=this._quality-1,f=0;f<c;f++)n=this._kernels[f]+.5,this.uniforms.uOffset[0]=n*o,this.uniforms.uOffset[1]=n*s,e.applyFilter(this,l,h,1),a=l,l=h,h=a;n=this._kernels[c]+.5,this.uniforms.uOffset[0]=n*o,this.uniforms.uOffset[1]=n*s,e.applyFilter(this,l,r,i),e.returnFilterTexture(u)}},l.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(e,t){return e+t+.5},0))},l.prototype._generateKernels=function(){var e=this._blur,t=this._quality,r=[e];if(0<e)for(var i=e,n=e/t,o=1;o<t;o++)r.push(i-=n);this._kernels=r,this._updatePadding()},Object.defineProperty(l.prototype,"kernels",{get:function(){return this._kernels},set:function(e){Array.isArray(e)&&0<e.length?(this._kernels=e,this._quality=e.length,this._blur=Math.max.apply(Math,e)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(e){"number"==typeof e?(this._pixelSize.x=e,this._pixelSize.y=e):Array.isArray(e)?(this._pixelSize.x=e[0],this._pixelSize.y=e[1]):e instanceof n.Point?(this._pixelSize.x=e.x,this._pixelSize.y=e.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"blur",{get:function(){return this._blur},set:function(e){this._blur=e,this._generateKernels()},enumerable:!1,configurable:!0});var s,a,i=l;function u(){this.constructor=a}function l(e,t,r){void 0===e&&(e=4),void 0===t&&(t=3);var i=s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",(r=void 0===r?!1:r)?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}")||this;return i._kernels=[],i._blur=4,i._quality=3,i.uniforms.uOffset=new Float32Array(2),i._pixelSize=new n.Point,i.pixelSize=1,i._clamp=r,Array.isArray(e)?i.kernels=e:(i._blur=e,i.quality=t),i}r.KawaseBlurFilter=i},{"@pixi/core":22,"@pixi/math":67}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/math"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};s=i.Filter,o(a=l,e=s),a.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),l.prototype.apply=function(e,t,r,i){var n=this.velocity,o=n.x,n=n.y;this.uniforms.uKernelSize=0!==o||0!==n?this.kernelSize:0,e.applyFilter(this,t,r,i)},Object.defineProperty(l.prototype,"velocity",{get:function(){return this._velocity},set:function(e){this.setVelocity(e)},enumerable:!1,configurable:!0}),l.prototype.setVelocity=function(e){var t,r;Array.isArray(e)?(t=e[0],r=e[1],this._velocity.set(t,r)):this._velocity.copyFrom(e)},l.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=1+(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)},Object.defineProperty(l.prototype,"offset",{get:function(){return this.uniforms.uOffset},set:function(e){this.uniforms.uOffset=e},enumerable:!1,configurable:!0});var s,a,i=l;function u(){this.constructor=a}function l(e,t,r){void 0===e&&(e=[0,0]),void 0===t&&(t=5),void 0===r&&(r=0);var i=s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uVelocity;\nuniform int uKernelSize;\nuniform float uOffset;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\n// Notice:\n// the perfect way:\n//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);\n// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    vec2 velocity = uVelocity / filterArea.xy;\n    float offset = -uOffset / length(uVelocity) - 0.5;\n    int k = uKernelSize - 1;\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n        vec2 bias = velocity * (float(i) / float(k) + offset);\n        color += texture2D(uSampler, vTextureCoord + bias);\n    }\n    gl_FragColor = color / float(uKernelSize);\n}\n")||this;return i.kernelSize=5,i.uniforms.uVelocity=new Float32Array(2),i._velocity=new n.ObservablePoint(i.velocityChanged,i),i.setVelocity(e),i.kernelSize=t,i.offset=r,i}r.MotionBlurFilter=i},{"@pixi/core":22,"@pixi/math":67}],50:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),a=e("@pixi/utils"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};o=i.Filter,n(s=l,e=o),s.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),Object.defineProperty(l.prototype,"replacements",{get:function(){return this._replacements},set:function(e){var t=this.uniforms.originalColors,r=this.uniforms.targetColors,i=e.length;if(i>this._maxColors)throw new Error("Length of replacements ("+i+") exceeds the maximum colors length ("+this._maxColors+")");t[3*i]=-1;for(var n=0;n<i;n++){var o=e[n],s=o[0],s=("number"==typeof s?s=a.hex2rgb(s):o[0]=a.rgb2hex(s),t[3*n]=s[0],t[3*n+1]=s[1],t[3*n+2]=s[2],o[1]);"number"==typeof s?s=a.hex2rgb(s):o[1]=a.rgb2hex(s),r[3*n]=s[0],r[3*n+1]=s[1],r[3*n+2]=s[2]}this._replacements=e},enumerable:!1,configurable:!0}),l.prototype.refresh=function(){this.replacements=this._replacements},Object.defineProperty(l.prototype,"maxColors",{get:function(){return this._maxColors},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(e){this.uniforms.epsilon=e},enumerable:!1,configurable:!0});var o,s,i=l;function u(){this.constructor=s}function l(e,t,r){void 0===t&&(t=.05),void 0===r&&(r=e.length);var i=o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n".replace(/%maxColors%/g,r.toFixed(0)))||this;return i._replacements=[],i._maxColors=0,i.epsilon=t,i._maxColors=r,i.uniforms.originalColors=new Float32Array(3*r),i.uniforms.targetColors=new Float32Array(3*r),i.replacements=e,i}r.MultiColorReplaceFilter=i},{"@pixi/core":22,"@pixi/utils":85}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};o=i.Filter,n(s=u,e=o),s.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a),Object.defineProperty(u.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0});var o,s,e=u;function a(){this.constructor=s}function u(e,t){void 0===e&&(e=.5),void 0===t&&(t=Math.random());var r=o.call(this,i.defaultFilterVertex,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=t,r}r.NoiseFilter=e},{"@pixi/core":22}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),a.prototype.apply=function(e,t,r,i){var n;this.uniforms.dimensions[0]=null==(n=t.filterFrame)?void 0:n.width,this.uniforms.dimensions[1]=null==(n=t.filterFrame)?void 0:n.height,this.uniforms.seed=this.seed,e.applyFilter(this,t,r,i)},Object.defineProperty(a.prototype,"sepia",{get:function(){return this.uniforms.sepia},set:function(e){this.uniforms.sepia=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(e){this.uniforms.noise=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(e){this.uniforms.noiseSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scratch",{get:function(){return this.uniforms.scratch},set:function(e){this.uniforms.scratch=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scratchDensity",{get:function(){return this.uniforms.scratchDensity},set:function(e){this.uniforms.scratchDensity=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scratchWidth",{get:function(){return this.uniforms.scratchWidth},set:function(e){this.uniforms.scratchWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(e){this.uniforms.vignetting=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(e){this.uniforms.vignettingAlpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(e){this.uniforms.vignettingBlur=e},enumerable:!1,configurable:!0}),a.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3};var n,o,e=a;function s(){this.constructor=o}function a(e,t){void 0===t&&(t=0);var r=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n")||this;return r.seed=0,r.uniforms.dimensions=new Float32Array(2),"number"==typeof e?(r.seed=e,e=void 0):r.seed=t,Object.assign(r,a.defaults,e),r}r.OldFilmFilter=e},{"@pixi/core":22}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/utils"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};s=i.Filter,o(a=l,e=s),a.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),l.getAngleStep=function(e){e=Math.max(e*l.MAX_SAMPLES,l.MIN_SAMPLES);return(2*Math.PI/e).toFixed(7)},l.prototype.apply=function(e,t,r,i){this.uniforms.thickness[0]=this._thickness/t._frame.width,this.uniforms.thickness[1]=this._thickness/t._frame.height,e.applyFilter(this,t,r,i)},Object.defineProperty(l.prototype,"color",{get:function(){return n.rgb2hex(this.uniforms.outlineColor)},set:function(e){n.hex2rgb(e,this.uniforms.outlineColor)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"thickness",{get:function(){return this._thickness},set:function(e){this._thickness=e,this.padding=e},enumerable:!1,configurable:!0}),l.MIN_SAMPLES=1,l.MAX_SAMPLES=100;var s,a,i=l;function u(){this.constructor=a}function l(e,t,r){void 0===e&&(e=1),void 0===t&&(t=0);var i=s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/\$\{angleStep\}/,l.getAngleStep(r=void 0===r?.1:r)))||this;return i._thickness=1,i.uniforms.thickness=new Float32Array([0,0]),i.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(i,{thickness:e,color:t,quality:r}),i}r.OutlineFilter=i},{"@pixi/core":22,"@pixi/utils":85}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),Object.defineProperty(a.prototype,"size",{get:function(){return this.uniforms.size},set:function(e){this.uniforms.size=e="number"==typeof e?[e,e]:e},enumerable:!1,configurable:!0});var n,o,e=a;function s(){this.constructor=o}function a(e){void 0===e&&(e=10);var t=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n\treturn floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n")||this;return t.size=e,t}r.PixelateFilter=e},{"@pixi/core":22}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};o=e.Filter,i(n=a,e=o),n.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),a.prototype.apply=function(e,t,r,i){this.uniforms.uKernelSize=0!==this._angle?this.kernelSize:0,e.applyFilter(this,t,r,i)},Object.defineProperty(a.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this.uniforms.uRadian=e*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(e){this.uniforms.uCenter=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(e){this.uniforms.uRadius=e=e<0||e===1/0?-1:e},enumerable:!1,configurable:!0});var o,n,e=a;function s(){this.constructor=n}function a(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=[0,0]),void 0===r&&(r=5),void 0===i&&(i=-1);var n=o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float uRadian;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform int uKernelSize;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    float aspect = filterArea.y / filterArea.x;\n    vec2 center = uCenter.xy / filterArea.xy;\n    float gradient = uRadius / filterArea.x * 0.3;\n    float radius = uRadius / filterArea.x - gradient * 0.5;\n    int k = uKernelSize - 1;\n\n    vec2 coord = vTextureCoord;\n    vec2 dir = vec2(center - coord);\n    float dist = length(vec2(dir.x, dir.y * aspect));\n\n    float radianStep = uRadian;\n    if (radius >= 0.0 && dist > radius) {\n        float delta = dist - radius;\n        float gap = gradient;\n        float scale = 1.0 - abs(delta / gap);\n        if (scale <= 0.0) {\n            gl_FragColor = color;\n            return;\n        }\n        radianStep *= scale;\n    }\n    radianStep /= float(k);\n\n    float s = sin(radianStep);\n    float c = cos(radianStep);\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n\n        coord -= center;\n        coord.y *= aspect;\n        coord = rotationMatrix * coord;\n        coord.y /= aspect;\n        coord += center;\n\n        vec4 sample = texture2D(uSampler, coord);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample;\n    }\n\n    gl_FragColor = color / float(uKernelSize);\n}\n")||this;return n._angle=0,n.angle=e,n.center=t,n.kernelSize=r,n.radius=i,n}r.RadialBlurFilter=e},{"@pixi/core":22}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),a.prototype.apply=function(e,t,r,i){var n;this.uniforms.dimensions[0]=null==(n=t.filterFrame)?void 0:n.width,this.uniforms.dimensions[1]=null==(n=t.filterFrame)?void 0:n.height,this.uniforms.time=this.time,e.applyFilter(this,t,r,i)},Object.defineProperty(a.prototype,"mirror",{get:function(){return this.uniforms.mirror},set:function(e){this.uniforms.mirror=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"boundary",{get:function(){return this.uniforms.boundary},set:function(e){this.uniforms.boundary=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(e){this.uniforms.amplitude[0]=e[0],this.uniforms.amplitude[1]=e[1]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"waveLength",{get:function(){return this.uniforms.waveLength},set:function(e){this.uniforms.waveLength[0]=e[0],this.uniforms.waveLength[1]=e[1]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha[0]=e[0],this.uniforms.alpha[1]=e[1]},enumerable:!1,configurable:!0}),a.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0};var n,o,e=a;function s(){this.constructor=o}function a(e){var t=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n")||this;return t.time=0,t.uniforms.amplitude=new Float32Array(2),t.uniforms.waveLength=new Float32Array(2),t.uniforms.alpha=new Float32Array(2),t.uniforms.dimensions=new Float32Array(2),Object.assign(t,a.defaults,e),t}r.ReflectionFilter=e},{"@pixi/core":22}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),Object.defineProperty(a.prototype,"red",{get:function(){return this.uniforms.red},set:function(e){this.uniforms.red=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"green",{get:function(){return this.uniforms.green},set:function(e){this.uniforms.green=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(e){this.uniforms.blue=e},enumerable:!1,configurable:!0});var n,o,e=a;function s(){this.constructor=o}function a(e,t,r){void 0===e&&(e=[-10,0]),void 0===t&&(t=[0,10]),void 0===r&&(r=[0,0]);var i=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n")||this;return i.red=e,i.green=t,i.blue=r,i}r.RGBSplitFilter=e},{"@pixi/core":22}],58:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),a.prototype.apply=function(e,t,r,i){this.uniforms.time=this.time,e.applyFilter(this,t,r,i)},Object.defineProperty(a.prototype,"center",{get:function(){return this.uniforms.center},set:function(e){this.uniforms.center=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(e){this.uniforms.amplitude=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"wavelength",{get:function(){return this.uniforms.wavelength},set:function(e){this.uniforms.wavelength=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"brightness",{get:function(){return this.uniforms.brightness},set:function(e){this.uniforms.brightness=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"speed",{get:function(){return this.uniforms.speed},set:function(e){this.uniforms.speed=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e},enumerable:!1,configurable:!0}),a.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1};var n,o,e=a;function s(){this.constructor=o}function a(e,t,r){void 0===e&&(e=[0,0]),void 0===r&&(r=0);var i=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n")||this;return i.center=e,Object.assign(i,a.defaults,t),i.time=r,i}r.ShockwaveFilter=e},{"@pixi/core":22}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/utils"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};s=i.Filter,o(a=l,e=s),a.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u),l.prototype.apply=function(e,t,r,i){var n;this.uniforms.dimensions[0]=null==(n=t.filterFrame)?void 0:n.width,this.uniforms.dimensions[1]=null==(n=t.filterFrame)?void 0:n.height,e.applyFilter(this,t,r,i)},Object.defineProperty(l.prototype,"texture",{get:function(){return this.uniforms.uLightmap},set:function(e){this.uniforms.uLightmap=e},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"color",{get:function(){return this._color},set:function(e){var t=this.uniforms.ambientColor;"number"==typeof e?(n.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this._color=n.rgb2hex(t))},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"alpha",{get:function(){return this.uniforms.ambientColor[3]},set:function(e){this.uniforms.ambientColor[3]=e},enumerable:!1,configurable:!0});var s,a,i=l;function u(){this.constructor=a}function l(e,t,r){void 0===t&&(t=0),void 0===r&&(r=1);var i=s.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLightmap;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 ambientColor;\nvoid main() {\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\n    vec4 light = texture2D(uLightmap, lightCoord);\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\n    vec3 intensity = ambient + light.rgb;\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n")||this;return i._color=0,i.uniforms.dimensions=new Float32Array(2),i.uniforms.ambientColor=new Float32Array([0,0,0,r]),i.texture=e,i.color=t,i}r.SimpleLightmapFilter=i},{"@pixi/core":22,"@pixi/utils":85}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),o=e("@pixi/math"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function s(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}s(u,a=i.Filter),u.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},Object.defineProperty(u.prototype,"blur",{get:function(){return this.uniforms.blur},set:function(e){this.uniforms.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"gradientBlur",{get:function(){return this.uniforms.gradientBlur},set:function(e){this.uniforms.gradientBlur=e},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"start",{get:function(){return this.uniforms.start},set:function(e){this.uniforms.start=e,this.updateDelta()},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"end",{get:function(){return this.uniforms.end},set:function(e){this.uniforms.end=e,this.updateDelta()},enumerable:!1,configurable:!0});var a,e=u;function u(e,t,r,i){void 0===e&&(e=100),void 0===t&&(t=600);var n=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n")||this;return n.uniforms.blur=e,n.uniforms.gradientBlur=t,n.uniforms.start=r||new o.Point(0,window.innerHeight/2),n.uniforms.end=i||new o.Point(600,window.innerHeight/2),n.uniforms.delta=new o.Point(30,30),n.uniforms.texSize=new o.Point(window.innerWidth,window.innerHeight),n.updateDelta(),n}s(c,l=e),c.prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(e*e+t*t);this.uniforms.delta.x=e/r,this.uniforms.delta.y=t/r};var l,h=c;function c(){return null!==l&&l.apply(this,arguments)||this}s(p,f=e),p.prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(e*e+t*t);this.uniforms.delta.x=-t/r,this.uniforms.delta.y=e/r};var f,d=p;function p(){return null!==f&&f.apply(this,arguments)||this}s(m,_=i.Filter),m.prototype.apply=function(e,t,r,i){var n=e.getFilterTexture();this.tiltShiftXFilter.apply(e,t,n,1),this.tiltShiftYFilter.apply(e,n,r,i),e.returnFilterTexture(n)},Object.defineProperty(m.prototype,"blur",{get:function(){return this.tiltShiftXFilter.blur},set:function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"gradientBlur",{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"start",{get:function(){return this.tiltShiftXFilter.start},set:function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"end",{get:function(){return this.tiltShiftXFilter.end},set:function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e},enumerable:!1,configurable:!0});var _,i=m;function m(e,t,r,i){void 0===e&&(e=100),void 0===t&&(t=600);var n=_.call(this)||this;return n.tiltShiftXFilter=new h(e,t,r,i),n.tiltShiftYFilter=new d(e,t,r,i),n}r.TiltShiftAxisFilter=e,r.TiltShiftFilter=i,r.TiltShiftXFilter=h,r.TiltShiftYFilter=d},{"@pixi/core":22,"@pixi/math":67}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),e=e("@pixi/math"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};o=i.Filter,n(s=u,i=o),s.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a),Object.defineProperty(u.prototype,"offset",{get:function(){return this.uniforms.offset},set:function(e){this.uniforms.offset=e},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(e){this.uniforms.angle=e},enumerable:!1,configurable:!0}),u.defaults={radius:200,angle:4,padding:20,offset:new e.Point};var o,s,i=u;function a(){this.constructor=s}function u(e){var t=o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n")||this;return Object.assign(t,u.defaults,e),t}r.TwistFilter=i},{"@pixi/core":22,"@pixi/math":67}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n=e.Filter,i(o=a,e=n),o.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s),Object.defineProperty(a.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(e){this.uniforms.uCenter=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"strength",{get:function(){return this.uniforms.uStrength},set:function(e){this.uniforms.uStrength=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.uniforms.uInnerRadius},set:function(e){this.uniforms.uInnerRadius=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(e){this.uniforms.uRadius=e=e<0||e===1/0?-1:e},enumerable:!1,configurable:!0}),a.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32};var n,o,e=a;function s(){this.constructor=o}function a(e){var e=Object.assign(a.defaults,e),t=e.maxKernelSize,e=function(e,t){var r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}(e,["maxKernelSize"]),t=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = ${maxKernelSize};\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n".replace("${maxKernelSize}",t.toFixed(1)))||this;return Object.assign(t,e),t}r.ZoomBlurFilter=e},{"@pixi/core":22}],63:[function(e,I,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0});var d=e("@pixi/core"),K=e("@pixi/math"),c=e("@pixi/utils"),m=e("@pixi/constants"),t=e("@pixi/display"),Z=((e=q.LINE_JOIN||(q.LINE_JOIN={})).MITER="miter",e.BEVEL="bevel",e.ROUND="round",(e=q.LINE_CAP||(q.LINE_CAP={})).BUTT="butt",e.ROUND="round",e.SQUARE="square",{adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(void 0===t&&(t=20),!this.adaptive||!e||isNaN(e))return t;t=Math.ceil(e/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}}),r=(i.prototype.clone=function(){var e=new i;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=d.Texture.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i);function i(){this.color=16777215,this.alpha=1,this.texture=d.Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function L(e,t){void 0===t&&(t=!1);var r=e.length;if(!(r<6)){for(var i=0,n=0,o=e[r-2],s=e[r-1];n<r;n+=2){var a=e[n],u=e[n+1];i+=(a-o)*(u+s),o=a,s=u}if(!t&&0<i||t&&i<=0)for(t=r/2,n=t+t%2;n<r;n+=2){var l=r-n-2,h=r-n-1,c=n,f=n+1,d=[e[c],e[l]];e[l]=d[0],e[c]=d[1],l=[e[f],e[h]],e[h]=l[0],e[f]=l[1]}}}var o={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var r=e.points,i=e.holes,n=t.points,o=t.indices;if(6<=r.length){L(r,!1);for(var s=[],a=0;a<i.length;a++){var u=i[a];L(u.points,!0),s.push(r.length/2),r=r.concat(u.points)}var l=c.earcut(r,s,2);if(l){for(var h=n.length/2,a=0;a<l.length;a+=3)o.push(l[a]+h),o.push(l[a+1]+h),o.push(l[a+2]+h);for(a=0;a<r.length;a++)n.push(r[a])}}}},l={build:function(e){var t,r,i,n,o,s,a,u=e.points,l=(e.type===K.SHAPES.CIRC?(i=(h=e.shape).x,n=h.y,o=r=h.radius,s=t=0):e.type===K.SHAPES.ELIP?(i=(h=e.shape).x,n=h.y,o=h.width,r=h.height,s=t=0):(e=(h=e.shape).width/2,a=h.height/2,i=h.x+e,n=h.y+a,s=e-(o=r=Math.max(0,Math.min(h.radius,Math.min(e,a)))),t=a-r),Math.ceil(2.3*Math.sqrt(o+r))),h=8*l+(s?4:0)+(t?4:0);if(0!=(u.length=h)){if(0===l)return u.length=8,u[0]=u[6]=i+s,u[1]=u[3]=n+t,u[2]=u[4]=i-s,void(u[5]=u[7]=n-t);var c=0,f=4*l+(s?2:0)+2,d=f,p=h,_=i+(x=s+o),m=i-x,y=n+(T=t);u[c++]=_,u[c++]=y,u[--f]=y,u[--f]=m,t&&(b=n-T,u[d++]=m,u[d++]=b,u[--p]=b,u[--p]=_);for(var v=1;v<l;v++){var g=Math.PI/2*(v/l),_=i+(x=s+Math.cos(g)*o),m=i-x,y=n+(T=t+Math.sin(g)*r),b=n-T;u[c++]=_,u[c++]=y,u[--f]=y,u[--f]=m,u[d++]=m,u[d++]=b,u[--p]=b,u[--p]=_}var x,T,_=i+(x=s),m=i-x,y=n+(T=t+r),b=n-T;u[c++]=_,u[c++]=y,u[--p]=b,u[--p]=_,s&&(u[c++]=m,u[c++]=y,u[--p]=b,u[--p]=m)}},triangulate:function(e,t){var r,i=e.points,n=t.points,o=t.indices,s=n.length/2,a=s,u=(t=e.type!==K.SHAPES.RREC?(r=(t=e.shape).x,t.y):(r=(t=e.shape).x+t.width/2,t.y+t.height/2),e.matrix);n.push(e.matrix?u.a*r+u.c*t+u.tx:r,e.matrix?u.b*r+u.d*t+u.ty:t),s++,n.push(i[0],i[1]);for(var l=2;l<i.length;l+=2)n.push(i[l],i[l+1]),o.push(s++,a,s);o.push(a+1,a,s)}},e={build:function(e){var t=e.shape,r=t.x,i=t.y,n=t.width,t=t.height,e=e.points;e.length=0,e.push(r,i,r+n,i,r+n,i+t,r,i+t)},triangulate:function(e,t){var e=e.points,r=t.points,i=r.length/2;r.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(i,1+i,2+i,1+i,2+i,3+i)}};function p(e,t,r){return e+(t-e)*r}function s(e,t,r,i,n,o,s){for(var a,u,l,h,c,f=s=void 0===s?[]:s,d=0;d<=20;++d)l=p(e,r,c=d/20),a=p(t,i,c),h=p(r,n,c),u=p(i,o,c),l=p(l,h,c),h=p(a,u,c),0===d&&f[f.length-2]===l&&f[f.length-1]===h||f.push(l,h)}var F={build:function(e){var t,r,i,n,o;H.nextRoundedRectBehavior?l.build(e):(o=e.shape,e=e.points,t=o.x,r=o.y,i=o.width,n=o.height,o=Math.max(0,Math.min(o.radius,Math.min(i,n)/2)),e.length=0,o?(s(t,r+o,t,r,t+o,r,e),s(t+i-o,r,t+i,r,t+i,r+o,e),s(t+i,r+n-o,t+i,r+n,t+i-o,r+n,e),s(t+o,r+n,t,r+n,t,r+n-o,e)):e.push(t,r,t+i,r,t+i,r+n,t,r+n))},triangulate:function(e,t){if(H.nextRoundedRectBehavior)l.triangulate(e,t);else{for(var r=e.points,i=t.points,n=t.indices,o=i.length/2,s=c.earcut(r,null,2),a=0,u=s.length;a<u;a+=3)n.push(s[a]+o),n.push(s[a+1]+o),n.push(s[a+2]+o);for(a=0,u=r.length;a<u;a++)i.push(r[a],r[++a])}}};function J(e,t,r,i,n,o,s,a){var u,s=s?(u=i,-r):(u=-i,r),l=e+r*o+u,o=t+i*o+s;return a.push(e-r*n+u,t-i*n+s),a.push(l,o),2}function Q(e,t,r,i,n,o,s,a){var u=r-e,l=i-t,h=Math.atan2(u,l),c=Math.atan2(n-e,o-t),f=(a&&h<c?h+=2*Math.PI:!a&&c<h&&(c+=2*Math.PI),h),c=c-h,h=Math.abs(c),d=Math.sqrt(u*u+l*l),p=1+(15*h*Math.sqrt(d)/Math.PI>>0),_=c/p;if(f+=_,a){s.push(e,t),s.push(r,i);for(var m=1,y=f;m<p;m++,y+=_)s.push(e,t),s.push(e+Math.sin(y)*d,t+Math.cos(y)*d);s.push(e,t),s.push(n,o)}else{s.push(r,i),s.push(e,t);for(m=1,y=f;m<p;m++,y+=_)s.push(e+Math.sin(y)*d,t+Math.cos(y)*d),s.push(e,t);s.push(n,o),s.push(e,t)}return 2*p}function a(e,t){if(e.lineStyle.native){var r=t,i=0,n=(s=e).shape,o=s.points||n.points,s=n.type!==K.SHAPES.POLY||n.closeStroke;if(0!==o.length){var N=r.points,B=r.indices,k=o.length/2,n=N.length/2,a=n;for(N.push(o[0],o[1]),i=1;i<k;i++)N.push(o[2*i],o[2*i+1]),B.push(a,a+1),a++;s&&B.push(a,n)}}else{var r=t,n=(s=e).shape,u=s.points||n.points.slice(),t=r.closePointEps;if(0!==u.length){var l=s.lineStyle,s=new K.Point(u[0],u[1]),e=new K.Point(u[u.length-2],u[u.length-1]),n=n.type!==K.SHAPES.POLY||n.closeStroke,t=Math.abs(s.x-e.x)<t&&Math.abs(s.y-e.y)<t,h=(n&&(u=u.slice(),t&&(u.pop(),u.pop(),e.set(u[u.length-2],u[u.length-1])),t=.5*(s.x+e.x),e=.5*(e.y+s.y),u.unshift(t,e),u.push(t,e)),r.points),c=u.length/2,f=u.length,U=h.length/2,d=l.width/2,G=d*d,j=l.miterLimit*l.miterLimit,p=u[0],_=u[1],m=u[2],y=u[3],v=0,g=0,b=-(_-y),x=p-m,T=0,E=0,O=Math.sqrt(b*b+x*x),s=(b=b/O*d,x=x/O*d,l.alignment),S=2*(1-s),R=2*s;n||(l.cap===q.LINE_CAP.ROUND?f+=Q(p-b*(S-R)*.5,_-x*(S-R)*.5,p-b*S,_-x*S,p+b*R,_+x*R,h,!0)+2:l.cap===q.LINE_CAP.SQUARE&&(f+=J(p,_,b,x,S,R,!0,h))),h.push(p-b*S,_-x*S),h.push(p+b*R,_+x*R);for(var A=1;A<c-1;++A){p=u[2*(A-1)],_=u[2*(A-1)+1],m=u[2*A],y=u[2*A+1],v=u[2*(A+1)],g=u[2*(A+1)+1],x=p-m,b=(b=-(_-y))/(O=Math.sqrt(b*b+x*x))*d,x=x/O*d,E=m-v;var P,C,M,w,I,X,T=(T=-(y-g))/(O=Math.sqrt(T*T+E*E))*d,E=E/O*d,D=m-p,H=_-y,z=m-v,Y=g-y,L=H*z-Y*D,F=L<0;Math.abs(L)<.1?(h.push(m-b*S,y-x*S),h.push(m+b*R,y+x*R)):(M=m+((C=(D*(w=(-T+v)*(-E+y)-(-T+m)*(-E+g))-z*(P=(-b+p)*(-x+y)-(-b+m)*(-x+_)))/L)-m)*S,w=y+((P=(Y*P-H*w)/L)-y)*S,L=m-(C-m)*R,I=y-(P-y)*R,X=F?S:R,(C=(C-m)*(C-m)+(P-y)*(P-y))<=Math.min(D*D+H*H,z*z+Y*Y)+X*X*G?l.join===q.LINE_JOIN.BEVEL||j<C/G?(F?(h.push(M,w),h.push(m+b*R,y+x*R),h.push(M,w),h.push(m+T*R,y+E*R)):(h.push(m-b*S,y-x*S),h.push(L,I),h.push(m-T*S,y-E*S),h.push(L,I)),f+=2):l.join===q.LINE_JOIN.ROUND?F?(h.push(M,w),h.push(m+b*R,y+x*R),f+=Q(m,y,m+b*R,y+x*R,m+T*R,y+E*R,h,!0)+4,h.push(M,w),h.push(m+T*R,y+E*R)):(h.push(m-b*S,y-x*S),h.push(L,I),f+=Q(m,y,m-b*S,y-x*S,m-T*S,y-E*S,h,!1)+4,h.push(m-T*S,y-E*S),h.push(L,I)):(h.push(M,w),h.push(L,I)):(h.push(m-b*S,y-x*S),h.push(m+b*R,y+x*R),l.join===q.LINE_JOIN.BEVEL||j<C/G||(l.join===q.LINE_JOIN.ROUND?f+=F?Q(m,y,m+b*R,y+x*R,m+T*R,y+E*R,h,!0)+2:Q(m,y,m-b*S,y-x*S,m-T*S,y-E*S,h,!1)+2:(F?(h.push(L,I),h.push(L,I)):(h.push(M,w),h.push(M,w)),f+=2)),h.push(m-T*S,y-E*S),h.push(m+T*R,y+E*R),f+=2))}p=u[2*(c-2)],_=u[2*(c-2)+1],m=u[2*(c-1)],b=-(_-(y=u[2*(c-1)+1])),x=p-m,O=Math.sqrt(b*b+x*x),h.push(m-(b=b/O*d)*S,y-(x=x/O*d)*S),h.push(m+b*R,y+x*R),n||(l.cap===q.LINE_CAP.ROUND?f+=Q(m-b*(S-R)*.5,y-x*(S-R)*.5,m-b*S,y-x*S,m+b*R,y+x*R,h,!1)+2:l.cap===q.LINE_CAP.SQUARE&&(f+=J(m,y,b,x,S,R,!1,h)));for(var V=r.indices,W=Z.epsilon*Z.epsilon,A=U;A<f+U-2;++A)p=h[2*A],_=h[2*A+1],m=h[2*(A+1)],y=h[2*(A+1)+1],v=h[2*(A+2)],g=h[2*(A+2)+1],Math.abs(p*(y-g)+m*(g-_)+v*(_-y))<W||V.push(A,A+1,A+2)}}}u.curveTo=function(e,t,r,i,n,o){var s=o[o.length-2],a=o[o.length-1]-t,s=s-e,i=i-t,r=r-e,u=Math.abs(a*r-s*i);if(u<1e-8||0===n)return o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t),null;var o=a*a+s*s,l=i*i+r*r,h=a*i+s*r,c=n*Math.sqrt(o)/u,u=n*Math.sqrt(l)/u,o=c*h/o,h=u*h/l,l=c*r+u*s,f=c*i+u*a,d=r*(c+h),c=i*(c+h);return{cx:l+e,cy:f+t,radius:n,startAngle:Math.atan2(a*(u+o)-f,s*(u+o)-l),endAngle:Math.atan2(c-f,d-l),anticlockwise:r*a<s*i}},u.arc=function(e,t,r,i,n,o,s,a,u){for(var s=s-o,l=Z._segmentsCount(Math.abs(s)*n,40*Math.ceil(Math.abs(s)/K.PI_2)),h=s/(2*l),c=2*h,f=Math.cos(h),d=Math.sin(h),p=l-1,_=p%1/p,m=0;m<=p;++m){var y=h+o+c*(m+_*m),v=Math.cos(y),y=-Math.sin(y);u.push((f*v+d*y)*n+r,(f*-y+d*v)*n+i)}};var f=u;function u(){}y.curveLength=function(e,t,r,i,n,o,s,a){for(var u,l,h,c,f,d,p,_,m=0,y=e,v=t,g=1;g<=10;++g)p=y-(f=(d=(_=(c=1-(u=g/10))*c)*c)*e+3*_*u*r+3*c*(l=u*u)*n+(h=l*u)*s),_=v-(d=d*t+3*_*u*i+3*c*l*o+h*a),y=f,v=d,m+=Math.sqrt(p*p+_*_);return m},y.curveTo=function(e,t,r,i,n,o,s){var a,u,l,h,c,f=s[s.length-2],d=s[s.length-1],p=(s.length-=2,Z._segmentsCount(y.curveLength(f,d,e,t,r,i,n,o)));s.push(f,d);for(var _,m=1;m<=p;++m)s.push((l=(u=(a=1-(_=m/p))*a)*a)*f+3*u*_*e+3*a*(h=_*_)*r+(c=h*_)*n,l*d+3*u*_*t+3*a*h*i+c*o)};var N=y;function y(){}_.curveLength=function(e,t,r,i,n,o){var n=e-2*r+n,o=t-2*i+o,r=2*r-2*e,e=2*i-2*t,i=4*(n*n+o*o),t=4*(n*r+o*e),n=r*r+e*e,o=2*Math.sqrt(i+t+n),r=Math.sqrt(i),e=2*i*r,s=2*Math.sqrt(n),a=t/r;return(e*o+r*t*(o-s)+(4*n*i-t*t)*Math.log((2*r+a+o)/(a+s)))/(4*e)},_.curveTo=function(e,t,r,i,n){for(var o=n[n.length-2],s=n[n.length-1],a=Z._segmentsCount(_.curveLength(o,s,e,t,r,i)),u=1;u<=a;++u){var l,h=u/a;n.push((l=o+(e-o)*h)+(e+(r-e)*h-l)*h,(l=s+(t-s)*h)+(t+(i-t)*h-l)*h)}};var B=_;function _(){}h.prototype.begin=function(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r},h.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},h.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0};var k=h;function h(){this.reset()}(w={})[K.SHAPES.POLY]=o,w[K.SHAPES.CIRC]=l,w[K.SHAPES.ELIP]=l,w[K.SHAPES.RECT]=e,w[K.SHAPES.RREC]=F;var v=w,g=[],b=[],x=(T.prototype.clone=function(){return new T(this.shape,this.fillStyle,this.lineStyle,this.matrix)},T.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},T);function T(e,t,r,i){void 0===t&&(t=null),void 0===r&&(r=null),void 0===i&&(i=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=i,this.type=e.type}var E,O=new K.Point,U=new t.Bounds,G=(n(S,E=d.BatchGeometry),Object.defineProperty(S.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),S.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0;for(var e=this.textureIds.length=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),b.push(this.drawCalls[e]);for(e=this.drawCalls.length=0;e<this.batches.length;e++){var t=this.batches[e];t.reset(),g.push(t)}this.batches.length=0},S.prototype.clear=function(){return 0<this.graphicsData.length&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},S.prototype.drawShape=function(e,t,r,i){e=new x(e,t=void 0===t?null:t,r=void 0===r?null:r,i=void 0===i?null:i);return this.graphicsData.push(e),this.dirty++,this},S.prototype.drawHole=function(e,t){if(!this.graphicsData.length)return null;e=new x(e,null,null,t=void 0===t?null:t),t=this.graphicsData[this.graphicsData.length-1];return e.lineStyle=t.lineStyle,t.holes.push(e),this.dirty++,this},S.prototype.destroy=function(){E.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},S.prototype.containsPoint=function(e){for(var t=this.graphicsData,r=0;r<t.length;++r){var i=t[r];if(i.fillStyle.visible&&(i.shape&&(i.matrix?i.matrix.applyInverse(e,O):O.copyFrom(e),i.shape.contains(O.x,O.y)))){var n=!1;if(i.holes)for(var o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(O.x,O.y)){n=!0;break}if(!n)return!0}}return!1},S.prototype.updateBatches=function(e){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,r=this.graphicsData,i=null,n=null;0<this.batches.length&&(n=(i=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<r.length;o++){this.shapeIndex++;var s=r[o],a=s.fillStyle,u=s.lineStyle;v[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(a.visible||u.visible)&&this.processHoles(s.holes);for(var l=0;l<2;l++){var h,c,f,d=0===l?a:u;d.visible&&(f=d.texture.baseTexture,h=this.indices.length,c=this.points.length/2,f.wrapMode=m.WRAP_MODES.REPEAT,0===l?this.processFill(s):this.processLine(s),0!=(f=this.points.length/2-c)&&(i&&!this._compareStyles(n,d)&&(i.end(h,c),i=null),i||((i=g.pop()||new k).begin(d,h,c),this.batches.push(i),n=d),this.addUvs(this.points,t,d.texture,c,f,d.matrix)))}}var p=this.indices.length,_=this.points.length/2;i&&i.end(p,_),0===this.batches.length?this.batchable=!0:(this.indicesUint16&&this.indices.length===this.indicesUint16.length?this.indicesUint16.set(this.indices):this.indicesUint16=new(65535<_&&e?Uint32Array:Uint16Array)(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls())}}else this.batchable=!0},S.prototype._compareStyles=function(e,t){return!(!e||!t)&&(e.texture.baseTexture===t.texture.baseTexture&&(e.color+e.alpha===t.color+t.alpha&&!!e.native==!!t.native))},S.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,t=this.graphicsData.length;e<t;e++){var r=this.graphicsData[e],i=r.fillStyle,r=r.lineStyle;if(i&&!i.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},S.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,t=0,r=e.length;t<r;t++)for(var i=e[t],n=0;n<i.size;n++){var o=i.start+n;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}},S.prototype.isBatchable=function(){if(131070<this.points.length)return!1;for(var e=this.batches,t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<2*S.BATCHABLE_SIZE},S.prototype.buildDrawCalls=function(){for(var e=++d.BaseTexture._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),b.push(this.drawCalls[t]);this.drawCalls.length=0;var r=this.colors,i=this.textureIds,n=b.pop(),o=(n||((n=new d.BatchDrawCall).texArray=new d.BatchTextureArray),n.texArray.count=0,n.start=0,n.size=0,n.type=m.DRAW_MODES.TRIANGLES,0),s=null,a=!1,u=m.DRAW_MODES.TRIANGLES,l=0;this.drawCalls.push(n);for(t=0;t<this.batches.length;t++){var h=this.batches[t],c=h.style,f=c.texture.baseTexture;a!==!!c.native&&(u=(a=!!c.native)?m.DRAW_MODES.LINES:m.DRAW_MODES.TRIANGLES,s=null,o=8,e++),s!==f&&(s=f)._batchEnabled!==e&&(8===o&&(e++,(o=0)<n.size&&((n=b.pop())||((n=new d.BatchDrawCall).texArray=new d.BatchTextureArray),this.drawCalls.push(n)),n.start=l,n.size=0,n.texArray.count=0,n.type=u),f.touched=1,f._batchEnabled=e,f._batchLocation=o,f.wrapMode=m.WRAP_MODES.REPEAT,n.texArray.elements[n.texArray.count++]=f,o++),n.size+=h.size,l+=h.size,f=f._batchLocation,this.addColors(r,c.color,c.alpha,h.attribSize,h.attribStart),this.addTextureIds(i,f,h.attribSize,h.attribStart)}d.BaseTexture._globalBatch=e,this.packAttributes()},S.prototype.packAttributes=function(){for(var e=this.points,t=this.uvs,r=this.colors,i=this.textureIds,n=new ArrayBuffer(3*e.length*4),o=new Float32Array(n),s=new Uint32Array(n),a=0,u=0;u<e.length/2;u++)o[a++]=e[2*u],o[a++]=e[2*u+1],o[a++]=t[2*u],o[a++]=t[2*u+1],s[a++]=r[u],o[a++]=i[u];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},S.prototype.processFill=function(e){(e.holes.length?o:v[e.type]).triangulate(e,this)},S.prototype.processLine=function(e){a(e,this);for(var t=0;t<e.holes.length;t++)a(e.holes[t],this)},S.prototype.processHoles=function(e){for(var t=0;t<e.length;t++){var r=e[t];v[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},S.prototype.calculateBounds=function(){var e=this._bounds,t=U,r=K.Matrix.IDENTITY;this._bounds.clear(),t.clear();for(var i=0;i<this.graphicsData.length;i++){var n=this.graphicsData[i],o=n.shape,s=n.type,a=n.lineStyle,n=n.matrix||K.Matrix.IDENTITY,u=0;a&&a.visible&&(u=a.width*Math.max(0,a.alignment)),r!==n&&(t.isEmpty()||(e.addBoundsMatrix(t,r),t.clear()),r=n),s===K.SHAPES.RECT||s===K.SHAPES.RREC?t.addFramePad(o.x,o.y,o.x+o.width,o.y+o.height,u,u):s===K.SHAPES.CIRC?t.addFramePad(o.x,o.y,o.x,o.y,o.radius+u,o.radius+u):s===K.SHAPES.ELIP?t.addFramePad(o.x,o.y,o.x,o.y,o.width+u,o.height+u):e.addVerticesMatrix(r,o.points,0,o.points.length,u,u)}t.isEmpty()||e.addBoundsMatrix(t,r),e.pad(this.boundsPadding,this.boundsPadding)},S.prototype.transformPoints=function(e,t){for(var r=0;r<e.length/2;r++){var i=e[2*r],n=e[2*r+1];e[2*r]=t.a*i+t.c*n+t.tx,e[2*r+1]=t.b*i+t.d*n+t.ty}},S.prototype.addColors=function(e,t,r,i,n){void 0===n&&(n=0);var o=c.premultiplyTint((t>>16)+(65280&t)+((255&t)<<16),r);e.length=Math.max(e.length,n+i);for(var s=0;s<i;s++)e[n+s]=o},S.prototype.addTextureIds=function(e,t,r,i){void 0===i&&(i=0),e.length=Math.max(e.length,i+r);for(var n=0;n<r;n++)e[i+n]=t},S.prototype.addUvs=function(e,t,r,i,n,o){void 0===o&&(o=null);for(var s=0,a=t.length,u=r.frame;s<n;){var l,h=e[2*(i+s)],c=e[2*(i+s)+1];o&&(l=o.a*h+o.c*c+o.tx,c=o.b*h+o.d*c+o.ty,h=l),s++,t.push(h/u.width,c/u.height)}var f=r.baseTexture;(u.width<f.width||u.height<f.height)&&this.adjustUvs(t,r,a,n)},S.prototype.adjustUvs=function(e,t,r,i){for(var n=t.baseTexture,o=r+2*i,i=t.frame,s=i.width/n.width,a=i.height/n.height,u=i.x/i.width,l=i.y/i.height,h=Math.floor(e[r]+1e-6),c=Math.floor(e[r+1]+1e-6),f=r+2;f<o;f+=2)h=Math.min(h,Math.floor(e[f]+1e-6)),c=Math.min(c,Math.floor(e[f+1]+1e-6));u-=h,l-=c;for(f=r;f<o;f+=2)e[f]=(e[f]+u)*s,e[f+1]=(e[f+1]+l)*a},S.BATCHABLE_SIZE=100,S);function S(){var e=E.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new t.Bounds,e.boundsDirty=-1,e}n(A,R=r),A.prototype.clone=function(){var e=new A;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},A.prototype.reset=function(){R.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1};var R,j=A;function A(){var e=null!==R&&R.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=q.LINE_CAP.BUTT,e.join=q.LINE_JOIN.MITER,e.miterLimit=10,e}var P,X=new Float32Array(3),C={},H=(n(M,P=t.Container),Object.defineProperty(M.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),M.prototype.clone=function(){return this.finishPoly(),new M(this._geometry)},Object.defineProperty(M.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),M.prototype.lineStyle=function(e,t,r,i,n){return void 0===t&&(t=0),void 0===r&&(r=1),void 0===i&&(i=.5),void 0===n&&(n=!1),this.lineTextureStyle(e="number"==typeof(e=void 0===e?null:e)?{width:e,color:t,alpha:r,alignment:i,native:n}:e)},M.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:d.Texture.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:q.LINE_CAP.BUTT,join:q.LINE_JOIN.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var t=0<e.width&&0<e.alpha;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:t},e)):this._lineStyle.reset(),this},M.prototype.startPoly=function(){var e,t;this.currentPath?(e=this.currentPath.points,2<(t=this.currentPath.points.length)&&(this.drawShape(this.currentPath),this.currentPath=new K.Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))):(this.currentPath=new K.Polygon,this.currentPath.closeStroke=!1)},M.prototype.finishPoly=function(){this.currentPath&&(2<this.currentPath.points.length?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},M.prototype.moveTo=function(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this},M.prototype.lineTo=function(e,t){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,i=r[r.length-2],n=r[r.length-1];return i===e&&n===t||r.push(e,t),this},M.prototype._initCurve=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)},M.prototype.quadraticCurveTo=function(e,t,r,i){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),B.curveTo(e,t,r,i,n),this},M.prototype.bezierCurveTo=function(e,t,r,i,n,o){return this._initCurve(),N.curveTo(e,t,r,i,n,o,this.currentPath.points),this},M.prototype.arcTo=function(e,t,r,i,n){this._initCurve(e,t);var o=this.currentPath.points,e=f.curveTo(e,t,r,i,n,o);return e&&(t=e.cx,r=e.cy,i=e.radius,n=e.startAngle,o=e.endAngle,e=e.anticlockwise,this.arc(t,r,i,n,o,e)),this},M.prototype.arc=function(e,t,r,i,n,o){if(i===n)return this;if(!(o=void 0===o?!1:o)&&n<=i?n+=K.PI_2:o&&i<=n&&(i+=K.PI_2),0==n-i)return this;var s,a,u=e+Math.cos(i)*r,l=t+Math.sin(i)*r,h=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;return c?(s=Math.abs(c[c.length-2]-u),a=Math.abs(c[c.length-1]-l),s<h&&a<h||c.push(u,l)):(this.moveTo(u,l),c=this.currentPath.points),f.arc(u,l,e,t,r,i,n,o,c),this},M.prototype.beginFill=function(e,t){return this.beginTextureFill({texture:d.Texture.WHITE,color:e=void 0===e?0:e,alpha:t=void 0===t?1:t})},M.prototype.beginTextureFill=function(e){e=Object.assign({texture:d.Texture.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var t=0<e.alpha;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:t},e)):this._fillStyle.reset(),this},M.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},M.prototype.drawRect=function(e,t,r,i){return this.drawShape(new K.Rectangle(e,t,r,i))},M.prototype.drawRoundedRect=function(e,t,r,i,n){return this.drawShape(new K.RoundedRectangle(e,t,r,i,n))},M.prototype.drawCircle=function(e,t,r){return this.drawShape(new K.Circle(e,t,r))},M.prototype.drawEllipse=function(e,t,r,i){return this.drawShape(new K.Ellipse(e,t,r,i))},M.prototype.drawPolygon=function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var i=!0,n=t[0],n=n.points?(i=n.closeStroke,n.points):Array.isArray(t[0])?t[0]:t,n=new K.Polygon(n);return n.closeStroke=i,this.drawShape(n),this},M.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},M.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},M.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return!(1!==e.length||e[0].shape.type!==K.SHAPES.RECT||e[0].matrix||e[0].holes.length||e[0].lineStyle.visible&&e[0].lineStyle.width)},M.prototype._render=function(e){this.finishPoly();var t=this._geometry,r=e.context.supports.uint32Indices;t.updateBatches(r),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},M.prototype._populateBatches=function(){var e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(var i=0;i<r;i++){var n=e.batches[i],o=n.style.color,s=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),a=new Float32Array(e.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),s={vertexData:s,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*n.start,n.size),uvs:a,_batchRGB:c.hex2rgb(o),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[i]=s}},M.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,r=this.batches.length;t<r;t++){var i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}},M.prototype._renderDirect=function(e){var t=this._resolveDirectShader(e),r=this._geometry,i=this.tint,n=this.worldAlpha,o=t.uniforms,s=r.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(i>>16&255)/255*n,o.tint[1]=(i>>8&255)/255*n,o.tint[2]=(255&i)/255*n,o.tint[3]=n,e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(var a=0,u=s.length;a<u;a++)this._renderDrawCallDirect(e,r.drawCalls[a])},M.prototype._renderDrawCallDirect=function(e,t){for(var r=t.texArray,i=t.type,n=t.size,t=t.start,o=r.count,s=0;s<o;s++)e.texture.bind(r.elements[s],s);e.geometry.draw(i,n,t)},M.prototype._resolveDirectShader=function(e){var t=this.shader,r=this.pluginName;if(!t){if(!C[r]){for(var i=e.plugins.batch.MAX_TEXTURES,n=new Int32Array(i),o=0;o<i;o++)n[o]=o;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new K.Matrix,default:d.UniformGroup.from({uSamplers:n},!0)},e=e.plugins[r]._shader.program;C[r]=new d.Shader(e,s)}t=C[r]}return t},M.prototype._calculateBounds=function(){this.finishPoly();var e,t,r,i=this._geometry;i.graphicsData.length&&(e=(i=i.bounds).minX,t=i.minY,r=i.maxX,i=i.maxY,this._bounds.addFrame(this.transform,e,t,r,i))},M.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,M._TEMP_POINT),this._geometry.containsPoint(M._TEMP_POINT)},M.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=c.hex2rgb(this.tint,X),t=0;t<this.batches.length;t++){var r=this.batches[t],i=r._batchRGB,i=(e[0]*i[0]*255<<16)+(e[1]*i[1]*255<<8)+(0|e[2]*i[2]*255);r._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},M.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var e=this.transform.worldTransform,t=e.a,r=e.b,i=e.c,n=e.d,o=e.tx,s=e.ty,a=this._geometry.points,u=this.vertexData,l=0,h=0;h<a.length;h+=2){var c=a[h],f=a[h+1];u[l++]=t*c+i*f+o,u[l++]=n*f+r*c+s}}},M.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},M.prototype.setMatrix=function(e){return this._matrix=e,this},M.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},M.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},M.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,P.prototype.destroy.call(this,e)},M.nextRoundedRectBehavior=!1,M._TEMP_POINT=new K.Point,M);function M(e){void 0===e&&(e=null);var t=P.call(this)||this;return t.shader=null,t.pluginName="batch",t.currentPath=null,t.batches=[],t.batchTint=-1,t.batchDirty=-1,t.vertexData=null,t._fillStyle=new r,t._lineStyle=new j,t._matrix=null,t._holeMode=!1,t.state=d.State.for2d(),t._geometry=e||new G,t._geometry.refCount++,t._transformID=-1,t.tint=16777215,t.blendMode=m.BLEND_MODES.NORMAL,t}var w={buildPoly:o,buildCircle:l,buildRectangle:e,buildRoundedRectangle:F,buildLine:a,ArcUtils:f,BezierUtils:N,QuadraticUtils:B,BatchPart:k,FILL_COMMANDS:v,BATCH_POOL:g,DRAW_CALL_POOL:b};q.FillStyle=r,q.GRAPHICS_CURVES=Z,q.Graphics=H,q.GraphicsData=x,q.GraphicsGeometry=G,q.LineStyle=j,q.graphicsUtils=w},{"@pixi/constants":21,"@pixi/core":22,"@pixi/display":23,"@pixi/math":67,"@pixi/utils":85}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/math"),n=e("@pixi/ticker"),o=e("@pixi/display"),e=e("@pixi/utils"),s=(Object.defineProperty(a.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),a.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},a.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},a.prototype.reset=function(){this.isPrimary=!1},a);function a(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new i.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};h.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},h.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null};var l=h;function h(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}f.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(f.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"none",{get:function(){return this._flags===f.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"over",{get:function(){return 0!=(this._flags&f.FLAGS.OVER)},set:function(e){this._doSet(f.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"rightDown",{get:function(){return 0!=(this._flags&f.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(f.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"leftDown",{get:function(){return 0!=(this._flags&f.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(f.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),f.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var c=f;function f(e){this._pointerId=e,this._flags=f.FLAGS.NONE}p.prototype.recursiveFindHit=function(e,t,r,i,n){if(!t||!t.visible)return!1;var o=e.data.global,s=!1,a=n=t.interactive||n,u=!0;if(t.hitArea?(i&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:u=i=!1),a=!1):!t._mask||!i||t._mask.containsPoint&&t._mask.containsPoint(o)||(i=!1),u&&t.interactiveChildren&&t.children)for(var l=t.children,h=l.length-1;0<=h;h--){var c=l[h],f=this.recursiveFindHit(e,c,r,i,a);f&&c.parent&&(a=!1,f&&(e.target&&(i=!1),s=!0))}return n&&(i&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(s=!0),t.interactive&&(s&&!e.target&&(e.target=t),r&&r(e,t,!!s))),s},p.prototype.findHit=function(e,t,r,i){this.recursiveFindHit(e,t,r,i,!1)};var d=p;function p(){this._tempPoint=new i.Point}var _,m,y={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0},v=(o.DisplayObject.mixin(y),{target:null,data:{global:null}}),e=(_=e.EventEmitter,u(m=b,e=_),m.prototype=null===e?Object.create(e):(g.prototype=e.prototype,new g),Object.defineProperty(b.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){(this._useSystemTicker=e)?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),b.prototype.hitTest=function(e,t){return v.target=null,v.data.global=e,t=t||this.lastObjectRendered,this.processInteractive(v,t,null,!0),v.target},b.prototype.setTargetElement=function(e,t){void 0===t&&(t=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents(),this.addTickerListener()},b.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(n.Ticker.system.add(this.tickerUpdate,this,n.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},b.prototype.removeTickerListener=function(){this.tickerAdded&&(n.Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},b.prototype.addEvents=function(){var e;!this.eventsAdded&&this.interactionDOMElement&&(e=this.interactionDOMElement.style,globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0)},b.prototype.removeEvents=function(){var e;this.eventsAdded&&this.interactionDOMElement&&(e=this.interactionDOMElement.style,globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1)},b.prototype.tickerUpdate=function(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},b.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)!this.activeInteractionData.hasOwnProperty(e)||(e=this.activeInteractionData[e]).originalEvent&&"touch"!==e.pointerType&&(e=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e),this.processInteractive(e,this.lastObjectRendered,this.processPointerOverOut,!0));this.setCursorMode(this.cursor)}},b.prototype.setCursorMode=function(e){e=e||"default";var t=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(t=!1),this.currentCursorMode!==e){this.currentCursorMode=e;var r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.interactionDOMElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.interactionDOMElement.style,r)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},b.prototype.dispatchEvent=function(e,t,r){r.stopPropagationHint&&e!==r.stopsPropagatingAt||(r.currentTarget=e,r.type=t,e.emit(t,r),e[t]&&e[t](r))},b.prototype.delayDispatchEvent=function(e,t,r){this.delayedEvents.push({displayObject:e,eventString:t,eventData:r})},b.prototype.mapPositionToPoint=function(e,t,r){var i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0},n=1/this.resolution;e.x=(t-i.left)*(this.interactionDOMElement.width/i.width)*n,e.y=(r-i.top)*(this.interactionDOMElement.height/i.height)*n},b.prototype.processInteractive=function(e,t,r,i){var t=this.search.findHit(e,t,r,i),n=this.delayedEvents;if(!n.length)return t;e.stopPropagationHint=!1;var o=n.length;this.delayedEvents=[];for(var s=0;s<o;s++){var a=n[s],u=a.displayObject,l=a.eventString,a=a.eventData;a.stopsPropagatingAt===u&&(a.stopPropagationHint=!0),this.dispatchEvent(u,l,a)}return t},b.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType)for(var t=this.normalizeToPointerData(e),r=(!this.autoPreventDefault||!t[0].isNormalized||!e.cancelable&&"cancelable"in e||e.preventDefault(),t.length),i=0;i<r;i++){var n=t[i],o=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,o);o.data.originalEvent=e,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===n.pointerType?this.emit("touchstart",o):"mouse"!==n.pointerType&&"pen"!==n.pointerType||(o=2===n.button,this.emit(o?"rightdown":"mousedown",this.eventData))}},b.prototype.processPointerDown=function(e,t,r){var i=e.data,n=e.data.identifier;r&&(t.trackedPointers[n]||(t.trackedPointers[n]=new c(n)),this.dispatchEvent(t,"pointerdown",e),"touch"===i.pointerType?this.dispatchEvent(t,"touchstart",e):"mouse"!==i.pointerType&&"pen"!==i.pointerType||((r=2===i.button)?t.trackedPointers[n].rightDown=!0:t.trackedPointers[n].leftDown=!0,this.dispatchEvent(t,r?"rightdown":"mousedown",e)))},b.prototype.onPointerComplete=function(e,t,r){for(var i=this.normalizeToPointerData(e),n=i.length,o=e.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a,u=i[s],l=this.getInteractionDataForPointerId(u),l=this.configureInteractionEventForDOMEvent(this.eventData,u,l);l.data.originalEvent=e,this.processInteractive(l,this.lastObjectRendered,r,t||!o),this.emit(t?"pointercancel":"pointerup"+o,l),"mouse"===u.pointerType||"pen"===u.pointerType?(a=2===u.button,this.emit(a?"rightup"+o:"mouseup"+o,l)):"touch"===u.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(u.pointerId))}},b.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},b.prototype.processPointerCancel=function(e,t){var r=e.data,i=e.data.identifier;void 0!==t.trackedPointers[i]&&(delete t.trackedPointers[i],this.dispatchEvent(t,"pointercancel",e),"touch"===r.pointerType&&this.dispatchEvent(t,"touchcancel",e))},b.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},b.prototype.processPointerUp=function(e,t,r){var i,n=e.data,o=e.data.identifier,s=t.trackedPointers[o],a="touch"===n.pointerType,u="mouse"===n.pointerType||"pen"===n.pointerType,l=!1;u&&(n=2===n.button,i=c.FLAGS,i=n?i.RIGHT_DOWN:i.LEFT_DOWN,i=void 0!==s&&s.flags&i,r?(this.dispatchEvent(t,n?"rightup":"mouseup",e),i&&(this.dispatchEvent(t,n?"rightclick":"click",e),l=!0)):i&&this.dispatchEvent(t,n?"rightupoutside":"mouseupoutside",e),s&&(n?s.rightDown=!1:s.leftDown=!1)),r?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),s&&(u&&!l||this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),s.over=!1))):s&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),s&&s.none&&delete t.trackedPointers[o]},b.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){for(var t=this.normalizeToPointerData(e),r=("mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this._didMove=!0,this.cursor=null),t.length),i=0;i<r;i++){var n=t[i],o=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,o);o.data.originalEvent=e,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===n.pointerType&&this.emit("touchmove",o),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",o)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},b.prototype.processPointerMove=function(e,t,r){var i=e.data,n="touch"===i.pointerType,i="mouse"===i.pointerType||"pen"===i.pointerType;i&&this.processPointerOverOut(e,t,r),this.moveWhenInside&&!r||(this.dispatchEvent(t,"pointermove",e),n&&this.dispatchEvent(t,"touchmove",e),i&&this.dispatchEvent(t,"mousemove",e))},b.prototype.onPointerOut=function(e){var t,r;this.supportsTouchEvents&&"touch"===e.pointerType||("mouse"===(e=this.normalizeToPointerData(e)[0]).pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null)),t=this.getInteractionDataForPointerId(e),(r=this.configureInteractionEventForDOMEvent(this.eventData,e,t)).data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(t.identifier))},b.prototype.processPointerOverOut=function(e,t,r){var i=e.data,n=e.data.identifier,i="mouse"===i.pointerType||"pen"===i.pointerType,o=t.trackedPointers[n];void 0!==(o=r&&!o?t.trackedPointers[n]=new c(n):o)&&(r&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(t,"pointerover",e),i&&this.delayDispatchEvent(t,"mouseover",e)),i&&null===this.cursor&&(this.cursor=t.cursor)):o.over&&(o.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),i&&this.dispatchEvent(t,"mouseout",e),o.none&&delete t.trackedPointers[n]))},b.prototype.onPointerOver=function(e){var e=this.normalizeToPointerData(e)[0],t=this.getInteractionDataForPointerId(e),t=this.configureInteractionEventForDOMEvent(this.eventData,e,t);"mouse"===(t.data.originalEvent=e).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",t),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",t)},b.prototype.getInteractionDataForPointerId=function(e){var t,r=e.pointerId;return 1===r||"mouse"===e.pointerType?t=this.mouse:this.activeInteractionData[r]?t=this.activeInteractionData[r]:((t=this.interactionDataPool.pop()||new s).identifier=r,this.activeInteractionData[r]=t),t.copyEvent(e),t},b.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},b.prototype.configureInteractionEventForDOMEvent=function(e,t,r){return e.data=r,this.mapPositionToPoint(r.global,t.clientX,t.clientY),"touch"===t.pointerType&&(t.globalX=r.global.x,t.globalY=r.global.y),r.originalEvent=t,e.reset(),e},b.prototype.normalizeToPointerData=function(e){var t,r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var i=0,n=e.changedTouches.length;i<n;i++){var o=e.changedTouches[i];void 0===o.button&&(o.button=e.touches.length?1:0),void 0===o.buttons&&(o.buttons=e.touches.length?1:0),void 0===o.isPrimary&&(o.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===o.width&&(o.width=o.radiusX||1),void 0===o.height&&(o.height=o.radiusY||1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="touch"),void 0===o.pointerId&&(o.pointerId=o.identifier||0),void 0===o.pressure&&(o.pressure=o.force||.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),void 0===o.layerX&&(o.layerX=o.offsetX=o.clientX),void 0===o.layerY&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,r.push(o)}else!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)?(void 0===(t=e).isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,r.push(t)):r.push(e);return r},b.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},b);function g(){this.constructor=m}function b(e,t){var r=_.call(this)||this;return t=t||{},r.renderer=e,r.autoPreventDefault=void 0===t.autoPreventDefault||t.autoPreventDefault,r.interactionFrequency=t.interactionFrequency||10,r.mouse=new s,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new l,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in globalThis),r.supportsTouchEvents="ontouchstart"in globalThis,r.supportsPointerEvents=!!globalThis.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new d,r._tempDisplayObject=new o.TemporaryDisplayObject,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===t.useSystemTicker||t.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}r.InteractionData=s,r.InteractionEvent=l,r.InteractionManager=e,r.InteractionTrackingData=c,r.interactiveTarget=y},{"@pixi/display":23,"@pixi/math":67,"@pixi/ticker":84,"@pixi/utils":85}],65:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/display"),n=e("@pixi/core"),o=e("@pixi/math"),s=e("@pixi/utils"),a=e("@pixi/settings");function u(r){if(r&&r.__esModule)return r;var i=Object.create(null);return r&&Object.keys(r).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(r,e),Object.defineProperty(i,e,t.get?t:{enumerable:!0,get:function(){return r[e]}}))}),i.default=r,Object.freeze(i)}function l(t){return function(e){this._activeParentLayer&&this._activeParentLayer!==e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(e._activeLayer=null,t.call(this,e),e._activeLayer=this._activeParentLayer)):this.displayOrder=0)}}function h(e){this._activeParentLayer&&this._activeParentLayer!==e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(e._activeLayer=null,this.containerRenderWebGL(e),e._activeLayer=this._activeParentLayer)):this.displayOrder=0)}function c(){if(void 0===i.DisplayObject.prototype.displayOrder){Object.assign(i.DisplayObject.prototype,{parentLayer:null,_activeParentLayer:null,parentGroup:null,zOrder:0,zIndex:0,updateOrder:0,displayOrder:0,layerableChildren:!0,isLayer:!1});const e=i.Container.prototype;e.containerRenderWebGL=e.render,e.render=h}}function f(e){e.originalRenderWebGL||(e.originalRenderWebGL=e.render,e.render=l(e.render),e.renderCanvas&&(e.originalRenderWebGL=e.renderCanvas,e.renderCanvas=l(e.renderCanvas)))}class d{constructor(){this._tempPoint=new o.Point,this._queue=[[],[]],this._eventDisplayOrder=0,this.worksWithLayers=!0}recursiveFindHit(t,e,r,i,n){if(!e||!e.visible)return 0;let o=0,s=i=e.interactive||i;e.hitArea&&(s=!1),e._activeParentLayer&&(n=!1);const a=e._mask;r<1/0&&a&&a.containsPoint&&!a.containsPoint(t)&&(n=!0),r<1/0&&e.filterArea&&(e.filterArea.contains(t.x,t.y)||(n=!0));var u=e.children;if(e.interactiveChildren&&u)for(let e=u.length-1;0<=e;e--){var l=u[e],h=this.recursiveFindHit(t,l,r,s,n);h&&l.parent&&(r=o=h)}return i&&(n?e.interactive&&this._queueAdd(e,0):(r<e.displayOrder&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(o=e.displayOrder)):e.containsPoint&&e.containsPoint(t)&&(o=e.displayOrder)),e.interactive&&this._queueAdd(e,o===1/0?0:o))),o}findHit(e,t,r,i){var n=e.data.global;this._startInteractionProcess(),this.recursiveFindHit(n,t,i?0:1/0,!1,!1),this._finishInteractionProcess(e,r)}_startInteractionProcess(){this._eventDisplayOrder=1,this._queue||(this._queue=[[],[]]),this._queue[0].length=0,this._queue[1].length=0}_queueAdd(e,t){const r=this._queue;if(t<this._eventDisplayOrder)r[0].push(e);else{if(t>this._eventDisplayOrder){this._eventDisplayOrder=t;var i=r[1];for(let e=0,t=i.length;e<t;e++)r[0].push(i[e]);r[1].length=0}r[1].push(e)}}_finishInteractionProcess(r,i){var n=this._queue;let o=n[0];for(let e=0,t=o.length;e<t;e++)i&&i(r,o[e],!1);for(let e=0,t=(o=n[1]).length;e<t;e++)r.target||(r.target=o[e]),i&&i(r,o[e],!0)}}function p(e){const t=e.prototype;var o;t._oldRender||(Object.assign(t,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder(){return++this._lastDisplayOrder},_oldRender:n.Renderer.prototype.render}),t._oldRender=t.render,t.render=(o=t.render,function(e,t,r,i,n){t&&(t.renderTexture||t.baseTexture)||(this._lastDisplayOrder=0),this._activeLayer=null,e.isStage&&e.updateStage(),this.plugins.interaction&&!this.plugins.interaction.search.worksWithLayers&&(this.plugins.interaction.search=new d),o.call(this,e,t,r,i,n)}))}class _ extends u(s).EventEmitter{constructor(e=0,t=!1){super(),this.useRenderTexture=!1,this.useDoubleBuffer=!1,this.sortPriority=0,this.clearColor=new Float32Array([0,0,0,0]),this.canDrawWithoutLayer=!1,this.canDrawInParentStage=!0,this._activeLayer=null,this._activeStage=null,this._activeChildren=[],this._lastUpdateId=-1,this.zIndex=e||0,this.enableSort=!!t,"function"==typeof t&&this.on("sort",t)}doSort(e,t){if(this.listeners("sort",!0))for(let e=0;e<t.length;e++)this.emit("sort",t[e]);t.sort(_.compareZIndex)}static compareZIndex(e,t){return e.zOrder<t.zOrder?-1:e.zOrder>t.zOrder?1:e.updateOrder-t.updateOrder}clear(){this._activeLayer=null,this._activeStage=null,this._activeChildren.length=0}_resolveChildDisplayObject(e,t){this.check(e),t._activeParentLayer=this._activeLayer,(this._activeLayer||this)._activeChildren.push(t)}_resolveLayer(e,t){this.check(e),this._activeLayer&&_.conflict(),this._activeLayer=t,this._activeStage=e}check(t){if(this._lastUpdateId<_._layerUpdateId)this._lastUpdateId=_._layerUpdateId,this.clear(),this._activeStage=t;else if(this.canDrawInParentStage){let e=this._activeStage;for(;e&&e!==t;)e=e._activeParentStage;null===(this._activeStage=e)&&this.clear()}}static conflict(){_._lastLayerConflict+5e3<Date.now()&&(_._lastLayerConflict=Date.now(),void 0)}}_._layerUpdateId=0,_._lastLayerConflict=0;class m{constructor(e){this.layer=e,this.renderTexture=null,this.doubleBuffer=null,this.currentBufferIndex=0,this._tempRenderTarget=null,this._tempRenderTargetSource=new o.Rectangle,this._tempRenderTargetDestination=new o.Rectangle}init(e){var t=e?e.screen.width:100,r=e?e.screen.height:100,e=e?e.resolution:a.settings.RESOLUTION;this.renderTexture=n.RenderTexture.create({width:t,height:r,resolution:e}),this.layer.group.useDoubleBuffer&&(this.doubleBuffer=[n.RenderTexture.create({width:t,height:r,resolution:e}),n.RenderTexture.create({width:t,height:r,resolution:e})])}getRenderTexture(){return this.renderTexture||this.init(),this.renderTexture}pushTexture(t){var e=t.screen;this.renderTexture||this.init(t);const r=this.renderTexture;var i=this.layer.group;const n=this.doubleBuffer;if(r.width===e.width&&r.height===e.height&&r.baseTexture.resolution===t.resolution||(r.baseTexture.resolution=t.resolution,r.resize(e.width,e.height),n&&(n[0].baseTexture.resolution=t.resolution,n[0].resize(e.width,e.height),n[1].baseTexture.resolution=t.resolution,n[1].resize(e.width,e.height))),n&&(n[0].framebuffer.multisample=r.framebuffer.multisample,n[1].framebuffer.multisample=r.framebuffer.multisample),this._tempRenderTarget=t.renderTexture.current,this._tempRenderTargetSource.copyFrom(t.renderTexture.sourceFrame),this._tempRenderTargetDestination.copyFrom(t.renderTexture.destinationFrame),t.batch.flush(),i.useDoubleBuffer){let e=n[this.currentBufferIndex];e.baseTexture._glTextures[t.CONTEXT_UID]||(t.renderTexture.bind(e,void 0,void 0),t.texture.bind(e),i.clearColor&&t.renderTexture.clear(i.clearColor)),t.texture.unbind(r.baseTexture),r.baseTexture._glTextures=e.baseTexture._glTextures,r.baseTexture.framebuffer=e.baseTexture.framebuffer,e=n[1-this.currentBufferIndex],t.renderTexture.bind(e,void 0,void 0)}else t.renderTexture.bind(r,void 0,void 0);i.clearColor&&t.renderTexture.clear(i.clearColor);const o=t.filter.defaultFilterStack;1<o.length&&(o[o.length-1].renderTexture=t.renderTexture.current)}popTexture(e){e.batch.flush(),e.framebuffer.blit();const t=e.filter.defaultFilterStack,r=(1<t.length&&(t[t.length-1].renderTexture=this._tempRenderTarget),e.renderTexture.bind(this._tempRenderTarget,this._tempRenderTargetSource,this._tempRenderTargetDestination),this._tempRenderTarget=null,this.renderTexture);var i=this.layer.group,n=this.doubleBuffer;i.useDoubleBuffer&&(e.texture.unbind(r.baseTexture),this.currentBufferIndex=1-this.currentBufferIndex,i=n[this.currentBufferIndex],r.baseTexture._glTextures=i.baseTexture._glTextures,r.baseTexture.framebuffer=i.baseTexture.framebuffer)}destroy(){this.renderTexture&&(this.renderTexture.destroy(),this.doubleBuffer&&(this.doubleBuffer[0].destroy(!0),this.doubleBuffer[1].destroy(!0)))}}class y extends i.Container{constructor(e=null){super(),this.isLayer=!0,this.group=null,this._activeChildren=[],this._tempChildren=null,this._activeStageParent=null,this._sortedChildren=[],this._tempLayerParent=null,this.insertChildrenBeforeActive=!0,this.insertChildrenAfterActive=!0,e?(this.group=e,this.zIndex=e.zIndex):this.group=new _(0,!1),this._tempChildren=this.children}get useRenderTexture(){return this.group.useRenderTexture}set useRenderTexture(e){this.group.useRenderTexture=e}get useDoubleBuffer(){return this.group.useDoubleBuffer}set useDoubleBuffer(e){this.group.useDoubleBuffer=e}get clearColor(){return this.group.clearColor}set clearColor(e){this.group.clearColor=e}get sortPriority(){return this.group.sortPriority}set sortPriority(e){this.group.sortPriority=e}getRenderTexture(){return this.textureCache||(this.textureCache=new m(this)),this.textureCache.getRenderTexture()}doSort(){this.group.doSort(this,this._sortedChildren)}destroy(e){this.textureCache&&(this.textureCache.destroy(),this.textureCache=null),super.destroy(e)}render(e){this.prerender(e)&&(this.group.useRenderTexture&&(this.textureCache||(this.textureCache=new m(this)),this.textureCache.pushTexture(e)),this.containerRenderWebGL(e),this.postrender(e),this.group.useRenderTexture&&this.textureCache.popTexture(e))}layerRenderCanvas(e){this.prerender(e)&&(this.containerRenderCanvas(e),this.postrender(e))}_onBeginLayerSubtreeTraversal(e){const t=this._activeChildren,r=(this._activeStageParent=e,this.group._resolveLayer(e,this),this.group._activeChildren);for(let e=t.length=0;e<r.length;e++)r[e]._activeParentLayer=this,t.push(r[e]);r.length=0}_onEndLayerSubtreeTraversal(){var t=this.children,r=this._activeChildren;const i=this._sortedChildren;for(let e=0;e<r.length;e++)this.emit("display",r[e]);if(i.length=0,this.insertChildrenBeforeActive)for(let e=0;e<t.length;e++)i.push(t[e]);for(let e=0;e<r.length;e++)i.push(r[e]);if(!this.insertChildrenBeforeActive&&this.insertChildrenAfterActive)for(let e=0;e<t.length;e++)i.push(t[e]);this.group.enableSort&&this.doSort()}prerender(e){return(!this._activeParentLayer||this._activeParentLayer==e._activeLayer)&&(this.visible?(this.displayOrder=e.incDisplayOrder(),!(this.worldAlpha<=0||!this.renderable)&&(this.children!==this._sortedChildren&&this._tempChildren!==this.children&&(this._tempChildren=this.children),this._boundsID++,this.children=this._sortedChildren,this._tempLayerParent=e._activeLayer,e._activeLayer=this,!0)):(this.displayOrder=0,!1))}postrender(e){this.children=this._tempChildren,e._activeLayer=this._tempLayerParent,this._tempLayerParent=null}}y.prototype.renderCanvas=y.prototype.layerRenderCanvas;class v extends y{constructor(){super(...arguments),this.isStage=!0,this._tempGroups=[],this._activeLayers=[],this._activeParentStage=null}clear(){this._activeLayers.length=0,this._tempGroups.length=0}destroy(e){this.clear(),super.destroy(e)}updateStage(){this._activeParentStage=null,_._layerUpdateId++,this._updateStageInner()}updateAsChildStage(e){this._activeParentStage=e,v._updateOrderCounter=0,this._updateStageInner()}_updateStageInner(){this.clear(),this._addRecursive(this);var t=this._activeLayers;for(let e=0;e<t.length;e++){const i=t[e];if(i.group.sortPriority){i._onEndLayerSubtreeTraversal();var r=i._sortedChildren;for(let e=0;e<r.length;e++)this._addRecursiveChildren(r[e])}}for(let e=0;e<t.length;e++){const n=t[e];n.group.sortPriority||n._onEndLayerSubtreeTraversal()}}_addRecursive(t){if(t.visible){if(t.isLayer){const i=t;this._activeLayers.push(i),i._onBeginLayerSubtreeTraversal(this)}if(t!==this&&t.isStage){const e=t;void e.updateAsChildStage(this)}else{t._activeParentLayer=null;let e=t.parentGroup;e&&e._resolveChildDisplayObject(this,t);const i=t.parentLayer;if(i&&(e=i.group)._resolveChildDisplayObject(this,t),t.updateOrder=++v._updateOrderCounter,!(t.alpha<=0||!t.renderable||!t.layerableChildren||e&&e.sortPriority)){var r=t.children;if(r&&r.length)for(let e=0;e<r.length;e++)this._addRecursive(r[e])}}}}_addRecursiveChildren(e){if(!(e.alpha<=0)&&e.renderable&&e.layerableChildren){var t=e.children;if(t&&t.length)for(let e=0;e<t.length;e++)this._addRecursive(t[e])}}}v._updateOrderCounter=0,c(),p(n.Renderer),r.Group=_,r.Layer=y,r.LayerTextureCache=m,r.Stage=v,r.applyCanvasMixin=function(e){if(e){p(e);const t=i.Container.prototype;t.containerRenderCanvas||(t.containerRenderCanvas=t.renderCanvas,t.renderCanvas=l(t.renderCanvas))}else void 0},r.applyContainerRenderMixin=f,r.applyDisplayMixin=c,r.applyParticleMixin=function(e){e.prototype.layerableChildren=!1,f(e.prototype)},r.applyRendererMixin=p},{"@pixi/core":22,"@pixi/display":23,"@pixi/math":67,"@pixi/settings":77,"@pixi/utils":85}],66:[function(e,t,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=e("@pixi/core"),r=(i.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},i);function i(e,t,r){void 0===t&&(t=!1),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}function n(e,t){return e._head?(e._tail._next=t)._prev=e._tail:e._head=t,(e._tail=t)._owner=e,t}o.prototype.handlers=function(e){var t=this._head;if(e=void 0===e?!1:e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r},o.prototype.has=function(e){if(e instanceof r)return e._owner===this;throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.")},o.prototype.dispatch=function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,t),i=i._next;return!0},o.prototype.add=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return n(this,new r(e,!1,t))},o.prototype.once=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return n(this,new r(e,!0,t))},o.prototype.detach=function(e){if(e instanceof r)return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this;throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.")},o.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this};var a=o;function o(){this._head=this._tail=void 0}function l(e,t){for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[(t=t||{}).strictMode?"strict":"loose"].exec(e),n={},o=14;o--;)n[i.key[o]]=r[o]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,function(e,t,r){t&&(n[i.q.name][t]=r)}),n}var h=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest),c=null;function f(){}function d(e,t,r){(t=t&&0===t.indexOf(".")?t.substring(1):t)&&(e[t]=r)}function p(e){return e.toString().replace("object ","")}function _(e,t,r){if(this._dequeue=f,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(_.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=_.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=f,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new a,this.onProgress=new a,this.onComplete=new a,this.onAfterMiddleware=new a}function m(){}u.LoaderResource=(_.setExtensionLoadType=function(e,t){d(_._loadTypeMap,e,t)},_.setExtensionXhrType=function(e,t){d(_._xhrTypeMap,e,t)},Object.defineProperty(_.prototype,"isDataUrl",{get:function(){return this._hasFlag(_.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isComplete",{get:function(){return this._hasFlag(_.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isLoading",{get:function(){return this._hasFlag(_.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),_.prototype.complete=function(){this._clearEvents(),this._finish()},_.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=_.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},_.prototype.load=function(e){var t=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(t)},1);else switch(e&&this.onComplete.once(e),this._setFlag(_.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case _.LOAD_TYPE.IMAGE:this.type=_.TYPE.IMAGE,this._loadElement("image");break;case _.LOAD_TYPE.AUDIO:this.type=_.TYPE.AUDIO,this._loadSourceElement("audio");break;case _.LOAD_TYPE.VIDEO:this.type=_.TYPE.VIDEO,this._loadSourceElement("video");break;default:_.LOAD_TYPE.XHR;h&&this.crossOrigin?this._loadXdr():this._loadXhr()}},_.prototype._hasFlag=function(e){return 0!=(this._flags&e)},_.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},_.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},_.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(_.STATUS_FLAGS.COMPLETE,!0),this._setFlag(_.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},_.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},_.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(e),null===this.data)this.abort("Unsupported element: "+e);else{if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else{t=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}},_.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===_.XHR_RESPONSE_TYPE.JSON||this.xhrType===_.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=_.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},_.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},_.prototype._createSource=function(e,t,r){r=r||e+"/"+this._getExtension(t);e=document.createElement("source");return e.src=t,e.type=r,e},_.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},_.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},_.prototype._onTimeout=function(){this.abort("Load timed out.")},_.prototype._xhrOnError=function(){var e=this.xhr;this.abort(p(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},_.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(p(e)+" Request timed out.")},_.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(p(e)+" Request was aborted by the user.")},_.prototype._xhrOnLoad=function(){var e,t,r=this.xhr,i="",n=void 0===r.status?200:r.status;if(""!==r.responseType&&"text"!==r.responseType&&void 0!==r.responseType||(i=r.responseText),0===n&&(0<i.length||r.responseType===_.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2!=(n/100|0))this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL);else{if(this.xhrType===_.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=_.TYPE.TEXT;else if(this.xhrType===_.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=_.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===_.XHR_RESPONSE_TYPE.DOCUMENT)try{globalThis.DOMParser?(e=new DOMParser,this.data=e.parseFromString(i,"text/xml")):((t=document.createElement("div")).innerHTML=i,this.data=t),this.type=_.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=r.response||i;this.complete()}},_.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,(c=c||document.createElement("a")).href=e;var e=l(c.href,{strictMode:!0}),r=!e.port&&""===t.port||e.port===t.port,i=e.protocol?e.protocol+":":"";return e.host===t.hostname&&r&&i===t.protocol?"":"anonymous"},_.prototype._determineXhrType=function(){return _._xhrTypeMap[this.extension]||_.XHR_RESPONSE_TYPE.TEXT},_.prototype._determineLoadType=function(){return _._loadTypeMap[this.extension]||_.LOAD_TYPE.XHR},_.prototype._getExtension=function(e){void 0===e&&(e=this.url);var t,r;return(this.isDataUrl?(r=e.indexOf("/"),e.substring(r+1,e.indexOf(";",r))):(r=e.indexOf("?"),t=e.indexOf("#"),r=Math.min(-1<r?r:e.length,-1<t?t:e.length),(e=e.substring(0,r)).substring(e.lastIndexOf(".")+1))).toLowerCase()},_.prototype._getMimeFromXhrType=function(e){switch(e){case _.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case _.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case _.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case _.XHR_RESPONSE_TYPE.JSON:return"application/json";case _.XHR_RESPONSE_TYPE.DEFAULT:case _.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},_),e=u.LoaderResource||(u.LoaderResource={}),(E=e.STATUS_FLAGS||(e.STATUS_FLAGS={}))[E.NONE=0]="NONE",E[E.DATA_URL=1]="DATA_URL",E[E.COMPLETE=2]="COMPLETE",E[E.LOADING=4]="LOADING",(E=e.TYPE||(e.TYPE={}))[E.UNKNOWN=0]="UNKNOWN",E[E.JSON=1]="JSON",E[E.XML=2]="XML",E[E.IMAGE=3]="IMAGE",E[E.AUDIO=4]="AUDIO",E[E.VIDEO=5]="VIDEO",E[E.TEXT=6]="TEXT",(E=e.LOAD_TYPE||(e.LOAD_TYPE={}))[E.XHR=1]="XHR",E[E.IMAGE=2]="IMAGE",E[E.AUDIO=3]="AUDIO",E[E.VIDEO=4]="VIDEO",(E=e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})).DEFAULT="text",E.BUFFER="arraybuffer",E.BLOB="blob",E.DOCUMENT="document",E.JSON="json",E.TEXT="text",e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var y=function(e,t){this.data=e,this.callback=t},v=(g.prototype._next=function(i){var n=this;return function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];--n.workers,i.callback.apply(i,t),null!=t[0]&&n.error(t[0],i.data),n.workers<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}},g.prototype.push=function(e,t){this._insert(e,!1,t)},g.prototype.kill=function(){this.workers=0,this.drain=m,this.started=!1,this._tasks=[]},g.prototype.unshift=function(e,t){this._insert(e,!0,t)},g.prototype.length=function(){return this._tasks.length},g.prototype.running=function(){return this.workers},g.prototype.idle=function(){return this._tasks.length+this.workers===0},g.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},g.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},g.eachSeries=function(r,i,n,o){var s=0,a=r.length;!function e(t){t||s===a?n&&n(t):o?setTimeout(function(){i(r[s++],e)},1):i(r[s++],e)}()},g.queue=function(e,t){return new g(e,t)},g);function g(e,t){var i=this;if(void 0===t&&(t=1),this.workers=0,this.saturated=m,this.unsaturated=m,this.empty=m,this.drain=m,this.error=m,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(e,t,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");i.started=!0,null==e&&i.idle()?setTimeout(function(){return i.drain()},1):(e=new y(e,"function"==typeof r?r:m),t?i._tasks.unshift(e):i._tasks.push(e),setTimeout(i.process,1))},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var e=i._tasks.shift();0===i._tasks.length&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(e.data,function(n){return function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];if(null===n)throw new Error("Callback was already called.");var i=n;n=null,i.apply(this,t)}}(i._next(e)))}},this._worker=e,0===t)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}var b=/(#[\w-]+)?$/,x=(T.prototype._add=function(e,t,r,i){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new u.LoaderResource(e,t,r),"function"==typeof i&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var n=r.parentResource,o=[],s=0;s<n.children.length;++s)n.children[s].isComplete||o.push(n.children[s]);var a=n.progressChunk*(o.length+1)/(o.length+2);n.children.push(this.resources[e]),n.progressChunk=a;for(s=0;s<o.length;++s)o[s].progressChunk=a;this.resources[e].progressChunk=a}return this._queue.push(this.resources[e]),this},T.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},T.prototype.use=function(e){return this._afterMiddleware.push(e),this},T.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){e=this.resources[e];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},T.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},Object.defineProperty(T.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),T.prototype._prepareUrl=function(e){var t=l(e,{strictMode:!0});return t=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString&&(e=b.exec(t)[0],-1!==(t=t.slice(0,t.length-e.length)).indexOf("?")?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=e),t},T.prototype._loadResource=function(r,e){var i=this;r._dequeue=e,v.eachSeries(this._beforeMiddleware,function(e,t){e.call(i,r,function(){t(r.isComplete?{}:null)})},function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())},!0)},T.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},T.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},T.prototype._onLoad=function(r){var i=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),v.eachSeries(this._afterMiddleware,function(e,t){e.call(i,r,t)},function(){r.onAfterMiddleware.dispatch(r),i.progress=Math.min(100,i.progress+r.progressChunk),i.onProgress.dispatch(i,r),r.error?i.onError.dispatch(r.error,i,r):i.onLoad.dispatch(i,r),i._resourcesParsing.splice(i._resourcesParsing.indexOf(r),1),i._queue.idle()&&0===i._resourcesParsing.length&&i._onComplete()},!0)},T.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(T,"shared",{get:function(){var e=T._shared;return e||((e=new T)._protected=!0,T._shared=e),e},enumerable:!1,configurable:!0}),T.registerPlugin=function(e){return T._plugins.push(e),e.add&&e.add(),T},T._plugins=[],T);function T(e,t){var r=this;void 0===e&&(e=""),void 0===t&&(t=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this._queue=v.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new a,this.onError=new a,this.onLoad=new a,this.onStart=new a,this.onComplete=new a;for(var i=0;i<T._plugins.length;++i){var n=T._plugins[i],o=n.pre,n=n.use;o&&this.pre(o),n&&this.use(n)}this._protected=!1}x.prototype.add=function(e,t,r,i){if(Array.isArray(e)){for(var n=0;n<e.length;++n)this.add(e[n]);return this}if("object"==typeof e&&(r=e,i=t||r.callback||r.onComplete,t=r.url,e=r.name||r.key||r.url),"string"!=typeof t&&(i=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");return"function"==typeof r&&(i=r,r=null),this._add(e,t,r,i)};O.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?x.shared:new x},O.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};var E=O;function O(){}S.add=function(){u.LoaderResource.setExtensionLoadType("svg",u.LoaderResource.LOAD_TYPE.XHR),u.LoaderResource.setExtensionXhrType("svg",u.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},S.use=function(t,r){var e,i,n,o;!t.data||t.type!==u.LoaderResource.TYPE.IMAGE&&"svg"!==t.extension?r():(e=t.data,i=t.url,n=t.name,o=t.metadata,s.Texture.fromLoader(e,i,n,o).then(function(e){t.texture=e,r()}).catch(r))};e=S;function S(){}var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var A=self.URL||self.webkitURL;x.registerPlugin({use:function(e,t){if(e.data){if(e.xhr&&e.xhrType===u.LoaderResource.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof e.data){var r;if(0===e.data.type.indexOf("image"))return r=A.createObjectURL(e.data),e.blob=e.data,e.data=new Image,e.data.src=r,e.type=u.LoaderResource.TYPE.IMAGE,void(e.data.onload=function(){A.revokeObjectURL(r),e.data.onload=null,t()})}else{var i=e.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return e.data=new Image,e.data.src="data:"+i+";base64,"+function(e){for(var t="",r=0;r<e.length;){for(var i=[0,0,0],n=[0,0,0,0],o=0;o<i.length;++o)r<e.length?i[o]=255&e.charCodeAt(r++):i[o]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(e.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(o=0;o<n.length;++o)t+=R.charAt(n[o])}return t}(e.xhr.responseText),e.type=u.LoaderResource.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}}),x.registerPlugin(e),u.AppLoaderPlugin=E,u.Loader=x,u.TextureLoader=e},{"@pixi/core":22}],67:[function(N,B,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=2*Math.PI,e=180/Math.PI,t=Math.PI/180,n=((s=a.SHAPES||(a.SHAPES={}))[s.POLY=0]="POLY",s[s.RECT=1]="RECT",s[s.CIRC=2]="CIRC",s[s.ELIP=3]="ELIP",s[s.RREC=4]="RREC",r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},r.prototype.copyTo=function(e){return e.set(this.x,this.y),e},r.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},r.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r);function r(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}var p=[new n,new n,new n,new n],i=(Object.defineProperty(o.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(o,"EMPTY",{get:function(){return new o(0,0,0,0)},enumerable:!1,configurable:!0}),o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height)},o.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},o.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},o.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},o.prototype.intersects=function(e,t){if(!t)return r=(this.x<e.x?e:this).x,!((this.right>e.right?e:this).right<=r)&&(this.y<e.y?e:this).y<(this.bottom>e.bottom?e:this).bottom;var r=this.left,i=this.right,n=this.top,o=this.bottom;if(i<=r||o<=n)return!1;var s=p[0].set(e.left,e.top),a=p[1].set(e.left,e.bottom),u=p[2].set(e.right,e.top),e=p[3].set(e.right,e.bottom);if(u.x<=s.x||a.y<=s.y)return!1;var l=Math.sign(t.a*t.d-t.b*t.c);if(0===l)return!1;if(t.apply(s,s),t.apply(a,a),t.apply(u,u),t.apply(e,e),Math.max(s.x,a.x,u.x,e.x)<=r||Math.min(s.x,a.x,u.x,e.x)>=i||Math.max(s.y,a.y,u.y,e.y)<=n||Math.min(s.y,a.y,u.y,e.y)>=o)return!1;var t=l*(a.y-s.y),a=l*(s.x-a.x),h=t*r+a*n,c=t*i+a*n,f=t*r+a*o,d=t*i+a*o;if(Math.max(h,c,f,d)<=t*s.x+a*s.y||Math.min(h,c,f,d)>=t*e.x+a*e.y)return!1;h=l*(s.y-u.y),c=l*(u.x-s.x),f=h*r+c*n,d=h*i+c*n,t=h*r+c*o,a=h*i+c*o;return!(Math.max(f,d,t,a)<=h*s.x+c*s.y||Math.min(f,d,t,a)>=h*e.x+c*e.y)},o.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},o.prototype.fit=function(e){var t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),e=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=i,this.height=Math.max(e-i,0),this},o.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var r=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=i-this.y,this},o.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),e=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=i,this.height=e-i,this},o.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},o);function o(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(i),this.type=a.SHAPES.RECT}u.prototype.clone=function(){return new u(this.x,this.y,this.radius)},u.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,e=this.x-e,t=this.y-t;return(e*=e)+(t*=t)<=r},u.prototype.getBounds=function(){return new i(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},u.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"};var s=u;function u(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.x=e=void 0===e?0:e,this.y=t,this.radius=r,this.type=a.SHAPES.CIRC}c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height)},c.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;e=(e-this.x)/this.width,t=(t-this.y)/this.height;return(e*=e)+(t*=t)<=1},c.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)},c.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"};var h=c;function c(e,t,r,i){void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=e=void 0===e?0:e,this.y=t,this.width=r,this.height=i,this.type=a.SHAPES.ELIP}d.prototype.clone=function(){var e=new d(this.points.slice());return e.closeStroke=this.closeStroke,e},d.prototype.contains=function(e,t){for(var r=!1,i=this.points.length/2,n=0,o=i-1;n<i;o=n++){var s=this.points[2*n],a=this.points[2*n+1],u=this.points[2*o],l=this.points[2*o+1];t<a!=t<l&&e<(t-a)/(l-a)*(u-s)+s&&(r=!r)}return r},d.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(e,t){return e+", "+t},"")+"]"};var f=d;function d(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var i=Array.isArray(t[0])?t[0]:t;if("number"!=typeof i[0]){for(var n=[],o=0,s=i.length;o<s;o++)n.push(i[o].x,i[o].y);i=n}this.points=i,this.type=a.SHAPES.POLY,this.closeStroke=!0}m.prototype.clone=function(){return new m(this.x,this.y,this.width,this.height,this.radius)},m.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;var i=e-(this.x+r),n=t-(this.y+r),o=r*r;if(i*i+n*n<=o)return!0;if((i=e-(this.x+this.width-r))*i+n*n<=o)return!0;if(i*i+(n=t-(this.y+this.height-r))*n<=o)return!0;if((i=e-(this.x+r))*i+n*n<=o)return!0}return!1},m.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"};var _=m;function m(e,t,r,i,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=e=void 0===e?0:e,this.y=t,this.width=r,this.height=i,this.radius=n,this.type=a.SHAPES.RREC}v.prototype.clone=function(e,t){return new v(e=void 0===e?this.cb:e,t=void 0===t?this.scope:t,this._x,this._y)},v.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this},v.prototype.copyFrom=function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},v.prototype.copyTo=function(e){return e.set(this._x,this._y),e},v.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},v.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(v.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0});var y=v;function v(e,t,r,i){void 0===i&&(i=0),this._x=r=void 0===r?0:r,this._y=i,this.cb=e,this.scope=t}b.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},b.prototype.set=function(e,t,r,i,n,o){return this.a=e,this.b=t,this.c=r,this.d=i,this.tx=n,this.ty=o,this},b.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));t=t||this.array;return e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0),t[8]=1,t},b.prototype.apply=function(e,t){t=t||new n;var r=e.x,e=e.y;return t.x=this.a*r+this.c*e+this.tx,t.y=this.b*r+this.d*e+this.ty,t},b.prototype.applyInverse=function(e,t){t=t||new n;var r=1/(this.a*this.d+this.c*-this.b),i=e.x,e=e.y;return t.x=this.d*r*i+-this.c*r*e+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*e+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,t},b.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},b.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},b.prototype.rotate=function(e){var t=Math.cos(e),e=Math.sin(e),r=this.a,i=this.c,n=this.tx;return this.a=r*t-this.b*e,this.b=r*e+this.b*t,this.c=i*t-this.d*e,this.d=i*e+this.d*t,this.tx=n*t-this.ty*e,this.ty=n*e+this.ty*t,this},b.prototype.append=function(e){var t=this.a,r=this.b,i=this.c,n=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*n,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*n,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*n+this.ty,this},b.prototype.setTransform=function(e,t,r,i,n,o,s,a,u){return this.a=Math.cos(s+u)*n,this.b=Math.sin(s+u)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=e-(r*this.a+i*this.c),this.ty=t-(r*this.b+i*this.d),this},b.prototype.prepend=function(e){var t,r,i=this.tx;return 1===e.a&&0===e.b&&0===e.c&&1===e.d||(t=this.a,r=this.c,this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d),this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty,this},b.prototype.decompose=function(e){var t=this.a,r=this.b,i=this.c,n=this.d,o=e.pivot,s=-Math.atan2(-i,n),a=Math.atan2(r,t),u=Math.abs(s+a);return u<1e-5||Math.abs(l-u)<1e-5?(e.rotation=a,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=a),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(i*i+n*n),e.position.x=this.tx+(o.x*t+o.y*i),e.position.y=this.ty+(o.x*r+o.y*n),e},b.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,i=this.d,n=this.tx,o=e*i-t*r;return this.a=i/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*n)/o,this.ty=-(e*this.ty-t*n)/o,this},b.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},b.prototype.clone=function(){var e=new b;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},b.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},b.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},b.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(b,"IDENTITY",{get:function(){return new b},enumerable:!1,configurable:!0}),Object.defineProperty(b,"TEMP_MATRIX",{get:function(){return new b},enumerable:!1,configurable:!0});var g=b;function b(e,t,r,i,n,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),this.array=null,this.a=e,this.b=t,this.c=r,this.d=i,this.tx=n,this.ty=o}var x=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],T=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],E=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],O=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],S=[],R=[],A=Math.sign;for(var P=0;P<16;P++){var C=[];S.push(C);for(var M=0;M<16;M++)for(var w=A(x[P]*x[M]+E[P]*T[M]),k=A(T[P]*x[M]+O[P]*T[M]),U=A(x[P]*E[M]+E[P]*O[M]),G=A(T[P]*E[M]+O[P]*O[M]),I=0;I<16;I++)if(x[I]===w&&T[I]===k&&E[I]===U&&O[I]===G){C.push(I);break}}for(P=0;P<16;P++){var D=new g;D.set(x[P],T[P],E[P],O[P],0,0),R.push(D)}var L={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return x[e]},uY:function(e){return T[e]},vX:function(e){return E[e]},vY:function(e){return O[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return S[e][t]},sub:function(e,t){return S[e][L.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?0<=t?L.S:L.N:2*Math.abs(t)<=Math.abs(e)?0<e?L.E:L.W:0<t?0<e?L.SE:L.SW:0<e?L.NE:L.NW},matrixAppendRotationInv:function(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=0);t=R[L.inv(t)];t.tx=r,t.ty=i,e.append(t)}},j=(F.prototype.onChange=function(){this._localID++},F.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},F.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},F.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},F.prototype.updateTransform=function(e){var t,r,i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID&&(t=e.worldTransform,(r=this.worldTransform).a=i.a*t.a+i.b*t.c,r.b=i.a*t.b+i.b*t.d,r.c=i.c*t.a+i.d*t.c,r.d=i.c*t.b+i.d*t.d,r.tx=i.tx*t.a+i.ty*t.c+t.tx,r.ty=i.tx*t.b+i.ty*t.d+t.ty,this._parentID=e._worldID,this._worldID++)},F.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(F.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),F.IDENTITY=new F,F);function F(){this.worldTransform=new g,this.localTransform=new g,this.position=new y(this.onChange,this,0,0),this.scale=new y(this.onChange,this,1,1),this.pivot=new y(this.onChange,this,0,0),this.skew=new y(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}a.Circle=s,a.DEG_TO_RAD=t,a.Ellipse=h,a.Matrix=g,a.ObservablePoint=y,a.PI_2=l,a.Point=n,a.Polygon=f,a.RAD_TO_DEG=e,a.Rectangle=i,a.RoundedRectangle=_,a.Transform=j,a.groupD8=L},{}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e("@pixi/mesh"),o=e("@pixi/constants"),a=e("@pixi/core"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}n(h,u=s.MeshGeometry),h.prototype.build=function(){for(var e=this.segWidth*this.segHeight,t=[],r=[],i=[],n=this.segWidth-1,o=this.segHeight-1,s=this.width/n,a=this.height/o,u=0;u<e;u++){var l=u%this.segWidth,h=u/this.segWidth|0;t.push(l*s,h*a),r.push(l/n,h/o)}for(var c=n*o,u=0;u<c;u++){var f=u%n,d=u/n|0,p=d*this.segWidth+f,_=d*this.segWidth+f+1,m=(1+d)*this.segWidth+f,d=(1+d)*this.segWidth+f+1;i.push(p,_,m,_,d,m)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()};var u,l=h;function h(e,t,r,i){void 0===e&&(e=100),void 0===t&&(t=100),void 0===r&&(r=10),void 0===i&&(i=10);var n=u.call(this)||this;return n.segWidth=r,n.segHeight=i,n.width=e,n.height=t,n.build(),n}n(d,c=s.MeshGeometry),Object.defineProperty(d.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),d.prototype.build=function(){var e=this.points;if(e){var t=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(!(e.length<1)){t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),r.data=new Float32Array(4*e.length),i.data=new Uint16Array(6*(e.length-1)));for(var n=r.data,o=i.data,s=(n[0]=0,n[1]=0,n[2]=0,n[3]=1,0),a=e[0],u=this._width*this.textureScale,l=e.length,h=0;h<l;h++){var c,f,d=4*h;0<this.textureScale?(f=a.x-e[h].x,c=a.y-e[h].y,f=Math.sqrt(f*f+c*c),a=e[h],s+=f/u):s=h/(l-1),n[d]=s,n[d+1]=0,n[d+2]=s,n[d+3]=1}for(var p=0,h=0;h<l-1;h++){d=2*h;o[p++]=d,o[p++]=d+1,o[p++]=d+2,o[p++]=d+2,o[p++]=d+1,o[p++]=d+3}r.update(),i.update(),this.updateVertices()}}},d.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var t=e[0],r=0,i=0,n=this.buffers[0].data,o=e.length,s=0;s<o;s++){var a=e[s],u=4*s,i=-((l=s<e.length-1?e[s+1]:a).x-t.x),r=l.y-t.y,l=Math.sqrt(r*r+i*i),h=0<this.textureScale?this.textureScale*this._width/2:this._width/2;i=i/l*h,n[u]=a.x+(r=r/l*h),n[1+u]=a.y+i,n[2+u]=a.x-r,n[3+u]=a.y-i,t=a}this.buffers[0].update()}},d.prototype.update=function(){0<this.textureScale?this.build():this.updateVertices()};var c,f=d;function d(e,t,r){void 0===e&&(e=200),void 0===r&&(r=0);var i=c.call(this,new Float32Array(4*t.length),new Float32Array(4*t.length),new Uint16Array(6*(t.length-1)))||this;return i.points=t,i._width=e,i.textureScale=r,i.build(),i}n(_,p=s.Mesh),_.prototype._render=function(e){var t=this.geometry;!this.autoUpdate&&t._width===this.shader.texture.height||(t._width=this.shader.texture.height,t.update()),p.prototype._render.call(this,e)};var p,e=_;function _(e,t,r){var i=this,t=new f(e.height,t,r=void 0===r?0:r),n=new s.MeshMaterial(e);return 0<r&&(e.baseTexture.wrapMode=o.WRAP_MODES.REPEAT),(i=p.call(this,t,n)||this).autoUpdate=!0,i}n(v,m=s.Mesh),v.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,t=this.shader.texture,r=t.width,t=t.height;!this.autoResize||e.width===r&&e.height===t||(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(v.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),v.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),m.prototype._render.call(this,e)},v.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),m.prototype.destroy.call(this,e)};var m,y=v;function v(e,t,r){var i=this,t=new l(e.width,e.height,t,r),r=new s.MeshMaterial(a.Texture.WHITE);return(i=m.call(this,t,r)||this).texture=e,i.autoResize=!0,i}n(x,g=s.Mesh),Object.defineProperty(x.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),x.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),g.prototype._render.call(this,e)};var g,b=x;function x(e,t,r,i,n){void 0===e&&(e=a.Texture.EMPTY);var o=this,t=new s.MeshGeometry(t,r,i),r=(t.getBuffer("aVertexPosition").static=!1,new s.MeshMaterial(e));return(o=g.call(this,t,r,null,n)||this).autoUpdate=!0,o}n(O,T=y),O.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(O.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),O.prototype.updateHorizontalVertices=function(){var e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height},O.prototype.updateVerticalVertices=function(){var e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width},O.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,e=this._width>e?1:this._width/e,t=this._topHeight+this._bottomHeight,t=this._height>t?1:this._height/t;return Math.min(e,t)},Object.defineProperty(O.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),O.prototype._refresh=function(){var e=this.texture,t=this.geometry.buffers[1].data,e=(this._origWidth=e.orig.width,this._origHeight=e.orig.height,1/this._origWidth),r=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=e*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-e*this._rightWidth,t[9]=t[11]=t[13]=t[15]=r*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()};var T,E=O;function O(e,t,r,i,n){void 0===t&&(t=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===n&&(n=10);var o=T.call(this,a.Texture.WHITE,4,4)||this;return o._origWidth=e.orig.width,o._origHeight=e.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=t,o._rightWidth=i,o._topHeight=r,o._bottomHeight=n,o.texture=e,o}r.NineSlicePlane=E,r.PlaneGeometry=l,r.RopeGeometry=f,r.SimpleMesh=b,r.SimplePlane=y,r.SimpleRope=e},{"@pixi/constants":21,"@pixi/core":22,"@pixi/mesh":69}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("@pixi/core"),n=e("@pixi/math"),s=e("@pixi/constants"),i=e("@pixi/display"),p=e("@pixi/settings"),a=e("@pixi/utils"),u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function l(e,t){function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}c.prototype.update=function(e){!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID||(this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID,e=this.uvBuffer.data,this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++)};var h=c;function c(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}var f,d=new n.Point,_=new n.Polygon,e=(l(m,f=i.Container),Object.defineProperty(m.prototype,"geometry",{get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),m.prototype._render=function(e){var t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===s.DRAW_MODES.TRIANGLES&&t.length<2*m.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)},m.prototype._renderDefault=function(e){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},m.prototype._renderToBatch=function(e){var t=this.geometry,r=this.shader,t=(r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture,this.material.pluginName);e.batch.setObjectRenderer(e.plugins[t]),e.plugins[t].render(this)},m.prototype.calculateVertices=function(){var e=this.geometry.buffers[0],t=e.data,e=e._updateID;if(e!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));for(var r=this.transform.worldTransform,i=r.a,n=r.b,o=r.c,s=r.d,a=r.tx,u=r.ty,l=this.vertexData,h=0;h<l.length/2;h++){var c=t[2*h],f=t[2*h+1];l[2*h]=i*c+o*f+a,l[2*h+1]=n*c+s*f+u}if(this._roundPixels)for(var d=p.settings.RESOLUTION,h=0;h<l.length;++h)l[h]=Math.round((l[h]*d|0)/d);this.vertexDirty=e}},m.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new h(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},m.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},m.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,d);for(var t=this.geometry.getBuffer("aVertexPosition").data,r=_.points,i=this.geometry.getIndex().data,n=i.length,o=4===this.drawMode?3:1,s=0;s+2<n;s+=o){var a=2*i[s],u=2*i[s+1],l=2*i[s+2];if(r[0]=t[a],r[1]=t[1+a],r[2]=t[u],r[3]=t[1+u],r[4]=t[l],r[5]=t[1+l],_.contains(d.x,d.y))return!0}return!1},m.prototype.destroy=function(e){f.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},m.BATCHABLE_SIZE=100,m);function m(e,t,r,i){void 0===i&&(i=s.DRAW_MODES.TRIANGLES);var n=f.call(this)||this;return n.geometry=e,n.shader=t,n.state=r||o.State.for2d(),n.drawMode=i,n.start=0,n.size=0,n.uvs=null,n.indices=null,n.vertexData=new Float32Array(1),n.vertexDirty=-1,n._transformID=-1,n._roundPixels=p.settings.ROUND_PIXELS,n.batchUvs=null,n}l(v,y=o.Shader),Object.defineProperty(v.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),v.prototype.update=function(){var e;this._colorDirty&&(this._colorDirty=!1,e=this.texture.baseTexture,a.premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)};var y,i=v;function v(e,t){var r=this,i={uSampler:e,alpha:1,uTextureMatrix:n.Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t)).uniforms&&Object.assign(i,t.uniforms),(r=y.call(this,t.program||o.Program.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,r.uvMatrix=new o.TextureMatrix(e),r.batchable=void 0===t.program,r.pluginName=t.pluginName,r.tint=t.tint,r.alpha=t.alpha,r}l(x,g=o.Geometry),Object.defineProperty(x.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0});var g,b=x;function x(e,t,r){var i=g.call(this)||this,e=new o.Buffer(e),t=new o.Buffer(t,!0),r=new o.Buffer(r,!0,!0);return i.addAttribute("aVertexPosition",e,2,!1,s.TYPES.FLOAT).addAttribute("aTextureCoord",t,2,!1,s.TYPES.FLOAT).addIndex(r),i._updateId=-1,i}r.Mesh=e,r.MeshBatchUvs=h,r.MeshGeometry=b,r.MeshMaterial=i},{"@pixi/constants":21,"@pixi/core":22,"@pixi/display":23,"@pixi/math":67,"@pixi/settings":77,"@pixi/utils":85}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i,l=e("@pixi/core"),h=e("@pixi/sprite"),n=e("@pixi/display"),o=e("@pixi/math"),c=e("@pixi/utils"),f=e("@pixi/settings"),d=(0,0,0,(e={NORMAL:0,0:"NORMAL",ADD:1,1:"ADD",MULTIPLY:2,2:"MULTIPLY",SCREEN:3,3:"SCREEN",OVERLAY:4,4:"OVERLAY",DARKEN:5,5:"DARKEN",LIGHTEN:6,6:"LIGHTEN",COLOR_DODGE:7,7:"COLOR_DODGE",COLOR_BURN:8,8:"COLOR_BURN",HARD_LIGHT:9,9:"HARD_LIGHT",SOFT_LIGHT:10,10:"SOFT_LIGHT",DIFFERENCE:11,11:"DIFFERENCE",EXCLUSION:12,12:"EXCLUSION",HUE:13,13:"HUE",SATURATION:14,14:"SATURATION",COLOR:15,15:"COLOR",LUMINOSITY:16,16:"LUMINOSITY",NORMAL_NPM:17,17:"NORMAL_NPM",ADD_NPM:18,18:"ADD_NPM",SCREEN_NPM:19,19:"SCREEN_NPM",NONE:20,20:"NONE",SRC_OVER:0})[0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",0,0,0,0,0,0,0,0,(e={NPM:0,0:"NPM",UNPACK:1,1:"UNPACK",PMA:2,2:"PMA",NO_PREMULTIPLIED_ALPHA:0})[0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(e={NO:0,0:"NO",YES:1,1:"YES",AUTO:2,2:"AUTO",BLEND:0})[0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",0,0,0,(e=i=i||{})[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",0,new o.Matrix),s=(n.DisplayObject.prototype._cacheAsBitmap=!1,n.DisplayObject.prototype._cacheData=null,n.DisplayObject.prototype._cacheAsBitmapResolution=null,n.DisplayObject.prototype._cacheAsBitmapMultisample=i.NONE,function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null});Object.defineProperties(n.DisplayObject.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var t;this._cacheAsBitmap!==e&&((this._cacheAsBitmap=e)?(this._cacheData||(this._cacheData=new s),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),n.DisplayObject.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},n.DisplayObject.prototype._initCachedDisplayObject=function(e){var t,r,i,n,o,s,a,u;this._cacheData&&this._cacheData.sprite||(t=this.alpha,this.alpha=1,e.batch.flush(),r=this.getLocalBounds(null,!0).clone(),this.filters&&this.filters.length&&(i=this.filters[0].padding,r.pad(i)),r.ceil(f.settings.RESOLUTION),i=e.renderTexture.current,n=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),s=e.projection.transform,a=l.RenderTexture.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!=(a=this.cacheAsBitmapMultisample)?a:e.multisample}),u="cacheAsBitmap_"+c.uid(),this._cacheData.textureCacheId=u,l.BaseTexture.addToCache(a.baseTexture,u),l.Texture.addToCache(a,u),u=this.transform.localTransform.copyTo(d).invert().translate(-r.x,-r.y),this.render=this._cacheData.originalRender,e.render(this,{renderTexture:a,clear:!0,transform:u,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=s,e.renderTexture.bind(i,n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t,(u=new h.Sprite(a)).transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(r.x/r.width),u.anchor.y=-(r.y/r.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u))},n.DisplayObject.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},n.DisplayObject.prototype._initCachedDisplayObjectCanvas=function(e){var t,r,i,n,o,s;this._cacheData&&this._cacheData.sprite||(t=this.getLocalBounds(null,!0),r=this.alpha,this.alpha=1,i=e.context,n=e._projTransform,t.ceil(f.settings.RESOLUTION),o=l.RenderTexture.create({width:t.width,height:t.height}),s="cacheAsBitmap_"+c.uid(),this._cacheData.textureCacheId=s,l.BaseTexture.addToCache(o.baseTexture,s),l.Texture.addToCache(o,s),this.transform.localTransform.copyTo(s=d),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:s,skipUpdateTransform:!1}),e.context=i,e._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r,(s=new h.Sprite(o)).transform.worldTransform=this.transform.worldTransform,s.anchor.x=-(t.x/t.width),s.anchor.y=-(t.y/t.height),s.alpha=r,s._bounds=this._bounds,this._cacheData.sprite=s,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=s.containsPoint.bind(s))},n.DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},n.DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},n.DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,l.BaseTexture.removeFromCache(this._cacheData.textureCacheId),l.Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},n.DisplayObject.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},r.CacheData=s},{"@pixi/core":22,"@pixi/display":23,"@pixi/math":67,"@pixi/settings":77,"@pixi/sprite":80,"@pixi/utils":85}],71:[function(e,t,r){"use strict";e=e("@pixi/display");e.DisplayObject.prototype.name=null,e.Container.prototype.getChildByName=function(e,t){for(var r=0,i=this.children.length;r<i;r++)if(this.children[r].name===e)return this.children[r];if(t)for(r=0,i=this.children.length;r<i;r++)if(this.children[r].getChildByName){var n=this.children[r].getChildByName(e,!0);if(n)return n}return null}},{"@pixi/display":23}],72:[function(e,t,r){"use strict";var i=e("@pixi/display"),n=e("@pixi/math");i.DisplayObject.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new n.Point),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e}},{"@pixi/display":23,"@pixi/math":67}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e("@pixi/constants"),i=e("@pixi/display"),_=e("@pixi/utils"),a=e("@pixi/core"),n=e("@pixi/math"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function u(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}u(h,l=i.Container),h.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},h.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(h.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,_.hex2rgb(e,this.tintRgb)},enumerable:!1,configurable:!0}),h.prototype.render=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},h.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},h.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},h.prototype.destroy=function(e){l.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null};var l,e=h;function h(e,t,r,i){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var n=l.call(this)||this;return 16384<r&&(r=16384),n._properties=[!1,!0,!1,!1,!1],n._maxSize=e,n._batchSize=r,n._buffers=null,n._bufferUpdateIDs=[],n._updateID=0,n.interactiveChildren=!1,n.blendMode=s.BLEND_MODES.NORMAL,n.autoResize=i,n.roundPixels=!0,n.baseTexture=null,n.setProperties(t),n._tint=0,n.tintRgb=new Float32Array(4),n.tint=16777215,n}f.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new a.Buffer(_.createIndicesForQuads(this.size),!0,!0),e.addIndex(this.indexBuffer);for(var r=this.dynamicStride=0;r<this.dynamicProperties.length;++r)(o=this.dynamicProperties[r]).offset=t,t+=o.size,this.dynamicStride+=o.size;for(var i=new ArrayBuffer(this.size*this.dynamicStride*4*4),n=(this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new a.Buffer(this.dynamicData,!1,!1),0),r=this.staticStride=0;r<this.staticProperties.length;++r)(o=this.staticProperties[r]).offset=n,n+=o.size,this.staticStride+=o.size;i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new a.Buffer(this.staticData,!0,!1);for(r=0;r<this.dynamicProperties.length;++r){var o=this.dynamicProperties[r];e.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===s.TYPES.UNSIGNED_BYTE,o.type,4*this.dynamicStride,4*o.offset)}for(r=0;r<this.staticProperties.length;++r){o=this.staticProperties[r];e.addAttribute(o.attributeName,this.staticBuffer,0,o.type===s.TYPES.UNSIGNED_BYTE,o.type,4*this.staticStride,4*o.offset)}},f.prototype.uploadDynamic=function(e,t,r){for(var i=0;i<this.dynamicProperties.length;i++){var n=this.dynamicProperties[i];n.uploadFunction(e,t,r,n.type===s.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},f.prototype.uploadStatic=function(e,t,r){for(var i=0;i<this.staticProperties.length;i++){var n=this.staticProperties[i];n.uploadFunction(e,t,r,n.type===s.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},f.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()};var c=f;function f(e,t,r){this.geometry=new a.Geometry,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var n={attributeName:(n=e[i]).attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||s.TYPES.FLOAT,offset:n.offset};(t[i]?this.dynamicProperties:this.staticProperties).push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}u(p,d=a.ObjectRenderer),p.prototype.render=function(e){var t=e.children,r=e._maxSize,i=e._batchSize,n=this.renderer,o=t.length;if(0!==o){r<o&&!e.autoResize&&(o=r);for(var s=(s=e._buffers)||(e._buffers=this.generateBuffers(e)),r=t[0]._texture.baseTexture,a=(this.state.blendMode=_.correctBlendMode(e.blendMode,r.alphaMode),n.state.set(this.state),n.gl),u=e.worldTransform.copyTo(this.tempMatrix),l=(u.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=_.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,r.alphaMode),this.shader.uniforms.uSampler=r,this.renderer.shader.bind(this.shader),!1),h=0,c=0;h<o;h+=i,c+=1){var f=o-h,d=(i<f&&(f=i),c>=s.length&&s.push(this._generateOneMoreBuffer(e)),s[c]),p=(d.uploadDynamic(t,h,f),e._bufferUpdateIDs[c]||0);(l=l||d._updateID<p)&&(d._updateID=e._updateID,d.uploadStatic(t,h,f)),n.geometry.bind(d.geometry),a.drawElements(a.TRIANGLES,6*f,a.UNSIGNED_SHORT,0)}}},p.prototype.generateBuffers=function(e){for(var t=[],r=e._maxSize,i=e._batchSize,n=e._properties,o=0;o<r;o+=i)t.push(new c(this.properties,n,i));return t},p.prototype._generateOneMoreBuffer=function(e){var t=e._batchSize,e=e._properties;return new c(this.properties,e,t)},p.prototype.uploadVertices=function(e,t,r,i,n,o){for(var s=0,a=0,u=0,l=0,h=0;h<r;++h){var c=e[t+h],f=c._texture,d=c.scale.x,p=c.scale.y,_=f.trim,f=f.orig;_?(s=(a=_.x-c.anchor.x*f.width)+_.width,u=(l=_.y-c.anchor.y*f.height)+_.height):(s=f.width*(1-c.anchor.x),a=f.width*-c.anchor.x,u=f.height*(1-c.anchor.y),l=f.height*-c.anchor.y),i[o]=a*d,i[o+1]=l*p,i[o+n]=s*d,i[o+n+1]=l*p,i[o+2*n]=s*d,i[o+2*n+1]=u*p,i[o+3*n]=a*d,i[o+3*n+1]=u*p,o+=4*n}},p.prototype.uploadPosition=function(e,t,r,i,n,o){for(var s=0;s<r;s++){var a=e[t+s].position;i[o]=a.x,i[o+1]=a.y,i[o+n]=a.x,i[o+n+1]=a.y,i[o+2*n]=a.x,i[o+2*n+1]=a.y,i[o+3*n]=a.x,i[o+3*n+1]=a.y,o+=4*n}},p.prototype.uploadRotation=function(e,t,r,i,n,o){for(var s=0;s<r;s++){var a=e[t+s].rotation;i[o]=a,i[o+n]=a,i[o+2*n]=a,i[o+3*n]=a,o+=4*n}},p.prototype.uploadUvs=function(e,t,r,i,n,o){for(var s=0;s<r;++s){var a=e[t+s]._texture._uvs;a?(i[o]=a.x0,i[o+1]=a.y0,i[o+n]=a.x1,i[o+n+1]=a.y1,i[o+2*n]=a.x2,i[o+2*n+1]=a.y2,i[o+3*n]=a.x3,i[o+3*n+1]=a.y3):(i[o]=0,i[o+1]=0,i[o+n]=0,i[o+n+1]=0,i[o+2*n]=0,i[o+2*n+1]=0,i[o+3*n]=0,i[o+3*n+1]=0),o+=4*n}},p.prototype.uploadTint=function(e,t,r,i,n,o){for(var s=0;s<r;++s){var a=e[t+s],u=0<a._texture.baseTexture.alphaMode,l=a.alpha,u=l<1&&u?_.premultiplyTint(a._tintRGB,l):a._tintRGB+(255*l<<24);i[o]=u,i[o+n]=u,i[o+2*n]=u,i[o+3*n]=u,o+=4*n}},p.prototype.destroy=function(){d.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null};var d,i=p;function p(e){e=d.call(this,e)||this;return e.shader=null,e.properties=null,e.tempMatrix=new n.Matrix,e.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:e.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:e.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:e.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:e.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:s.TYPES.UNSIGNED_BYTE,uploadFunction:e.uploadTint,offset:0}],e.shader=a.Shader.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),e.state=a.State.for2d(),e}r.ParticleContainer=e,r.ParticleRenderer=i},{"@pixi/constants":21,"@pixi/core":22,"@pixi/display":23,"@pixi/math":67,"@pixi/utils":85}],74:[function(l,e,t){!function(u){!function(){"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}for(var t,r=e(l("promise-polyfill")),i=e(l("object-assign")),n=("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:void 0!==u&&(u.globalThis=u)),globalThis.Promise||(globalThis.Promise=r),Object.assign||(Object.assign=i),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),globalThis.performance&&globalThis.performance.now||(t=Date.now(),globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-t}),Date.now()),o=["ms","moz","webkit","o"],s=0;s<o.length&&!globalThis.requestAnimationFrame;++s){var a=o[s];globalThis.requestAnimationFrame=globalThis[a+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[a+"CancelAnimationFrame"]||globalThis[a+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),r=16+n-t;return r<0&&(r=0),n=t,globalThis.self.setTimeout(function(){n=Date.now(),e(performance.now())},r)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:0<e?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":92,"promise-polyfill":96}],75:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/settings"),o=e("@pixi/core"),s=e("@pixi/graphics"),a=e("@pixi/ticker"),n=e("@pixi/display"),u=e("@pixi/text"),l=(i.settings.UPLOADS_PER_FRAME=4,function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)});c.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},c.prototype.allowedToUpload=function(){return 0<this.itemsLeft--};var h=c;function c(e){this.maxItemsPerFrame=e,this.itemsLeft=0}function f(e,t){var r=!1;if(e&&e._textures&&e._textures.length)for(var i,n=0;n<e._textures.length;n++)e._textures[n]instanceof o.Texture&&(i=e._textures[n].baseTexture,-1===t.indexOf(i)&&(t.push(i),r=!0));return r}function d(e,t){return e.baseTexture instanceof o.BaseTexture&&(e=e.baseTexture,-1===t.indexOf(e)&&t.push(e),!0)}function p(e,t){return!!(e._texture&&e._texture instanceof o.Texture)&&(e=e._texture.baseTexture,-1===t.indexOf(e)&&t.push(e),!0)}function _(e,t){return t instanceof u.Text&&(t.updateText(!0),!0)}function m(e,t){return t instanceof u.TextStyle&&(t=t.toFontString(),u.TextMetrics.measureFont(t),!0)}function y(e,t){return e instanceof u.Text&&(-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e),e=e._texture.baseTexture,-1===t.indexOf(e)&&t.push(e),!0)}function v(e,t){return e instanceof u.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}g.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,a.Ticker.system.addOnce(this.tick,this,a.UPDATE_PRIORITY.UTILITY))):t&&t()},g.prototype.tick=function(){setTimeout(this.delayedTick,0)},g.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)a.Ticker.system.addOnce(this.tick,this,a.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;for(var n=this.completes.slice(0),r=this.completes.length=0,i=n.length;r<i;r++)n[r]()}},g.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},g.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},g.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof n.Container)for(t=e.children.length-1;0<=t;t--)this.add(e.children[t]);return this},g.prototype.destroy=function(){this.ticking&&a.Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null};e=g;function g(e){var t=this;this.limiter=new h(i.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(y),this.registerFindHook(v),this.registerFindHook(f),this.registerFindHook(d),this.registerFindHook(p),this.registerUploadHook(_),this.registerUploadHook(m)}function b(e,t){return t instanceof o.BaseTexture&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function x(e,t){if(!(t instanceof s.Graphics))return!1;for(var r=t.geometry,i=(t.finishPoly(),r.updateBatches(),r.batches),n=0;n<i.length;n++){var o=i[n].style.texture;o&&b(e,o.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function T(e,t){return e instanceof s.Graphics&&(t.push(e),!0)}l(O=A,S=E=e),O.prototype=null===S?Object.create(S):(R.prototype=S.prototype,new R);var E,O,S=A;function R(){this.constructor=O}function A(e){e=E.call(this,e)||this;return e.uploadHookHelper=e.renderer,e.registerFindHook(T),e.registerUploadHook(b),e.registerUploadHook(x),e}C.prototype.beginFrame=function(){this.frameStart=Date.now()},C.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};var P=C;function C(e){this.maxMilliseconds=e,this.frameStart=0}r.BasePrepare=e,r.CountLimiter=h,r.Prepare=S,r.TimeLimiter=P},{"@pixi/core":22,"@pixi/display":23,"@pixi/graphics":63,"@pixi/settings":77,"@pixi/text":83,"@pixi/ticker":84}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});n.prototype.emit=function(e,t,r,i,n,o,s,a){if(8<arguments.length)throw new Error("max arguments reached");var u=this.name,l=this.items;this._aliasCount++;for(var h=0,c=l.length;h<c;h++)l[h][u](e,t,r,i,n,o,s,a);return l===this.items&&this._aliasCount--,this},n.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},n.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},n.prototype.remove=function(e){e=this.items.indexOf(e);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},n.prototype.contains=function(e){return-1!==this.items.indexOf(e)},n.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},n.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(n.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0});var i=n;function n(e){this.items=[],this._name=e,this._aliasCount=0}Object.defineProperties(i.prototype,{dispatch:{value:i.prototype.emit},run:{value:i.prototype.emit}}),r.Runner=i},{}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i,n,o,s,e=((e=e("ismobilejs"))&&"object"==typeof e&&"default"in e?e.default:e)(globalThis.navigator);(a={NORMAL:0,0:"NORMAL",ADD:1,1:"ADD",MULTIPLY:2,2:"MULTIPLY",SCREEN:3,3:"SCREEN",OVERLAY:4,4:"OVERLAY",DARKEN:5,5:"DARKEN",LIGHTEN:6,6:"LIGHTEN",COLOR_DODGE:7,7:"COLOR_DODGE",COLOR_BURN:8,8:"COLOR_BURN",HARD_LIGHT:9,9:"HARD_LIGHT",SOFT_LIGHT:10,10:"SOFT_LIGHT",DIFFERENCE:11,11:"DIFFERENCE",EXCLUSION:12,12:"EXCLUSION",HUE:13,13:"HUE",SATURATION:14,14:"SATURATION",COLOR:15,15:"COLOR",LUMINOSITY:16,16:"LUMINOSITY",NORMAL_NPM:17,17:"NORMAL_NPM",ADD_NPM:18,18:"ADD_NPM",SCREEN_NPM:19,19:"SCREEN_NPM",NONE:20,20:"NONE",SRC_OVER:0})[0]="SRC_OVER",a[a.SRC_IN=21]="SRC_IN",a[a.SRC_OUT=22]="SRC_OUT",a[a.SRC_ATOP=23]="SRC_ATOP",a[a.DST_OVER=24]="DST_OVER",a[a.DST_IN=25]="DST_IN",a[a.DST_OUT=26]="DST_OUT",a[a.DST_ATOP=27]="DST_ATOP",a[a.ERASE=26]="ERASE",a[a.SUBTRACT=28]="SUBTRACT",a[a.XOR=29]="XOR",(a=i=i||{})[a.NEAREST=0]="NEAREST",a[a.LINEAR=1]="LINEAR",(a=n=n||{})[a.CLAMP=33071]="CLAMP",a[a.REPEAT=10497]="REPEAT",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(a=l=l||{})[a.OFF=0]="OFF",a[a.POW2=1]="POW2",a[a.ON=2]="ON",a[a.ON_MANUAL=3]="ON_MANUAL",(a={NPM:0,0:"NPM",UNPACK:1,1:"UNPACK",PMA:2,2:"PMA",NO_PREMULTIPLIED_ALPHA:0})[0]="NO_PREMULTIPLIED_ALPHA",a[a.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",a[a.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",a[a.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(a={NO:0,0:"NO",YES:1,1:"YES",AUTO:2,2:"AUTO",BLEND:0})[0]="BLEND",a[a.CLEAR=1]="CLEAR",a[a.BLIT=2]="BLIT",(a=o=o||{})[a.AUTO=0]="AUTO",a[a.MANUAL=1]="MANUAL",(a=s=s||{}).LOW="lowp",a.MEDIUM="mediump",a.HIGH="highp",(a=h=h||{})[a.NONE=0]="NONE",a[a.LOW=2]="LOW",a[a.MEDIUM=4]="MEDIUM",a[a.HIGH=8]="HIGH";var a,u,l,h={MIPMAP_TEXTURES:l.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:h.NONE,SPRITE_MAX_TEXTURES:(a=32,l=!0,(e.tablet||e.phone)&&(e.apple.device&&(u=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(u[1],10)<11&&(l=!1),e.android.device&&(u=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(u[1],10)<7&&(l=!1)),l?a:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:o.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:n.CLAMP,SCALE_MODE:i.LINEAR,PRECISION_VERTEX:s.HIGH,PRECISION_FRAGMENT:e.apple.device?s.HIGH:s.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!e.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};r.isMobile=e,r.settings=h},{ismobilejs:90}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/core"),n=e("@pixi/sprite"),o=e("@pixi/ticker"),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};a=n.Sprite,s(u=h,e=a),u.prototype=null===e?Object.create(e):(l.prototype=e.prototype,new l),h.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(o.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))},h.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(o.Ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},h.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},h.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},h.prototype.update=function(e){if(this._playing){var t=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=t/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}},h.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},h.prototype.destroy=function(e){this.stop(),a.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},h.fromFrames=function(e){for(var t=[],r=0;r<e.length;++r)t.push(i.Texture.from(e[r]));return new h(t)},h.fromImages=function(e){for(var t=[],r=0;r<e.length;++r)t.push(i.Texture.from(e[r]));return new h(t)},Object.defineProperty(h.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof i.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(o.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(o.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0});var a,u,n=h;function l(){this.constructor=u}function h(e,t){void 0===t&&(t=!0);var r=a.call(this,e[0]instanceof i.Texture?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=t,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}r.AnimatedSprite=n},{"@pixi/core":22,"@pixi/sprite":80,"@pixi/ticker":84}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("@pixi/core"),o=e("@pixi/math"),i=e("@pixi/sprite"),d=e("@pixi/constants"),p=e("@pixi/utils"),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function a(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var u,l=new o.Point,e=(a(h,u=i.Sprite),Object.defineProperty(h.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),h.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},h.prototype._render=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},h.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,i)},h.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):u.prototype.getLocalBounds.call(this,e)},h.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,l);var e=this._width,t=this._height,r=-e*this.anchor._x;if(l.x>=r&&l.x<r+e){r=-t*this.anchor._y;if(l.y>=r&&l.y<r+t)return!0}return!1},h.prototype.destroy=function(e){u.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},h.from=function(e,t){return new h(e instanceof n.Texture?e:n.Texture.from(e,t),t.width,t.height)},Object.defineProperty(h.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),h);function h(e,t,r){void 0===t&&(t=100),void 0===r&&(r=100);var i=u.call(this,e)||this;return i.tileTransform=new o.Transform,i._width=t,i._height=r,i.uvMatrix=i.texture.uvMatrix||new n.TextureMatrix(e),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}var c,f="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",_=new o.Matrix,i=(a(m,c=n.ObjectRenderer),m.prototype.contextChange=function(){var e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=n.Shader.from(f,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=1<e.context.webGLVersion?n.Shader.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):n.Shader.from(f,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)},m.prototype.render=function(e){var t=this.renderer,r=this.quad,i=r.vertices,n=(i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor?e.anchor.x:0),o=e.uvRespectAnchor?e.anchor.y:0,n=((i=r.uvs)[0]=i[6]=-n,i[1]=i[3]=-o,i[2]=i[4]=1-n,i[5]=i[7]=1-o,r.invalidate(),e._texture),i=n.baseTexture,o=e.tileTransform.localTransform,s=e.uvMatrix,a=i.isPowerOfTwo&&n.frame.width===i.width&&n.frame.height===i.height,u=(a&&(i._glTextures[t.CONTEXT_UID]?a=i.wrapMode!==d.WRAP_MODES.CLAMP:i.wrapMode===d.WRAP_MODES.CLAMP&&(i.wrapMode=d.WRAP_MODES.REPEAT)),a?this.simpleShader:this.shader),l=n.width,h=n.height,c=e._width,f=e._height;_.set(o.a*l/c,o.b*l/f,o.c*h/c,o.d*h/f,o.tx/c,o.ty/f),_.invert(),a?_.prepend(s.mapCoord):(u.uniforms.uMapCoord=s.mapCoord.toArray(!0),u.uniforms.uClampFrame=s.uClampFrame,u.uniforms.uClampOffset=s.uClampOffset),u.uniforms.uTransform=_.toArray(!0),u.uniforms.uColor=p.premultiplyTintToRgba(e.tint,e.worldAlpha,u.uniforms.uColor,i.alphaMode),u.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),u.uniforms.uSampler=n,t.shader.bind(u),t.geometry.bind(r),this.state.blendMode=p.correctBlendMode(e.blendMode,i.alphaMode),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},m);function m(e){var t=c.call(this,e)||this;return e.runners.contextChange.add(t),t.quad=new n.QuadUv,t.state=n.State.for2d(),t}r.TilingSprite=e,r.TilingSpriteRenderer=i},{"@pixi/constants":21,"@pixi/core":22,"@pixi/math":67,"@pixi/sprite":80,"@pixi/utils":85}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/constants"),n=e("@pixi/core"),o=e("@pixi/display"),s=e("@pixi/math"),m=e("@pixi/settings"),a=e("@pixi/utils"),u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var l,h,c=new s.Point,f=new Uint16Array([0,1,2,0,2,3]),e=(l=o.Container,u(h=p,e=l),h.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d),p.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=a.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=a.sign(this.scale.y)*this._height/this._texture.orig.height)},p.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},p.prototype.calculateVertices=function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,r=t.a,i=t.b,n=t.c,o=t.d,s=t.tx,t=t.ty,a=this.vertexData,u=e.trim,e=e.orig,l=this._anchor,h=0,c=0,f=0,d=0,f=u?(h=(c=u.x-l._x*e.width)+u.width,(d=u.y-l._y*e.height)+u.height):(h=(c=-l._x*e.width)+e.width,(d=-l._y*e.height)+e.height);if(a[0]=r*c+n*d+s,a[1]=o*d+i*c+t,a[2]=r*h+n*d+s,a[3]=o*d+i*h+t,a[4]=r*h+n*f+s,a[5]=o*f+i*h+t,a[6]=r*c+n*f+s,a[7]=o*f+i*c+t,this._roundPixels)for(var p=m.settings.RESOLUTION,_=0;_<a.length;++_)a[_]=Math.round((a[_]*p|0)/p)}},p.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,e=e.orig,r=this._anchor,i=this.transform.worldTransform,n=i.a,o=i.b,s=i.c,a=i.d,u=i.tx,i=i.ty,l=-r._x*e.width,h=l+e.width,r=-r._y*e.height,e=r+e.height;t[0]=n*l+s*r+u,t[1]=a*r+o*l+i,t[2]=n*h+s*r+u,t[3]=a*r+o*h+i,t[4]=n*h+s*e+u,t[5]=a*e+o*h+i,t[6]=n*l+s*e+u,t[7]=a*e+o*l+i},p.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},p.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},p.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new o.Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new s.Rectangle),e=this._localBoundsRect),this._localBounds.getRectangle(e)):l.prototype.getLocalBounds.call(this,e)},p.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,c);var e=this._texture.orig.width,t=this._texture.orig.height,r=-e*this.anchor.x;return c.x>=r&&c.x<r+e&&(r=-t*this.anchor.y,c.y>=r&&c.y<r+t)},p.prototype.destroy=function(e){l.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof e?e:e&&e.texture)&&(e="boolean"==typeof e?e:e&&e.baseTexture,this._texture.destroy(!!e)),this._texture=null},p.from=function(e,t){return new p(e instanceof n.Texture?e:n.Texture.from(e,t))},Object.defineProperty(p.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=a.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=a.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||n.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),p);function d(){this.constructor=h}function p(e){var t=l.call(this)||this;return t._anchor=new s.ObservablePoint(t._onAnchorUpdate,t,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),t._texture=null,t._width=0,t._height=0,t._tint=null,t._tintRGB=null,t.tint=16777215,t.blendMode=i.BLEND_MODES.NORMAL,t._cachedTint=16777215,t.uvs=null,t.texture=e||n.Texture.EMPTY,t.vertexData=new Float32Array(8),t.vertexTrimmedData=null,t._transformID=-1,t._textureID=-1,t._transformTrimmedID=-1,t._textureTrimmedID=-1,t.indices=f,t.pluginName="batch",t.isSprite=!0,t._roundPixels=m.settings.ROUND_PIXELS,t}r.Sprite=e},{"@pixi/constants":21,"@pixi/core":22,"@pixi/display":23,"@pixi/math":67,"@pixi/settings":77,"@pixi/utils":85}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=e("@pixi/math"),h=e("@pixi/core"),u=e("@pixi/utils"),c=e("@pixi/loaders"),f=(d.prototype._updateResolution=function(e){var t=this.data.meta.scale,e=u.getResolutionOfUrl(e=void 0===e?null:e,null);return 1!==(e=null===e?void 0!==t?parseFloat(t):1:e)&&this.baseTexture.setResolution(e),e},d.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=d.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},d.prototype._processFrames=function(e){for(var t=e,r=d.BATCH_SIZE;t-e<r&&t<this._frameKeys.length;){var i,n,o,s=this._frameKeys[t],a=this._frames[s],u=a.frame;u&&(i=o=null,n=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,n=new l.Rectangle(0,0,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),o=a.rotated?new l.Rectangle(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):new l.Rectangle(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(i=new l.Rectangle(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[s]=new h.Texture(this.baseTexture,o,n,i,a.rotated?2:0,a.anchor),h.Texture.addToCache(this.textures[s],s)),t++}},d.prototype._processAnimations=function(){var e,t=this.data.animations||{};for(e in t){this.animations[e]=[];for(var r=0;r<t[e].length;r++){var i=t[e][r];this.animations[e].push(this.textures[i])}}},d.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},d.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*d.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*d.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},d.prototype.destroy=function(e){for(var t in void 0===e&&(e=!1),this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null!=(e=this._texture)&&e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},d.BATCH_SIZE=1e3,d);function d(e,t,r){void 0===r&&(r=null),this._texture=e instanceof h.Texture?e:null,this.baseTexture=e instanceof h.BaseTexture?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;e=this.baseTexture.resource;this.resolution=this._updateResolution(r||(e?e.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}p.use=function(i,r){var n=this,e=i.name+"_image";if(i.data&&i.type===c.LoaderResource.TYPE.JSON&&i.data.frames&&!n.resources[e]){var t=null==(t=null==(t=i.data)?void 0:t.meta)?void 0:t.related_multi_packs;if(Array.isArray(t))for(var o=0,s=t;o<s.length;o++)!function(e){if("string"!=typeof e)return;var t=e.replace(".json",""),r=u.url.resolve(i.url.replace(n.baseUrl,""),e);if(n.resources[t]||Object.values(n.resources).some(function(e){return u.url.format(u.url.parse(e.url))===r}))return;e={crossOrigin:i.crossOrigin,loadType:c.LoaderResource.LOAD_TYPE.XHR,xhrType:c.LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:i,metadata:i.metadata};n.add(t,r,e)}(s[o]);var t={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},a=p.getResourcePath(i,n.baseUrl);n.add(e,a,t,function(e){var t;e.error?r(e.error):(t=new f(e.texture,i.data,i.url)).parse(function(){i.spritesheet=t,i.textures=t.textures,r()})})}else r()},p.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:u.url.resolve(e.url.replace(t,""),e.data.meta.image)};e=p;function p(){}r.Spritesheet=f,r.SpritesheetLoader=e},{"@pixi/core":22,"@pixi/loaders":66,"@pixi/math":67,"@pixi/utils":85}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var $=e("@pixi/math"),u=e("@pixi/settings"),ee=e("@pixi/mesh"),te=e("@pixi/utils"),re=e("@pixi/core"),M=e("@pixi/text"),ie=e("@pixi/constants"),i=e("@pixi/display"),p=e("@pixi/loaders"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var w=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},e=(o.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},o.parse=function(e){var t,r=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(t in r){var n,o=r[t].match(/^[a-z]+/gm)[0],s=r[t].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(n in s){var u=s[n].split("="),l=u[0],u=u[1].replace(/"/gm,""),h=parseFloat(u),u=isNaN(h)?u:h;a[l]=u}i[o].push(a)}var c=new w;return i.info.forEach(function(e){return c.info.push({face:e.face,size:parseInt(e.size,10)})}),i.common.forEach(function(e){return c.common.push({lineHeight:parseInt(e.lineHeight,10)})}),i.page.forEach(function(e){return c.page.push({id:parseInt(e.id,10),file:e.file})}),i.char.forEach(function(e){return c.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})}),i.kerning.forEach(function(e){return c.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})}),i.distanceField.forEach(function(e){return c.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})}),c},o);function o(){}a.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},a.parse=function(e){for(var t=new w,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),n=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),s=e.getElementsByTagName("kerning"),a=e.getElementsByTagName("distanceField"),u=0;u<r.length;u++)t.info.push({face:r[u].getAttribute("face"),size:parseInt(r[u].getAttribute("size"),10)});for(u=0;u<i.length;u++)t.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(u=0;u<n.length;u++)t.page.push({id:parseInt(n[u].getAttribute("id"),10)||0,file:n[u].getAttribute("file")});for(u=0;u<o.length;u++){var l=o[u];t.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(u=0;u<s.length;u++)t.kerning.push({first:parseInt(s[u].getAttribute("first"),10),second:parseInt(s[u].getAttribute("second"),10),amount:parseInt(s[u].getAttribute("amount"),10)});for(u=0;u<a.length;u++)t.distanceField.push({fieldType:a[u].getAttribute("fieldType"),distanceRange:parseInt(a[u].getAttribute("distanceRange"),10)});return t};var s=a;function a(){}function l(){}l.test=function(e){return"string"==typeof e&&-1<e.indexOf("<font>")&&(e=(new globalThis.DOMParser).parseFromString(e,"text/xml"),s.test(e))},l.parse=function(e){e=(new globalThis.DOMParser).parseFromString(e,"text/xml");return s.parse(e)};var h=[e,s,l];function _(e){for(var t=0;t<h.length;t++)if(h[t].test(e))return h[t];return null}function I(e,t,r,i,n,o,s){var a,u=r.text,l=r.fontProperties,i=(t.translate(i,n),t.scale(o,o),s.strokeThickness/2),n=-s.strokeThickness/2;t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=function(e,t,r,i,n,o){var s=r.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var a=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,l=e.width/i-a-2*u,h=e.height/i-a-2*u,c=s.slice(),f=r.fillGradientStops.slice();if(!f.length)for(var d=c.length+1,p=1;p<d;++p)f.push(p/d);if(c.unshift(s[0]),f.unshift(0),c.push(s[s.length-1]),f.push(1),r.fillGradientType===M.TEXT_GRADIENT.LINEAR_VERTICAL)for(var _=t.createLinearGradient(l/2,u,l/2,h+u),m=0,y=(o.fontProperties.fontSize+r.strokeThickness)/h,p=0;p<n.length;p++)for(var v=o.lineHeight*p,g=0;g<c.length;g++){var b=0,b="number"==typeof f[g]?f[g]:g/c.length,b=Math.max(m,v/h+b*y),b=Math.min(b,1);_.addColorStop(b,c[g]),m=b}else{_=t.createLinearGradient(u,h/2,l+u,h/2);for(var x=c.length+1,T=1,p=0;p<c.length;p++){var E=void 0,E="number"==typeof f[p]?f[p]:T/x;_.addColorStop(E,c[p]),T++}}return _}(e,t,s,o,[u],r),t.strokeStyle=s.stroke,s.dropShadow?(e=s.dropShadowColor,e=te.hex2rgb("number"==typeof e?e:te.string2hex(e)),a=s.dropShadowBlur*o,o=s.dropShadowDistance*o,t.shadowColor="rgba("+255*e[0]+","+255*e[1]+","+255*e[2]+","+s.dropShadowAlpha+")",t.shadowBlur=a,t.shadowOffsetX=Math.cos(s.dropShadowAngle)*o,t.shadowOffsetY=Math.sin(s.dropShadowAngle)*o):(t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),s.stroke&&s.strokeThickness&&t.strokeText(u,i,n+r.lineHeight-l.descent),s.fill&&t.fillText(u,i,n+r.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function ne(e){return Array.from?Array.from(e):e.split("")}function oe(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}D.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},D.install=function(e,t,r){var i;if(e instanceof w)i=e;else{var n=_(e);if(!n)throw new Error("Unrecognized data format for font.");i=n.parse(e)}n=new D(i,t=t instanceof re.Texture?[t]:t,r);return D.available[n.font]=n},D.uninstall=function(e){var t=D.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete D.available[e]},D.from=function(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");for(var i,n,o,r=Object.assign({},D.defaultOptions,r),s=r.chars,a=r.padding,u=r.resolution,l=r.textureWidth,h=r.textureHeight,c=function(e){for(var t=[],r=0,i=(e="string"==typeof e?[e]:e).length;r<i;r++){var n=e[r];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var o=n[0].charCodeAt(0),s=n[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,u=s;a<=u;a++)t.push(String.fromCharCode(a))}else t.push.apply(t,ne(n))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(s),f=t instanceof M.TextStyle?t:new M.TextStyle(t),d=l,p=new w,_=(p.info[0]={face:f.fontFamily,size:f.fontSize},p.common[0]={lineHeight:f.fontSize},0),m=0,y=0,v=[],g=0;g<c.length;g++){i||((i=document.createElement("canvas")).width=l,i.height=h,n=i.getContext("2d"),o=new re.BaseTexture(i,{resolution:u}),v.push(new re.Texture(o)),p.page.push({id:v.length-1,file:""}));var b=M.TextMetrics.measureText(c[g],f,!1,i),x=b.width,T=Math.ceil(b.height),E=Math.ceil(("italic"===f.fontStyle?2:1)*x);if(h-T*u<=m){if(0===m)throw new Error("[BitmapFont] textureHeight "+h+"px is too small for "+f.fontSize+"px fonts");--g,o=n=i=null,y=_=m=0}else{y=Math.max(T+b.fontProperties.descent,y);d<=E*u+_?(--g,m+=y*u,m=Math.ceil(m),y=_=0):(I(i,n,b,_,m,u,f),b=oe(b.text),p.char.push({id:b,page:v.length-1,x:_/u,y:m/u,width:E,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(x-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),_+=(E+2*a)*u,_=Math.ceil(_))}}for(var g=0,O=c.length;g<O;g++)for(var S=c[g],R=0;R<O;R++){var A=c[R],P=n.measureText(S).width,C=n.measureText(A).width,P=n.measureText(S+A).width-(P+C);P&&p.kerning.push({first:oe(S),second:oe(A),amount:P})}r=new D(p,v,!0);return void 0!==D.available[e]&&D.uninstall(e),D.available[e]=r},D.ALPHA=[["a","z"],["A","Z"]," "],D.NUMERIC=[["0","9"]],D.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],D.ASCII=[[" ","~"]],D.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:D.ALPHANUMERIC},D.available={};var se=D;function D(e,t,r){var i=e.info[0],n=e.common[0],o=e.page[0],s=e.distanceField[0],a=te.getResolutionOfUrl(o.file),u={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=n.lineHeight/a,this.chars={},this.pageTextures=u;for(var l=0;l<e.page.length;l++){var h=e.page[l],c=h.id,h=h.file;u[c]=t instanceof Array?t[l]:t[h],null!=s&&s.fieldType&&"none"!==s.fieldType&&(u[c].baseTexture.alphaMode=ie.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA)}for(l=0;l<e.char.length;l++){var f=e.char[l],c=f.id,f=f.page,d=e.char[l],p=d.x,_=d.y,m=d.width,y=d.height,v=d.xoffset,g=d.yoffset,d=d.xadvance,p=(p/=a,_/=a,m/=a,y/=a,v/=a,g/=a,d/=a,new $.Rectangle(p+u[f].frame.x/a,_+u[f].frame.y/a,m,y));this.chars[c]={xOffset:v,yOffset:g,xAdvance:d,kerning:{},texture:new re.Texture(u[f].baseTexture,p),page:f}}for(l=0;l<e.kerning.length;l++){var b=e.kerning[l],x=b.first,T=b.second,b=b.amount;x/=a,T/=a,b/=a,this.chars[T]&&(this.chars[T].kerning[x]=b)}this.distanceFieldRange=null==s?void 0:s.distanceRange,this.distanceFieldType=null!=(r=null==(o=null==s?void 0:s.fieldType)?void 0:o.toLowerCase())?r:"none"}var c,f,ae=[],ue=[],le=[],i=(c=i.Container,n(f=m,e=c),f.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d),m.prototype.updateText=function(){for(var e=se.available[this._fontName],t=this._fontSize/e.size,r=new $.Point,i=[],n=[],o=[],s=ne(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),N=this._maxWidth*e.size/this._fontSize,B="none"===e.distanceFieldType?ae:ue,a=null,u=0,l=0,h=0,c=-1,f=0,k=0,U=0,d=0,p=0;p<s.length;p++){var _,m,G=oe(S=s[p]);/(?:\s)/.test(S)&&(c=p,f=u,d++),"\r"===S||"\n"===S?(n.push(u),o.push(-1),l=Math.max(l,u),++h,++k,r.x=0,r.y+=e.lineHeight,a=null,d=0):(_=e.chars[G])&&(a&&_.kerning[a]&&(r.x+=_.kerning[a]),(m=le.pop()||{texture:re.Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new $.Point}).texture=_.texture,m.line=h,m.charCode=G,m.position.x=r.x+_.xOffset+this._letterSpacing/2,m.position.y=r.y+_.yOffset,m.prevSpaces=d,i.push(m),u=m.position.x+Math.max(_.xAdvance,_.texture.orig.width),r.x+=_.xAdvance+this._letterSpacing,U=Math.max(U,_.yOffset+_.texture.height),a=G,-1!==c&&0<N&&r.x>N&&(++k,te.removeItems(i,1+c-k,1+p-c),p=c,c=-1,n.push(f),o.push(0<i.length?i[i.length-1].prevSpaces:0),l=Math.max(l,f),h++,r.x=0,r.y+=e.lineHeight,a=null,d=0))}for(var j=s[s.length-1],X=("\r"!==j&&"\n"!==j&&(/(?:\s)/.test(j)&&(u=f),n.push(u),l=Math.max(l,u),o.push(-1)),[]),p=0;p<=h;p++){var y=0;"right"===this._align?y=l-n[p]:"center"===this._align?y=(l-n[p])/2:"justify"===this._align&&(y=o[p]<0?0:(l-n[p])/o[p]),X.push(y)}for(var H=i.length,v={},g=[],b=this._activePagesMeshData,p=0;p<b.length;p++)B.push(b[p]);for(p=0;p<H;p++){var z,x,T,E=(R=i[p].texture).baseTexture.uid;v[E]||((D=B.pop())||(x=new ee.MeshGeometry,z=T=void 0,z="none"===e.distanceFieldType?(T=new ee.MeshMaterial(re.Texture.EMPTY),ie.BLEND_MODES.NORMAL):(T=new ee.MeshMaterial(re.Texture.EMPTY,{program:re.Program.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),ie.BLEND_MODES.NORMAL_NPM),(x=new ee.Mesh(x,T)).blendMode=z,D={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:x,vertices:null,uvs:null,indices:null}),D.index=0,D.indexCount=0,D.vertexCount=0,D.uvsCount=0,D.total=0,(T=this._textureCache)[E]=T[E]||new re.Texture(R.baseTexture),D.mesh.texture=T[E],D.mesh.tint=this._tint,g.push(D),v[E]=D),v[E].total++}for(p=0;p<b.length;p++)-1===g.indexOf(b[p])&&this.removeChild(b[p].mesh);for(p=0;p<g.length;p++)g[p].mesh.parent!==this&&this.addChild(g[p].mesh);for(p in this._activePagesMeshData=g,v){var O=(D=v[p]).total;if(!((null==(Y=D.indices)?void 0:Y.length)>6*O)||D.vertices.length<2*ee.Mesh.BATCHABLE_SIZE)D.vertices=new Float32Array(8*O),D.uvs=new Float32Array(8*O),D.indices=new Uint16Array(6*O);else for(var Y=D.total,V=D.vertices,W=4*Y*2;W<V.length;W++)V[W]=0;D.mesh.size=6*O}for(p=0;p<H;p++){var S,R,A=(S=i[p]).position.x+X[S.line]*("justify"===this._align?S.prevSpaces:1),A=(A=this._roundPixels?Math.round(A):A)*t,P=S.position.y*t,C=v[(R=S.texture).baseTexture.uid],M=R.frame,w=R._uvs,I=C.index++;C.indices[6*I+0]=0+4*I,C.indices[6*I+1]=1+4*I,C.indices[6*I+2]=2+4*I,C.indices[6*I+3]=0+4*I,C.indices[6*I+4]=2+4*I,C.indices[6*I+5]=3+4*I,C.vertices[8*I+0]=A,C.vertices[8*I+1]=P,C.vertices[8*I+2]=A+M.width*t,C.vertices[8*I+3]=P,C.vertices[8*I+4]=A+M.width*t,C.vertices[8*I+5]=P+M.height*t,C.vertices[8*I+6]=A,C.vertices[8*I+7]=P+M.height*t,C.uvs[8*I+0]=w.x0,C.uvs[8*I+1]=w.y0,C.uvs[8*I+2]=w.x1,C.uvs[8*I+3]=w.y1,C.uvs[8*I+4]=w.x2,C.uvs[8*I+5]=w.y2,C.uvs[8*I+6]=w.x3,C.uvs[8*I+7]=w.y3}for(p in this._textWidth=l*t,this._textHeight=(r.y+e.lineHeight)*t,v){var D=v[p];if(0!==this.anchor.x||0!==this.anchor.y)for(var L=0,F=this._textWidth*this.anchor.x,q=this._textHeight*this.anchor.y,K=0;K<D.total;K++)D.vertices[L++]-=F,D.vertices[L++]-=q,D.vertices[L++]-=F,D.vertices[L++]-=q,D.vertices[L++]-=F,D.vertices[L++]-=q,D.vertices[L++]-=F,D.vertices[L++]-=q;this._maxLineHeight=U*t;var Z=D.mesh.geometry.getBuffer("aVertexPosition"),Q=D.mesh.geometry.getBuffer("aTextureCoord"),J=D.mesh.geometry.getIndex();Z.data=D.vertices,Q.data=D.uvs,J.data=D.indices,Z.update(),Q.update(),J.update()}for(p=0;p<i.length;p++)le.push(i[p])},m.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},m.prototype._render=function(e){var t=se.available[this._fontName],r=t.distanceFieldRange,i=t.distanceFieldType,t=t.size;if("none"!==i)for(var i=this.worldTransform,n=i.a,o=i.b,s=i.c,i=i.d,n=Math.sqrt(n*n+o*o),o=Math.sqrt(s*s+i*i),a=(Math.abs(n)+Math.abs(o))/2,u=this._fontSize/t,l=0,h=this._activePagesMeshData;l<h.length;l++)h[l].mesh.shader.uniforms.uFWidth=a*r*u*e.resolution;c.prototype._render.call(this,e)},m.prototype.getLocalBounds=function(){return this.validate(),c.prototype.getLocalBounds.call(this)},m.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(m.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!se.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"anchor",{get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),m.prototype.destroy=function(e){var t,r=this._textureCache;for(t in r)r[t].destroy(),delete r[t];this._textureCache=null,c.prototype.destroy.call(this,e)},m.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},m);function d(){this.constructor=f}function m(e,t){void 0===t&&(t={});var r=c.call(this)||this,t=(r._tint=16777215,Object.assign({},m.styleDefaults,t)),i=t.align,n=t.tint,o=t.maxWidth,s=t.letterSpacing,a=t.fontName,t=t.fontSize;if(se.available[a])return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=i,r._tint=n,r._fontName=a,r._fontSize=t||se.available[a].size,r._text=e,r._maxWidth=o,r._maxLineHeight=0,r._letterSpacing=s,r._anchor=new $.ObservablePoint(function(){r.dirty=!0},r,0,0),r._roundPixels=u.settings.ROUND_PIXELS,r.dirty=!0,r._textureCache={},r;throw new Error('Missing BitmapFont "'+a+'"')}y.add=function(){p.LoaderResource.setExtensionXhrType("fnt",p.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},y.use=function(t,r){var e=_(t.data);if(e)for(var i=y.getBaseUrl(this,t),n=e.parse(t.data),o={},s=function(e){o[e.metadata.pageFile]=e.texture,Object.keys(o).length===n.page.length&&(t.bitmapFont=se.install(n,o,!0),r())},a=0;a<n.page.length;++a){var u,l,h=n.page[a].file,c=i+h,f=!1;for(u in this.resources){var d=this.resources[u];if(d.url===c){d.metadata.pageFile=h,d.texture?s(d):d.onAfterMiddleware.add(s),f=!0;break}}f||(l={crossOrigin:t.crossOrigin,loadType:p.LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:h},t.metadata.imageMetadata),parentResource:t},this.add(c,l,s))}else r()},y.getBaseUrl=function(e,t){var r=t.isDataUrl?"":y.dirname(t.url);return t.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},y.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t};e=y;function y(){}r.BitmapFont=se,r.BitmapFontData=w,r.BitmapFontLoader=e,r.BitmapText=i},{"@pixi/constants":21,"@pixi/core":22,"@pixi/display":23,"@pixi/loaders":66,"@pixi/math":67,"@pixi/mesh":69,"@pixi/settings":77,"@pixi/text":83,"@pixi/utils":85}],83:[function(e,t,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var r=e("@pixi/sprite"),s=e("@pixi/core"),a=e("@pixi/settings"),u=e("@pixi/math"),x=e("@pixi/utils"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};(e=R.TEXT_GRADIENT||(R.TEXT_GRADIENT={}))[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL";var n={align:"left",breakWords:!(e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"),dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:R.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},o=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],l=(h.prototype.clone=function(){var e={};return d(e,this,n),new h(e)},h.prototype.reset=function(){d(this,n,n)},Object.defineProperty(h.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){e=f(e);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fill",{get:function(){return this._fill},set:function(e){e=f(e);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){!function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return;if(e.length!==t.length)return;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return;return 1}(this._fillGradientStops,e)&&(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"stroke",{get:function(){return this._stroke},set:function(e){e=f(e);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),h.prototype.toFontString=function(){for(var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily,r=(t=Array.isArray(this.fontFamily)?t:this.fontFamily.split(",")).length-1;0<=r;r--){var i=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&o.indexOf(i)<0&&(i='"'+i+'"'),t[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},h);function h(e){this.styleID=0,this.reset(),d(this,e,e)}function c(e){return"number"==typeof e?x.hex2string(e):"string"==typeof e&&0===e.indexOf("0x")?e.replace("0x","#"):e}function f(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=c(e[t]);return e}return c(e)}function d(e,t,r){for(var i in r)Array.isArray(t[i])?e[i]=t[i].slice():e[i]=t[i]}S.measureText=function(e,t,r,i){void 0===i&&(i=S._canvas),r=null==r?t.wordWrap:r;var n=t.toFontString(),o=S.measureFont(n),s=(0===o.fontSize&&(o.fontSize=t.fontSize,o.ascent=t.fontSize),i.getContext("2d"));s.font=n;for(var a=(r?S.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),u=new Array(a.length),l=0,h=0;h<a.length;h++){var c=s.measureText(a[h]).width+(a[h].length-1)*t.letterSpacing;u[h]=c,l=Math.max(l,c)}n=l+t.strokeThickness,t.dropShadow&&(n+=t.dropShadowDistance),r=t.lineHeight||o.fontSize+t.strokeThickness,i=Math.max(r,o.fontSize+t.strokeThickness)+(a.length-1)*(r+t.leading);return t.dropShadow&&(i+=t.dropShadowDistance),new S(e,t,n,i,a,u,r+t.leading,l,o)},S.wordWrap=function(e,t,r){for(var i=(r=void 0===r?S._canvas:r).getContext("2d"),n=0,o="",s="",a=Object.create(null),u=t.letterSpacing,r=t.whiteSpace,l=S.collapseSpaces(r),h=S.collapseNewlines(r),c=!l,f=t.wordWrapWidth+u,d=S.tokenize(e),p=0;p<d.length;p++){var _=d[p];if(S.isNewline(_)){if(!h){s+=S.addLine(o),c=!l,o="",n=0;continue}_=" "}if(l){var m=S.isBreakingSpace(_),y=S.isBreakingSpace(o[o.length-1]);if(m&&y)continue}m=S.getFromCache(_,u,a,i);if(f<m)if(""!==o&&(s+=S.addLine(o),o="",n=0),S.canBreakWords(_,t.breakWords))for(var v=S.wordWrapSplit(_),g=0;g<v.length;g++){for(var b=v[g],x=1;v[g+x];){var T=v[g+x],E=b[b.length-1];if(S.canBreakChars(E,T,_,g,t.breakWords))break;b+=T,x++}g+=b.length-1;var O=S.getFromCache(b,u,a,i);f<O+n&&(s+=S.addLine(o),c=!1,o="",n=0),o+=b,n+=O}else{0<o.length&&(s+=S.addLine(o),o="",n=0);y=p===d.length-1;s+=S.addLine(_,!y),c=!1,o="",n=0}else f<m+n&&(c=!1,s+=S.addLine(o),o="",n=0),(0<o.length||!S.isBreakingSpace(_)||c)&&(o+=_,n+=m)}return s+=S.addLine(o,!1)},S.addLine=function(e,t){return void 0===t&&(t=!0),e=S.trimRight(e),e=t?e+"\n":e},S.getFromCache=function(e,t,r,i){var n=r[e];return"number"!=typeof n&&(t=e.length*t,n=i.measureText(e).width+t,r[e]=n),n},S.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},S.collapseNewlines=function(e){return"normal"===e},S.trimRight=function(e){if("string"!=typeof e)return"";for(var t=e.length-1;0<=t;t--){var r=e[t];if(!S.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},S.isNewline=function(e){return"string"==typeof e&&0<=S._newlines.indexOf(e.charCodeAt(0))},S.isBreakingSpace=function(e,t){return"string"==typeof e&&0<=S._breakingSpaces.indexOf(e.charCodeAt(0))},S.tokenize=function(e){var t=[],r="";if("string"!=typeof e)return t;for(var i=0;i<e.length;i++){var n=e[i],o=e[i+1];S.isBreakingSpace(n,o)||S.isNewline(n)?(""!==r&&(t.push(r),r=""),t.push(n)):r+=n}return""!==r&&t.push(r),t},S.canBreakWords=function(e,t){return t},S.canBreakChars=function(e,t,r,i,n){return!0},S.wordWrapSplit=function(e){return e.split("")},S.measureFont=function(e){if(S._fonts[e])return S._fonts[e];for(var t={ascent:0,descent:0,fontSize:0},r=S._canvas,i=S._context,n=(i.font=e,S.METRICS_STRING+S.BASELINE_SYMBOL),o=Math.ceil(i.measureText(n).width),s=Math.ceil(i.measureText(S.BASELINE_SYMBOL).width),a=Math.ceil(S.HEIGHT_MULTIPLIER*s),s=s*S.BASELINE_MULTIPLIER|0,u=(r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(n,0,s),i.getImageData(0,0,o,a).data),r=u.length,l=4*o,h=0,c=0,f=!1,h=0;h<s;++h){for(var d=0;d<l;d+=4)if(255!==u[c+d]){f=!0;break}if(f)break;c+=l}for(t.ascent=s-h,c=r-l,f=!1,h=a;s<h;--h){for(d=0;d<l;d+=4)if(255!==u[c+d]){f=!0;break}if(f)break;c-=l}return t.descent=h-s,t.fontSize=t.ascent+t.descent,S._fonts[e]=t},S.clearMetrics=function(e){(e=void 0===e?"":e)?delete S._fonts[e]:S._fonts={}};var T=S;function S(e,t,r,i,n,o,s,a,u){this.text=e,this.style=t,this.width=r,this.height=i,this.lines=n,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=u}var p,_,e=function(){try{var e=new OffscreenCanvas(0,0),t=e.getContext("2d");return t&&t.measureText?e:document.createElement("canvas")}catch(e){return document.createElement("canvas")}}(),m=(e.width=e.height=10,T._canvas=e,T._context=e.getContext("2d"),T._fonts={},T.METRICS_STRING="|q",T.BASELINE_SYMBOL="M",T.BASELINE_MULTIPLIER=1.4,T.HEIGHT_MULTIPLIER=2,T._newlines=[10,13],{texture:!0,children:!(T._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]),baseTexture:!0}),r=(p=r.Sprite,i(_=E,e=p),_.prototype=null===e?Object.create(e):(y.prototype=e.prototype,new y),E.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();for(var r,i,n=this.context,o=T.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),e=o.width,s=o.height,a=o.lines,u=o.lineHeight,l=o.lineWidths,h=o.maxLineWidth,c=o.fontProperties,f=(this.canvas.width=Math.ceil(Math.ceil(Math.max(1,e)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*t.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,t.dropShadow?2:1),d=0;d<f;++d){var p,_,m=t.dropShadow&&0===d,y=m?Math.ceil(Math.max(1,s)+2*t.padding):0,v=y*this._resolution,g=(m?(n.fillStyle="black",n.strokeStyle="black",m=t.dropShadowColor,m=x.hex2rgb("number"==typeof m?m:x.string2hex(m)),p=t.dropShadowBlur*this._resolution,_=t.dropShadowDistance*this._resolution,n.shadowColor="rgba("+255*m[0]+","+255*m[1]+","+255*m[2]+","+t.dropShadowAlpha+")",n.shadowBlur=p,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*_,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*_+v):(n.fillStyle=this._generateFillStyle(t,a,o),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0),(u-c.fontSize)/2);(!E.nextLineHeightBehavior||u-c.fontSize<0)&&(g=0);for(var b=0;b<a.length;b++)r=t.strokeThickness/2,i=t.strokeThickness/2+b*u+c.ascent+g,"right"===t.align?r+=h-l[b]:"center"===t.align&&(r+=(h-l[b])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[b],r+t.padding,i+t.padding-y,!0),t.fill&&this.drawLetterSpacing(a[b],r+t.padding,i+t.padding-y)}this.updateTexture()}},E.prototype.drawLetterSpacing=function(e,t,r,i){void 0===i&&(i=!1);var n=this._style.letterSpacing,o=E.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===n||o)return o&&(this.context.letterSpacing=n,this.context.textLetterSpacing=n),void(i?this.context.strokeText(e,t,r):this.context.fillText(e,t,r));for(var s=t,a=Array.from?Array.from(e):e.split(""),u=this.context.measureText(e).width,l=0;l<a.length;++l){for(var h=a[l],c=(i?this.context.strokeText(h,s,r):this.context.fillText(h,s,r),""),f=l+1;f<a.length;++f)c+=a[f];s+=u-(h=this.context.measureText(c).width)+n,u=h}},E.prototype.updateTexture=function(){var e=this.canvas,t=(!this._style.trim||(t=x.trimCanvas(e)).data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0)),this._texture),r=this._style,r=r.trim?0:r.padding,i=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-r,t.trim.y=-r,t.orig.width=t._frame.width-2*r,t.orig.height=t._frame.height-2*r,this._onTextureUpdate(),i.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},E.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),p.prototype._render.call(this,e)},E.prototype.getLocalBounds=function(e){return this.updateText(!0),p.prototype.getLocalBounds.call(this,e)},E.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},E.prototype._generateFillStyle=function(e,t,r){var i=e.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var n=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,s=this.canvas.width/this._resolution-n-2*o,a=this.canvas.height/this._resolution-n-2*o,u=i.slice(),l=e.fillGradientStops.slice();if(!l.length)for(var h=u.length+1,c=1;c<h;++c)l.push(c/h);if(u.unshift(i[0]),l.unshift(0),u.push(i[i.length-1]),l.push(1),e.fillGradientType===R.TEXT_GRADIENT.LINEAR_VERTICAL)for(var f=this.context.createLinearGradient(s/2,o,s/2,a+o),d=r.fontProperties.fontSize+e.strokeThickness,c=0;c<t.length;c++)for(var p=r.lineHeight*(c-1)+d,_=r.lineHeight*c,m=_,y=_+d,v=r.lineHeight*(c+1),g=y,b=((g=c+1<t.length&&v<y?(y+v)/2:g)-(m=0<c&&_<p?(_+p)/2:m))/a,x=0;x<u.length;x++){var T=0,T="number"==typeof l[x]?l[x]:x/u.length,T=Math.min(1,Math.max(0,m/a+T*b)),T=Number(T.toFixed(5));f.addColorStop(T,u[x])}else{f=this.context.createLinearGradient(o,a/2,s+o,a/2);for(var E=u.length+1,O=1,c=0;c<u.length;c++){var S=void 0,S="number"==typeof l[c]?l[c]:O/E;f.addColorStop(S,u[c]),O++}}return f},E.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},m,e),p.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(E.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=x.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=x.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"style",{get:function(){return this._style},set:function(e){this._style=(e=e||{})instanceof l?e:new l(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),E.nextLineHeightBehavior=!1,E.experimentalLetterSpacing=!1,E);function y(){this.constructor=_}function E(e,t,r){var i=this,n=!1,o=(r||(r=document.createElement("canvas"),n=!0),r.width=3,r.height=3,s.Texture.from(r));return o.orig=new u.Rectangle,o.trim=new u.Rectangle,(i=p.call(this,o)||this)._ownCanvas=n,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=a.settings.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=e,i.style=t,i.localStyleID=-1,i}R.Text=r,R.TextMetrics=T,R.TextStyle=l},{"@pixi/core":22,"@pixi/math":67,"@pixi/settings":77,"@pixi/sprite":80,"@pixi/utils":85}],84:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("@pixi/settings"),o=(n.settings.TARGET_FPMS=.06,(e=i.UPDATE_PRIORITY||(i.UPDATE_PRIORITY={}))[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",r.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},r.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(e){(this.previous=e).next&&(e.next.previous=this),this.next=e.next,e.next=this},r.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},r);function r(e,t,r,i){void 0===t&&(t=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=i}a.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},a.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},a.prototype.add=function(e,t,r){return void 0===r&&(r=i.UPDATE_PRIORITY.NORMAL),this._addListener(new o(e,t,r))},a.prototype.addOnce=function(e,t,r){return void 0===r&&(r=i.UPDATE_PRIORITY.NORMAL),this._addListener(new o(e,t,r,!0))},a.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}t=(r=t).next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},a.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(a.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),a.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},a.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},a.prototype.update=function(e){var t;if((e=void 0===e?performance.now():e)>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*n.settings.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(a.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){e=Math.min(this.maxFPS,e),e=Math.min(Math.max(0,e)/1e3,n.settings.TARGET_FPMS);this._maxElapsedMS=1/e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){0===e?this._minElapsedMS=0:(e=Math.max(this.minFPS,e),this._minElapsedMS=1/(e/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(a,"shared",{get:function(){var e;return a._shared||((e=a._shared=new a).autoStart=!0,e._protected=!0),a._shared},enumerable:!1,configurable:!0}),Object.defineProperty(a,"system",{get:function(){var e;return a._system||((e=a._system=new a).autoStart=!0,e._protected=!0),a._system},enumerable:!1,configurable:!0});var s=a;function a(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new o(null,null,1/0),this.deltaMS=1/n.settings.TARGET_FPMS,this.elapsedMS=1/n.settings.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}u.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=e)&&e.add(this.render,this,i.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?s.shared:new s,e.autoStart&&this.start()},u.destroy=function(){var e;this._ticker&&(e=this._ticker,this.ticker=null,e.destroy())};e=u;function u(){}i.Ticker=s,i.TickerPlugin=e},{"@pixi/settings":77}],85:[function(e,t,r){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("@pixi/settings"),s=i(e("eventemitter3")),a=i(e("earcut")),u=e("url"),l=e("@pixi/constants"),h={parse:u.parse,format:u.format,resolve:u.resolve},c=(o.settings.RETINA_PREFIX=/@([0-9\.]+)x/,o.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1);var f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var d=function(){for(var e=[],t=[],r=0;r<32;r++)t[e[r]=r]=r;e[l.BLEND_MODES.NORMAL_NPM]=l.BLEND_MODES.NORMAL,e[l.BLEND_MODES.ADD_NPM]=l.BLEND_MODES.ADD,e[l.BLEND_MODES.SCREEN_NPM]=l.BLEND_MODES.SCREEN,t[l.BLEND_MODES.NORMAL]=l.BLEND_MODES.NORMAL_NPM,t[l.BLEND_MODES.ADD]=l.BLEND_MODES.ADD_NPM,t[l.BLEND_MODES.SCREEN]=l.BLEND_MODES.SCREEN_NPM;var i=[];return i.push(t),i.push(e),i}();function p(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var _={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var m=0;var y={};var v=Object.create(null),g=Object.create(null);b.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},b.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},b.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(b.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0});e=b;function b(e,t,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||o.settings.RESOLUTION,this.resize(e,t)}var x,T=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;Object.defineProperty(r,"isMobile",{enumerable:!0,get:function(){return o.isMobile}}),r.EventEmitter=s,r.earcut=a,r.BaseTextureCache=g,r.CanvasRenderTarget=e,r.DATA_URI=T,r.ProgramCache={},r.TextureCache=v,r.clearTextureCache=function(){for(var e in v)delete v[e];for(e in g)delete g[e]},r.correctBlendMode=function(e,t){return d[t?1:0][e]},r.createIndicesForQuads=function(e,t){var r=6*e;if((t=(t=void 0===t?null:t)||new Uint16Array(r)).length!==r)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+r);for(var i=0,n=0;i<r;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t},r.decomposeDataUri=function(e){if(e=T.exec(e))return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}},r.deprecation=function(e,t,r){var i;void 0===r&&(r=3),y[t]||(void 0===(i=(new Error).stack)?void 0:(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(void 0,void 0,void 0):(void 0,void 0)),y[t]=!0)},r.destroyTextureCache=function(){for(var e in v)v[e].destroy();for(e in g)g[e].destroy()},r.determineCrossOrigin=function(e,t){if(void 0===t&&(t=globalThis.location),0===e.indexOf("data:"))return"";t=t||globalThis.location,(x=x||document.createElement("a")).href=e;var r=!(e=h.parse(x.href)).port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&r&&e.protocol===t.protocol?"":"anonymous"},r.getBufferType=p,r.getResolutionOfUrl=function(e,t){return(e=o.settings.RETINA_PREFIX.exec(e))?parseFloat(e[1]):void 0!==t?t:1},r.hex2rgb=function(e,t){return(t=void 0===t?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},r.hex2string=function(e){return e=e.toString(16),"#"+("000000".substring(0,6-e.length)+e)},r.interleaveTypedArrays=function(e,t){for(var r=0,i=0,n={},o=0;o<e.length;o++)i+=t[o],r+=e[o].length;for(var s=new ArrayBuffer(4*r),a=null,u=0,o=0;o<e.length;o++){var l=t[o],h=e[o],c=p(h);n[c]||(n[c]=new _[c](s));for(var a=n[c],f=0;f<h.length;f++)a[(f/l|0)*i+u+f%l]=h[f];u+=l}return new Float32Array(s)},r.isPow2=function(e){return!(e&e-1||!e)},r.isWebGLSupported=function(){return n=void 0===n?function(){var e={stencil:!0,failIfMajorPerformanceCaveat:o.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var t,r=document.createElement("canvas"),i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),n=!(!i||!i.getContextAttributes().stencil);return i&&(t=i.getExtension("WEBGL_lose_context"))&&t.loseContext(),i=null,n}catch(e){return!1}}():n},r.log2=function(e){var t=(65535<e?1:0)<<4,r=(255<(e>>>=t)?1:0)<<3;return(t|=r)|(r=(15<(e>>>=r)?1:0)<<2)|(r=(3<(e>>>=r)?1:0)<<1)|(e>>>=r)>>1},r.nextPow2=function(e){return e+=0===e?1:0,--e,(e=(e=(e=(e=(e|=e>>>1)|e>>>2)|e>>>4)|e>>>8)|e>>>16)+1},r.premultiplyBlendMode=d,r.premultiplyRgba=function(e,t,r,i){return r=r||new Float32Array(4),i||void 0===i?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r},r.premultiplyTint=function(e,t){return 1===t?(255*t<<24)+e:0===t?0:(255*t<<24)+(((e>>16&255)*t+.5|0)<<16)+(((e>>8&255)*t+.5|0)<<8)+((255&e)*t+.5|0)},r.premultiplyTintToRgba=function(e,t,r,i){return(r=r||new Float32Array(4))[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,!i&&void 0!==i||(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r},r.removeItems=function(e,t,r){var i=e.length;if(!(i<=t||0===r)){for(var n=i-(r=i<t+r?i-t:r),o=t;o<n;++o)e[o]=e[o+r];e.length=n}},r.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},r.sayHello=function(e){var t;c||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(t=globalThis.console).log.apply(t,["\n %c %c %c PixiJS 6.3.0 -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):globalThis.console&&globalThis.console.log("PixiJS 6.3.0 - "+e+" - http://www.pixijs.com/"),c=!0)},r.sign=function(e){return 0===e?0:e<0?-1:1},r.skipHello=function(){c=!0},r.string2hex=function(e){return"string"==typeof e&&"#"===(e=f[e.toLowerCase()]||e)[0]&&(e=e.slice(1)),parseInt(e,16)},r.trimCanvas=function(e){for(var t,r,i=e.width,n=e.height,o=(e=e.getContext("2d")).getImageData(0,0,i,n).data,s=o.length,a={top:null,left:null,right:null,bottom:null},u=null,l=0;l<s;l+=4)0!==o[l+3]&&(t=l/4%i,r=~~(l/4/i),null===a.top&&(a.top=r),(null===a.left||t<a.left)&&(a.left=t),(null===a.right||a.right<t)&&(a.right=1+t),(null===a.bottom||a.bottom<r)&&(a.bottom=r));return null!==a.top&&(i=a.right-a.left,n=a.bottom-a.top+1,u=e.getImageData(a.left,a.top,i,n)),{height:n,width:i,data:u}},r.uid=function(){return++m},r.url=h},{"@pixi/constants":21,"@pixi/settings":77,earcut:87,eventemitter3:88,url:101}],86:[function(e,P,C){!function(A){!function(){var e=this,t="object"==typeof C&&C&&!C.nodeType&&C,r="object"==typeof P&&P&&!P.nodeType&&P,i="object"==typeof A&&A;i.global!==i&&i.window!==i&&i.self!==i||(e=i);var n,o,m=2147483647,y=36,v=26,s=38,a=700,u=/^xn--/,l=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=y-1,g=Math.floor,b=String.fromCharCode;function x(e){throw new RangeError(c[e])}function d(e,t){for(var r=e.length,i=[];r--;)i[r]=t(e[r]);return i}function p(e,t){var r=e.split("@"),i="",r=(1<r.length&&(i=r[0]+"@",e=r[1]),(e=e.replace(h,".")).split("."));return i+d(r,t).join(".")}function T(e){for(var t,r,i=[],n=0,o=e.length;n<o;)55296<=(t=e.charCodeAt(n++))&&t<=56319&&n<o?56320==(64512&(r=e.charCodeAt(n++)))?i.push(((1023&t)<<10)+(1023&r)+65536):(i.push(t),n--):i.push(t);return i}function _(e){return d(e,function(e){var t="";return 65535<e&&(t+=b((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=b(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,r){var i=0;for(e=r?g(e/a):e>>1,e+=g(e/t);f*v>>1<e;i+=y)e=g(e/f);return g(i+(f+1)*e/(e+s))}function S(e){var t,r,i,n,o,s,a,u=[],l=e.length,h=0,c=128,f=72,d=e.lastIndexOf("-");for(d<0&&(d=0),r=0;r<d;++r)128<=e.charCodeAt(r)&&x("not-basic"),u.push(e.charCodeAt(r));for(i=0<d?d+1:0;i<l;){for(n=h,o=1,s=y;l<=i&&x("invalid-input"),a=e.charCodeAt(i++),(y<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:y)||a>g((m-h)/o))&&x("overflow"),h+=a*o,!(a<(a=s<=f?1:f+v<=s?v:s-f));s+=y)o>g(m/(a=y-a))&&x("overflow"),o*=a;f=O(h-n,t=u.length+1,0==n),g(h/t)>m-c&&x("overflow"),c+=g(h/t),h%=t,u.splice(h++,0,c)}return _(u)}function R(e){for(var t,r,i,n,o,s,a,u,l,h,c=[],f=(e=T(e)).length,d=128,p=72,_=t=0;_<f;++_)(a=e[_])<128&&c.push(b(a));for(r=i=c.length,i&&c.push("-");r<f;){for(n=m,_=0;_<f;++_)d<=(a=e[_])&&a<n&&(n=a);for(n-d>g((m-t)/(u=r+1))&&x("overflow"),t+=(n-d)*u,d=n,_=0;_<f;++_)if((a=e[_])<d&&++t>m&&x("overflow"),a==d){for(o=t,s=y;!(o<(l=s<=p?1:p+v<=s?v:s-p));s+=y)c.push(b(E(l+(h=o-l)%(l=y-l),0))),o=g(h/l);c.push(b(E(o,0))),p=O(t,u,r==i),t=0,++r}++t,++d}return c.join("")}if(n={version:"1.4.1",ucs2:{decode:T,encode:_},decode:S,encode:R,toASCII:function(e){return p(e,function(e){return l.test(e)?"xn--"+R(e):e})},toUnicode:function(e){return p(e,function(e){return u.test(e)?S(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return n});else if(t&&r)if(P.exports==t)r.exports=n;else for(o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);else e.punycode=n}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],87:[function(e,t,r){"use strict";function i(e,t,r){r=r||2;var i,n,o,s,a,u=t&&t.length,l=u?t[0]*r:e.length,h=_(e,0,l,r,!0),c=[];if(!h||h.next===h.prev)return c;if(u&&(h=function(e,t,r,i){var n,o,s,a,u=[];for(n=0,o=t.length;n<o;n++)a=t[n]*i,s=n<o-1?t[n+1]*i:e.length,(a=_(e,a,s,i,!1))===a.next&&(a.steiner=!0),u.push(function(e){var t=e,r=e;for(;(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next,t!==e;);return r}(a));for(u.sort(m),n=0;n<u.length;n++)r=function(e,t){var r=function(e,t){var r,i=t,n=e.x,o=e.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&s<a){if((s=a)===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==t);if(!r)return null;if(n===s)return r;var u,l=r,h=r.x,c=r.y,f=1/0;i=r;for(;n>=i.x&&i.x>=h&&n!==i.x&&P(o<c?n:s,o,h,c,o<c?s:n,o,i.x,i.y)&&(u=Math.abs(o-i.y)/(n-i.x),I(i,e)&&(u<f||u===f&&(i.x>r.x||i.x===r.x&&function(e,t){return C(e.prev,e,t.prev)<0&&C(t.next,e,e.next)<0}(r,i)))&&(r=i,f=u)),i=i.next,i!==l;);return r}(e,t);if(!r)return t;var e=D(r,e),i=S(r,r.next);return S(e,e.next),t===r?i:t}(u[n],r),r=S(r,r.next);return r}(e,t,h,r)),e.length>80*r){for(var f=i=e[0],d=n=e[1],p=r;p<l;p+=r)(o=e[p])<f&&(f=o),(s=e[p+1])<d&&(d=s),i<o&&(i=o),n<s&&(n=s);a=0!==(a=Math.max(i-f,n-d))?1/a:0}return R(h,c,r,f,d,a),c}function _(e,t,r,i,n){var o,s;if(n===0<y(e,t,r,i))for(o=t;o<r;o+=i)s=a(o,e[o],e[o+1],s);else for(o=r-i;t<=o;o-=i)s=a(o,e[o],e[o+1],s);return s&&M(s,s.next)&&(L(s),s=s.next),s}function S(e,t){if(!e)return e;t=t||e;var r,i=e;do{if(r=!1,i.steiner||!M(i,i.next)&&0!==C(i.prev,i,i.next))i=i.next;else{if(L(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function R(e,t,r,i,n,o,s){if(e){if(!s&&o){for(var a=e,u=i,l=n,h=o,c=a;null===c.z&&(c.z=A(c.x,c.y,u,l,h)),c.prevZ=c.prev,c.nextZ=c.next,(c=c.next)!==a;);c.prevZ.nextZ=null,c.prevZ=null;var f,d,p,_,m,y,v,g,b=c,x=1;do{for(d=b,m=b=null,y=0;d;){for(y++,p=d,f=v=0;f<x&&(v++,p=p.nextZ);f++);for(g=x;0<v||0<g&&p;)0!==v&&(0===g||!p||d.z<=p.z)?(d=(_=d).nextZ,v--):(p=(_=p).nextZ,g--),m?m.nextZ=_:b=_,_.prevZ=m,m=_;d=p}}while(m.nextZ=null,x*=2,1<y)}for(var T,E,O=e;e.prev!==e.next;)if(T=e.prev,E=e.next,o?function(e,t,r,i){var n=e.prev,o=e,s=e.next;if(0<=C(n,o,s))return;var a=(n.x<o.x?n.x<s.x?n:s:o.x<s.x?o:s).x,u=(n.y<o.y?n.y<s.y?n:s:o.y<s.y?o:s).y,l=(n.x>o.x?n.x>s.x?n:s:o.x>s.x?o:s).x,h=(n.y>o.y?n.y>s.y?n:s:o.y>s.y?o:s).y,c=A(a,u,t,r,i),f=A(l,h,t,r,i),d=e.prevZ,p=e.nextZ;for(;d&&d.z>=c&&p&&p.z<=f;){if(d!==e.prev&&d!==e.next&&P(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&0<=C(d.prev,d,d.next))return;if(d=d.prevZ,p!==e.prev&&p!==e.next&&P(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=C(p.prev,p,p.next))return;p=p.nextZ}for(;d&&d.z>=c;){if(d!==e.prev&&d!==e.next&&P(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&0<=C(d.prev,d,d.next))return;d=d.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&P(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=C(p.prev,p,p.next))return;p=p.nextZ}return 1}(e,i,n,o):function(e){var t=e.prev,r=e,i=e.next;if(0<=C(t,r,i))return;var n=e.next.next;for(;n!==e.prev;){if(P(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=C(n.prev,n,n.next))return;n=n.next}return 1}(e))t.push(T.i/r),t.push(e.i/r),t.push(E.i/r),L(e),e=E.next,O=E.next;else if((e=E)===O){s?1===s?R(e=function(e,t,r){var i=e;do{var n=i.prev,o=i.next.next}while(!M(n,o)&&w(n,i,i.next,o)&&I(n,o)&&I(o,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(o.i/r),L(i),L(i.next),i=e=o),i=i.next,i!==e);return S(i)}(S(e),t,r),t,r,i,n,o,2):2===s&&function(e,t,r,i,n,o){var s=e;do{for(var a,u=s.next.next;u!==s.prev;){if(s.i!==u.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&w(r,r.next,e,t))return 1}while(r=r.next,r!==e);return}(e,t)&&(I(e,t)&&I(t,e)&&function(e,t){var r=e,i=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;for(;r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==e;);return i}(e,t)&&(C(e.prev,e,t.prev)||C(e,t.prev,t))||M(e,t)&&0<C(e.prev,e,e.next)&&0<C(t.prev,t,t.next))}(s,u))return a=D(s,u),s=S(s,s.next),a=S(a,a.next),R(s,t,r,i,n,o),R(a,t,r,i,n,o);u=u.next}}while(s=s.next,s!==e)}(e,t,r,i,n,o):R(S(e),t,r,i,n,o,1);break}}}function m(e,t){return e.x-t.x}function A(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function P(e,t,r,i,n,o,s,a){return 0<=(n-s)*(t-a)-(e-s)*(o-a)&&0<=(e-s)*(i-a)-(r-s)*(t-a)&&0<=(r-s)*(o-a)-(n-s)*(i-a)}function C(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function M(e,t){return e.x===t.x&&e.y===t.y}function w(e,t,r,i){var n=l(C(e,t,r)),o=l(C(e,t,i)),s=l(C(r,i,e)),a=l(C(r,i,t));return n!==o&&s!==a||(0===n&&u(e,r,t)||(0===o&&u(e,i,t)||(0===s&&u(r,e,i)||!(0!==a||!u(r,t,i)))))}function u(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function l(e){return 0<e?1:e<0?-1:0}function I(e,t){return C(e.prev,e,e.next)<0?0<=C(e,t,e.next)&&0<=C(e,e.prev,t):C(e,t,e.prev)<0||C(e,e.next,t)<0}function D(e,t){var r=new s(e.i,e.x,e.y),i=new s(t.i,t.x,t.y),n=e.next,o=t.prev;return(e.next=t).prev=e,(r.next=n).prev=r,(i.next=r).prev=i,(o.next=i).prev=o,i}function a(e,t,r,i){e=new s(e,t,r);return i?(e.next=i.next,(e.prev=i).next.prev=e,i.next=e):(e.prev=e).next=e,e}function L(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function s(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y(e,t,r,i){for(var n=0,o=t,s=r-i;o<r;o+=i)n+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return n}t.exports=i,(t.exports.default=i).deviation=function(e,t,r,i){var n=t&&t.length,o=n?t[0]*r:e.length,s=Math.abs(y(e,0,o,r));if(n)for(var a=0,u=t.length;a<u;a++){var l=t[a]*r,h=a<u-1?t[a+1]*r:e.length;s-=Math.abs(y(e,l,h,r))}for(var c=0,a=0;a<i.length;a+=3){var f=i[a]*r,d=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((e[f]-e[p])*(e[1+d]-e[1+f])-(e[f]-e[d])*(e[1+p]-e[1+f]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},i.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[n][o][s]);0<n&&(i+=e[n-1].length,r.holes.push(i))}return r}},{}],88:[function(e,t,r){"use strict";var i=Object.prototype.hasOwnProperty,d="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,i,n){if("function"!=typeof r)throw new TypeError("The listener must be a function");r=new o(r,i||e,n),i=d?d+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],r]:e._events[i].push(r):(e._events[i]=r,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(d=!1)),a.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)i.call(e,t)&&r.push(d?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var e=d?d+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var r=0,i=t.length,n=new Array(i);r<i;r++)n[r]=t[r].fn;return n},a.prototype.listenerCount=function(e){e=d?d+e:e,e=this._events[e];return e?e.fn?1:e.length:0},a.prototype.emit=function(e,t,r,i,n,o){var s=d?d+e:e;if(!this._events[s])return!1;var a,u=this._events[s],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,n),!0;case 6:return u.fn.call(u.context,t,r,i,n,o),!0}for(f=1,a=new Array(l-1);f<l;f++)a[f-1]=arguments[f];u.fn.apply(u.context,a)}else for(var h,c=u.length,f=0;f<c;f++)switch(u[f].once&&this.removeListener(e,u[f].fn,void 0,!0),l){case 1:u[f].fn.call(u[f].context);break;case 2:u[f].fn.call(u[f].context,t);break;case 3:u[f].fn.call(u[f].context,t,r);break;case 4:u[f].fn.call(u[f].context,t,r,i);break;default:if(!a)for(h=1,a=new Array(l-1);h<l;h++)a[h-1]=arguments[h];u[f].fn.apply(u[f].context,a)}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,r,i){e=d?d+e:e;if(!this._events[e])return this;if(!t)return u(this,e),this;var n=this._events[e];if(n.fn)n.fn!==t||i&&!n.once||r&&n.context!==r||u(this,e);else{for(var o=0,s=[],a=n.length;o<a;o++)(n[o].fn!==t||i&&!n[o].once||r&&n[o].context!==r)&&s.push(n[o]);s.length?this._events[e]=1===s.length?s[0]:s:u(this,e)}return this},a.prototype.removeAllListeners=function(e){return e?(e=d?d+e:e,this._events[e]&&u(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=d,a.EventEmitter=a,void 0!==t&&(t.exports=a)},{}],89:[function(e,t,r){"use strict";var i="object"==typeof Reflect?Reflect:null,u=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};var n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(a,u){return new Promise(function(e,t){function r(e){a.removeListener(u,i),t(e)}function i(){"function"==typeof a.removeListener&&a.removeListener("error",r),e([].slice.call(arguments))}var n,o,s;m(a,u,i,{once:!0}),"error"!==u&&(o=r,s={once:!0},"function"==typeof(n=a).on&&m(n,"error",o,s))})},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,r,i){var n,o;return l(r),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,r.listener||r),n=e._events),o=n[t]),void 0===o?(o=n[t]=r,++e._eventsCount):("function"==typeof o?o=n[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),0<(n=h(e))&&o.length>n&&!o.warned&&(o.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=o.length,r=i,console&&console.warn&&void 0)),e}function f(e,t,r){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=r,e.wrapFn=t}function d(e,t,r){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var i=e,n=new Array(i.length),o=0;o<n.length;++o)n[o]=i[o].listener||i[o];return n}return _(e,e.length)}}function p(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function _(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function m(r,i,n,o){if("function"==typeof r.on)o.once?r.once(i,n):r.on(i,n);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(i,function e(t){o.once&&r.removeEventListener(i,e),n(t)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return h(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){if((o=0<t.length?t[0]:o)instanceof Error)throw o;i=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw i.context=o,i}var o=n[e];if(void 0===o)return!1;if("function"==typeof o)u(o,this,t);else for(var s=o.length,a=_(o,s),r=0;r<s;++r)u(a[r],this,t);return!0},s.prototype.on=s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,f(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var r,i,n,o,s;if(l(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;0<=o;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,n=o;break}if(n<0)return this;if(0===n)r.shift();else{for(var a=r,u=n;u+1<a.length;u++)a[u]=a[u+1];a.pop()}1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},s.prototype.removeAllListeners=function(e){var t,r=this._events;if(void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){for(var i,n=Object.keys(r),o=0;o<n.length;++o)"removeListener"!==(i=n[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},{}],90:[function(e,t,r){"use strict";r.__esModule=!0;var i,n=e("./isMobile");for(i in n)r.hasOwnProperty(i)||(r[i]=n[i]);e=e("./isMobile");r.default=e.default},{"./isMobile":91}],91:[function(e,t,r){"use strict";r.__esModule=!0;function n(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&1<e.maxTouchPoints&&"undefined"==typeof MSStream}var o=/iPhone/i,s=/iPod/i,a=/iPad/i,u=/\biOS-universal(?:.+)Mac\b/i,l=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,c=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,f=/Silk/i,d=/Windows Phone/i,p=/\bWindows(?:.+)ARM\b/i,_=/BlackBerry/i,m=/BB10/i,y=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,g=/Mobile(?:.+)Firefox\b/i;r.default=function(e){var t,r={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?r.userAgent=e:e&&e.userAgent&&(r={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=(e=r.userAgent).split("[FBAN");return void 0!==(i=(e=void 0!==i[1]?i[0]:e).split("Twitter"))[1]&&(e=i[0]),t=e,(e={apple:{phone:(i=function(e){return e.test(t)})(o)&&!i(d),ipod:i(s),tablet:!i(o)&&(i(a)||n(r))&&!i(d),universal:i(u),device:(i(o)||i(s)||i(a)||i(u)||n(r))&&!i(d)},amazon:{phone:i(c),tablet:!i(c)&&i(f),device:i(c)||i(f)},android:{phone:!i(d)&&i(c)||!i(d)&&i(l),tablet:!i(d)&&!i(c)&&!i(l)&&(i(f)||i(h)),device:!i(d)&&(i(c)||i(f)||i(l)||i(h))||i(/\bokhttp\b/i)},windows:{phone:i(d),tablet:i(p),device:i(d)||i(p)},other:{blackberry:i(_),blackberry10:i(m),opera:i(y),firefox:i(g),chrome:i(v),device:i(_)||i(m)||i(y)||i(g)||i(v)},any:!1,phone:!1,tablet:!1}).any=e.apple.device||e.android.device||e.windows.device||e.other.device,e.phone=e.apple.phone||e.android.phone||e.windows.phone,e.tablet=e.apple.tablet||e.android.tablet||e.windows.tablet,e}},{}],92:[function(e,t,r){"use strict";var u=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},i)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),n=1;n<arguments.length;n++){for(var o in r=Object(arguments[n]))l.call(r,o)&&(i[o]=r[o]);if(u)for(var s=u(r),a=0;a<s.length;a++)h.call(r,s[a])&&(i[s[a]]=r[s[a]])}return i}},{}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("@pixi/filter-adjustment"),n=e("@pixi/filter-advanced-bloom"),o=e("@pixi/filter-ascii"),s=e("@pixi/filter-bevel"),a=e("@pixi/filter-bloom"),u=e("@pixi/filter-bulge-pinch"),l=e("@pixi/filter-color-map"),h=e("@pixi/filter-color-overlay"),c=e("@pixi/filter-color-replace"),f=e("@pixi/filter-convolution"),d=e("@pixi/filter-cross-hatch"),p=e("@pixi/filter-crt"),_=e("@pixi/filter-dot"),m=e("@pixi/filter-drop-shadow"),y=e("@pixi/filter-emboss"),v=e("@pixi/filter-glitch"),g=e("@pixi/filter-glow"),b=e("@pixi/filter-godray"),x=e("@pixi/filter-kawase-blur"),T=e("@pixi/filter-motion-blur"),E=e("@pixi/filter-multi-color-replace"),O=e("@pixi/filter-old-film"),S=e("@pixi/filter-outline"),R=e("@pixi/filter-pixelate"),A=e("@pixi/filter-radial-blur"),P=e("@pixi/filter-reflection"),C=e("@pixi/filter-rgb-split"),M=e("@pixi/filter-shockwave"),w=e("@pixi/filter-simple-lightmap"),I=e("@pixi/filter-tilt-shift"),D=e("@pixi/filter-twist"),L=e("@pixi/filter-zoom-blur");Object.keys(i).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})}),Object.keys(n).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})}),Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(s).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})}),Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})}),Object.keys(u).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),Object.keys(l).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})}),Object.keys(h).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return h[e]}})}),Object.keys(c).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})}),Object.keys(f).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}})}),Object.keys(d).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}})}),Object.keys(p).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}})}),Object.keys(_).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return _[e]}})}),Object.keys(m).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return m[e]}})}),Object.keys(y).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return y[e]}})}),Object.keys(v).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return v[e]}})}),Object.keys(g).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return g[e]}})}),Object.keys(b).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return b[e]}})}),Object.keys(x).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return x[e]}})}),Object.keys(T).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return T[e]}})}),Object.keys(E).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return E[e]}})}),Object.keys(O).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return O[e]}})}),Object.keys(S).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return S[e]}})}),Object.keys(R).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return R[e]}})}),Object.keys(A).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return A[e]}})}),Object.keys(P).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return P[e]}})}),Object.keys(C).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return C[e]}})}),Object.keys(M).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return M[e]}})}),Object.keys(w).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return w[e]}})}),Object.keys(I).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return I[e]}})}),Object.keys(D).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return D[e]}})}),Object.keys(L).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return L[e]}})})},{"@pixi/filter-adjustment":25,"@pixi/filter-advanced-bloom":26,"@pixi/filter-ascii":28,"@pixi/filter-bevel":29,"@pixi/filter-bloom":30,"@pixi/filter-bulge-pinch":32,"@pixi/filter-color-map":33,"@pixi/filter-color-overlay":35,"@pixi/filter-color-replace":36,"@pixi/filter-convolution":37,"@pixi/filter-cross-hatch":38,"@pixi/filter-crt":39,"@pixi/filter-dot":41,"@pixi/filter-drop-shadow":42,"@pixi/filter-emboss":43,"@pixi/filter-glitch":45,"@pixi/filter-glow":46,"@pixi/filter-godray":47,"@pixi/filter-kawase-blur":48,"@pixi/filter-motion-blur":49,"@pixi/filter-multi-color-replace":50,"@pixi/filter-old-film":52,"@pixi/filter-outline":53,"@pixi/filter-pixelate":54,"@pixi/filter-radial-blur":55,"@pixi/filter-reflection":56,"@pixi/filter-rgb-split":57,"@pixi/filter-shockwave":58,"@pixi/filter-simple-lightmap":59,"@pixi/filter-tilt-shift":60,"@pixi/filter-twist":61,"@pixi/filter-zoom-blur":62}],94:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),e("@pixi/polyfill");var i=e("@pixi/utils"),n=e("@pixi/accessibility"),o=e("@pixi/interaction"),s=e("@pixi/app"),a=e("@pixi/core"),u=e("@pixi/extract"),l=e("@pixi/loaders"),h=e("@pixi/compressed-textures"),c=e("@pixi/particle-container"),f=e("@pixi/prepare"),d=e("@pixi/spritesheet"),p=e("@pixi/sprite-tiling"),_=e("@pixi/text-bitmap"),m=e("@pixi/ticker"),y=e("@pixi/filter-alpha"),v=e("@pixi/filter-blur"),g=e("@pixi/filter-color-matrix"),b=e("@pixi/filter-displacement"),x=e("@pixi/filter-fxaa"),T=e("@pixi/filter-noise"),E=(e("@pixi/mixin-cache-as-bitmap"),e("@pixi/mixin-get-child-by-name"),e("@pixi/mixin-get-global-position"),e("@pixi/constants")),O=e("@pixi/display"),S=e("@pixi/graphics"),R=e("@pixi/math"),A=e("@pixi/mesh"),P=e("@pixi/mesh-extras"),C=e("@pixi/runner"),M=e("@pixi/sprite"),w=e("@pixi/sprite-animated"),I=e("@pixi/text"),D=e("@pixi/settings"),e=(a.Renderer.registerPlugin("accessibility",n.AccessibilityManager),a.Renderer.registerPlugin("extract",u.Extract),a.Renderer.registerPlugin("interaction",o.InteractionManager),a.Renderer.registerPlugin("particle",c.ParticleRenderer),a.Renderer.registerPlugin("prepare",f.Prepare),a.Renderer.registerPlugin("batch",a.BatchRenderer),a.Renderer.registerPlugin("tilingSprite",p.TilingSpriteRenderer),l.Loader.registerPlugin(_.BitmapFontLoader),l.Loader.registerPlugin(h.CompressedTextureLoader),l.Loader.registerPlugin(h.DDSLoader),l.Loader.registerPlugin(h.KTXLoader),l.Loader.registerPlugin(d.SpritesheetLoader),s.Application.registerPlugin(m.TickerPlugin),s.Application.registerPlugin(l.AppLoaderPlugin),{AlphaFilter:y.AlphaFilter,BlurFilter:v.BlurFilter,BlurFilterPass:v.BlurFilterPass,ColorMatrixFilter:g.ColorMatrixFilter,DisplacementFilter:b.DisplacementFilter,FXAAFilter:x.FXAAFilter,NoiseFilter:T.NoiseFilter});Object.keys(n).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})}),Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(s).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})}),Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})}),Object.keys(u).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),Object.keys(l).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})}),Object.keys(h).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return h[e]}})}),Object.keys(c).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})}),Object.keys(f).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}})}),Object.keys(d).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}})}),Object.keys(p).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}})}),Object.keys(_).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return _[e]}})}),Object.keys(m).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return m[e]}})}),Object.keys(E).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return E[e]}})}),Object.keys(O).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return O[e]}})}),Object.keys(S).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return S[e]}})}),Object.keys(R).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return R[e]}})}),Object.keys(A).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return A[e]}})}),Object.keys(P).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return P[e]}})}),Object.keys(C).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return C[e]}})}),Object.keys(M).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return M[e]}})}),Object.keys(w).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return w[e]}})}),Object.keys(I).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return I[e]}})}),Object.keys(D).forEach(function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return D[e]}})}),r.utils=i,r.VERSION="6.3.0",r.filters=e},{"@pixi/accessibility":18,"@pixi/app":19,"@pixi/compressed-textures":20,"@pixi/constants":21,"@pixi/core":22,"@pixi/display":23,"@pixi/extract":24,"@pixi/filter-alpha":27,"@pixi/filter-blur":31,"@pixi/filter-color-matrix":34,"@pixi/filter-displacement":40,"@pixi/filter-fxaa":44,"@pixi/filter-noise":51,"@pixi/graphics":63,"@pixi/interaction":64,"@pixi/loaders":66,"@pixi/math":67,"@pixi/mesh":69,"@pixi/mesh-extras":68,"@pixi/mixin-cache-as-bitmap":70,"@pixi/mixin-get-child-by-name":71,"@pixi/mixin-get-global-position":72,"@pixi/particle-container":73,"@pixi/polyfill":74,"@pixi/prepare":75,"@pixi/runner":76,"@pixi/settings":77,"@pixi/sprite":80,"@pixi/sprite-animated":78,"@pixi/sprite-tiling":79,"@pixi/spritesheet":81,"@pixi/text":83,"@pixi/text-bitmap":82,"@pixi/ticker":84,"@pixi/utils":85}],95:[function(e,t,r){var i,n,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var u,l=[],h=!1,c=-1;function f(){h&&u&&(h=!1,u.length?l=u.concat(l):c=-1,l.length&&d())}function d(){if(!h){for(var e=a(f),t=(h=!0,l.length);t;){for(u=l,l=[];++c<t;)u&&u[c].run();c=-1,t=l.length}u=null,h=!1,!function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return(n=clearTimeout)(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function _(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=_,t.addListener=_,t.once=_,t.off=_,t.removeListener=_,t.removeAllListeners=_,t.emit=_,t.prependListener=_,t.prependOnceListener=_,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],96:[function(e,f,t){!function(r){!function(){"use strict";var t=setTimeout;function u(e){return Boolean(e&&void 0!==e.length)}function i(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function n(r,i){for(;3===r._state;)r=r._value;0===r._state?r._deferreds.push(i):(r._handled=!0,o._immediateFn(function(){var e,t=1===r._state?i.onFulfilled:i.onRejected;if(null===t)(1===r._state?s:a)(i.promise,r._value);else{try{e=t(r._value)}catch(e){return void a(i.promise,e)}s(i.promise,e)}}))}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if(e instanceof o)return t._state=3,t._value=e,void l(t);if("function"==typeof r)return void c((i=r,n=e,function(){i.apply(n,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){a(t,e)}var i,n}function a(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)n(e,e._deferreds[t]);e._deferreds=null}function h(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function c(e,t){var r=!1;try{e(function(e){r||(r=!0,s(t,e))},function(e){r||(r=!0,a(t,e))})}catch(e){if(r)return;r=!0,a(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var r=new this.constructor(i);return n(this,new h(e,t,r)),r},o.prototype.finally=function(t){var r=this.constructor;return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){return r.reject(e)})})},o.all=function(t){return new o(function(n,o){if(!u(t))return o(new TypeError("Promise.all accepts an array"));var s=Array.prototype.slice.call(t);if(0===s.length)return n([]);var a=s.length;for(var e=0;e<s.length;e++)!function t(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if("function"==typeof i)return void i.call(e,function(e){t(r,e)},o)}s[r]=e,0==--a&&n(s)}catch(e){o(e)}}(e,s[e])})},o.allSettled=function(r){return new this(function(n,e){if(!r||void 0===r.length)return e(new TypeError(typeof r+" "+r+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(r);if(0===o.length)return n([]);var s=o.length;for(var t=0;t<o.length;t++)!function t(r,e){if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if("function"==typeof i)return void i.call(e,function(e){t(r,e)},function(e){o[r]={status:"rejected",reason:e},0==--s&&n(o)})}o[r]={status:"fulfilled",value:e},0==--s&&n(o)}(t,o[t])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(r){return new o(function(e,t){t(r)})},o.race=function(n){return new o(function(e,t){if(!u(n))return t(new TypeError("Promise.race accepts an array"));for(var r=0,i=n.length;r<i;r++)o.resolve(n[r]).then(e,t)})},o._immediateFn="function"==typeof r?function(e){r(e)}:function(e){t(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&void 0},f.exports=o}.call(this)}.call(this,e("timers").setImmediate)},{timers:100}],97:[function(e,t,r){"use strict";t.exports=function(e,t,r,i){r=r||"=";var n={};if("string"!=typeof e||0===e.length)return n;var o=/\+/g,t=(e=e.split(t=t||"&"),1e3),s=(i&&"number"==typeof i.maxKeys&&(t=i.maxKeys),e.length);0<t&&t<s&&(s=t);for(var a=0;a<s;++a){var u,l=e[a].replace(o,"%20"),h=l.indexOf(r),h=0<=h?(u=l.substr(0,h),l.substr(h+1)):(u=l,""),l=decodeURIComponent(u),h=decodeURIComponent(h);Object.prototype.hasOwnProperty.call(n,l)?c(n[l])?n[l].push(h):n[l]=[n[l],h]:n[l]=h}return n};var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],98:[function(e,t,r){"use strict";function o(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(r,i,n,e){return i=i||"&",n=n||"=","object"==typeof(r=null===r?void 0:r)?a(u(r),function(e){var t=encodeURIComponent(o(e))+n;return s(r[e])?a(r[e],function(e){return t+encodeURIComponent(o(e))}).join(i):t+encodeURIComponent(o(r[e]))}).join(i):e?encodeURIComponent(o(e))+n+encodeURIComponent(o(r)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i));return r}var u=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}},{}],99:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":97,"./encode":98}],100:[function(u,e,l){!function(r,a){!function(){var i=u("process/browser.js").nextTick,e=Function.prototype.apply,n=Array.prototype.slice,o={},s=0;function t(e,t){this._id=e,this._clearFn=t}l.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},l.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},l._unrefActive=l.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},l.setImmediate="function"==typeof r?r:function(e){var t=s++,r=!(arguments.length<2)&&n.call(arguments,1);return o[t]=!0,i(function(){o[t]&&(r?e.apply(null,r):e.call(null),l.clearImmediate(t))}),t},l.clearImmediate="function"==typeof a?a:function(e){delete o[e]}}.call(this)}.call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":95,timers:100}],101:[function(e,t,r){"use strict";var E=e("punycode"),O=e("./util");function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=n,r.resolve=function(e,t){return n(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?n(e,!1,!0).resolveObject(t):t},r.format=function(e){O.isString(e)&&(e=n(e));return e instanceof x?e.format():x.prototype.format.call(e)},r.Url=x;var S=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,R=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),A=["'"].concat(r),P=["%","/","?",";","#"].concat(A),C=["/","?","#"],M=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,I={javascript:!0,"javascript:":!0},D={javascript:!0,"javascript:":!0},L={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},F=e("querystring");function n(e,t,r){if(e&&O.isObject(e)&&e instanceof x)return e;var i=new x;return i.parse(e,t,r),i}x.prototype.parse=function(e,t,r){if(!O.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),i=-1!==i&&i<e.indexOf("#")?"?":"#",n=e.split(i);n[0]=n[0].replace(/\\/g,"/");var o=(o=e=n.join(i)).trim();if(!r&&1===e.split("#").length){n=R.exec(o);if(n)return this.path=o,this.href=o,this.pathname=n[1],n[2]?(this.search=n[2],this.query=t?F.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var s,i=S.exec(o);if(i&&(s=(i=i[0]).toLowerCase(),this.protocol=s,o=o.substr(i.length)),!(r||i||o.match(/^\/\/[^@\/]+@[^@\/]+/))||!(b="//"===o.substr(0,2))||i&&D[i]||(o=o.substr(2),this.slashes=!0),!D[i]&&(b||i&&!L[i])){for(var a=-1,u=0;u<C.length;u++)-1!==(l=o.indexOf(C[u]))&&(-1===a||l<a)&&(a=l);-1!==(e=-1===a?o.lastIndexOf("@"):o.lastIndexOf("@",a))&&(n=o.slice(0,e),o=o.slice(e+1),this.auth=decodeURIComponent(n));for(var l,a=-1,u=0;u<P.length;u++)-1!==(l=o.indexOf(P[u]))&&(-1===a||l<a)&&(a=l);-1===a&&(a=o.length),this.host=o.slice(0,a),o=o.slice(a),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var h=this.hostname.split(/\./),u=0,c=h.length;u<c;u++){var f=h[u];if(f&&!f.match(M)){for(var d="",p=0,_=f.length;p<_;p++)127<f.charCodeAt(p)?d+="x":d+=f[p];if(!d.match(M)){var m=h.slice(0,u),y=h.slice(u+1),v=f.match(w);v&&(m.push(v[1]),y.unshift(v[2])),y.length&&(o="/"+y.join(".")+o),this.hostname=m.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=E.toASCII(this.hostname));var g=this.port?":"+this.port:"",b=this.hostname||"";this.host=b+g,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!I[s])for(u=0,c=A.length;u<c;u++){var x,T=A[u];-1!==o.indexOf(T)&&((x=encodeURIComponent(T))===T&&(x=escape(T)),o=o.split(T).join(x))}i=o.indexOf("#"),-1!==i&&(this.hash=o.substr(i),o=o.slice(0,i)),e=o.indexOf("?");return-1!==e?(this.search=o.substr(e),this.query=o.substr(e+1),t&&(this.query=F.parse(this.query)),o=o.slice(0,e)):t&&(this.search="",this.query={}),o&&(this.pathname=o),L[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(g=this.pathname||"",n=this.search||"",this.path=g+n),this.href=this.format(),this},x.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),r=this.pathname||"",i=this.hash||"",n=!1,o="",e=(this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&O.isObject(this.query)&&Object.keys(this.query).length&&(o=F.stringify(this.query)),this.search||o&&"?"+o||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||L[t])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n=n||"",i&&"#"!==i.charAt(0)&&(i="#"+i),e&&"?"!==e.charAt(0)&&(e="?"+e),t+n+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+i},x.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},x.prototype.resolveObject=function(e){O.isString(e)&&((f=new x).parse(e,!1,!0),e=f);for(var t=new x,r=Object.keys(this),i=0;i<r.length;i++){var n=r[i];t[n]=this[n]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),s=0;s<o.length;s++){var a=o[s];"protocol"!==a&&(t[a]=e[a])}return L[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!L[e.protocol]){for(var u=Object.keys(e),l=0;l<u.length;l++){var h=u[l];t[h]=e[h]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||D[e.protocol])t.pathname=e.pathname;else{for(var c=(e.pathname||"").split("/");c.length&&!(e.host=c.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),t.pathname=c.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(f=t.pathname||"",d=t.search||"",t.path=f+d),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var f=t.pathname&&"/"===t.pathname.charAt(0),d=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=d||f||t.host&&e.pathname,p=f,_=t.pathname&&t.pathname.split("/")||[],c=e.pathname&&e.pathname.split("/")||[],m=t.protocol&&!L[t.protocol];if(m&&(t.hostname="",t.port=null,t.host&&(""===_[0]?_[0]=t.host:_.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===c[0]?c[0]=e.host:c.unshift(e.host)),e.host=null),f=f&&(""===c[0]||""===_[0])),d)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,_=c;else if(c.length)(_=_||[]).pop(),_=_.concat(c),t.search=e.search,t.query=e.query;else if(!O.isNullOrUndefined(e.search))return m&&(t.hostname=t.host=_.shift(),(b=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=b.shift(),t.host=t.hostname=b.shift())),t.search=e.search,t.query=e.query,O.isNull(t.pathname)&&O.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!_.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var y=_.slice(-1)[0],d=(t.host||e.host||1<_.length)&&("."===y||".."===y)||""===y,v=0,g=_.length;0<=g;g--)"."===(y=_[g])?_.splice(g,1):".."===y?(_.splice(g,1),v++):v&&(_.splice(g,1),v--);if(!f&&!p)for(;v--;)_.unshift("..");!f||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),d&&"/"!==_.join("/").substr(-1)&&_.push("");var b,p=""===_[0]||_[0]&&"/"===_[0].charAt(0);return m&&(t.hostname=t.host=!p&&_.length?_.shift():"",(b=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=b.shift(),t.host=t.hostname=b.shift())),(f=f||t.host&&_.length)&&!p&&_.unshift(""),_.length?t.pathname=_.join("/"):(t.pathname=null,t.path=null),O.isNull(t.pathname)&&O.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},x.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":102,punycode:86,querystring:99}],102:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],103:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/assertThisInitialized")),a=i(e("@babel/runtime/helpers/inherits")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf"));function h(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return e=i?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var i=function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(r,"__esModule",{value:!0}),r.Camera=void 0,i(e("events"))),f=e("pixi.js"),d=i(e("../core/vector")),i=function(e){(0,a.default)(r,e);var t=h(r);function r(){var e;return(0,n.default)(this,r),(e=t.call(this)).defaultZoom=1,e.minZoom=.25,e._zoom=e.defaultZoom,e._position=new f.ObservablePoint(function(){e.emit("moved",new d.default(e._position.x,e.position.y))},(0,s.default)(e)),e}return(0,o.default)(r,[{key:"x",get:function(){return this._position.x},set:function(e){this._position.x=e}},{key:"y",get:function(){return this._position.y},set:function(e){this._position.y=e}},{key:"z",get:function(){return this._zoom},set:function(e){e=e<this.minZoom?this.minZoom:e,this.z!==e&&this.emit("zoomed",e),this._zoom=e}},{key:"position",get:function(){return this._position}},{key:"move",value:function(e,t){e=new d.default(this.x,this.y).add(new d.default(e,t));this._position.set(e.x,e.y)}}]),r}(c.default.EventEmitter);r.Camera=i},{"../core/vector":119,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12,events:89,"pixi.js":94}],104:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass"));function a(e,t){var r,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw n}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var i=function(e){return e&&e.__esModule?e:{default:e}},l=(Object.defineProperty(r,"__esModule",{value:!0}),r.Chunk=void 0,i(e("../core/vector"))),h=i(e("../tiles/empty-tile")),i=function(){function o(e){(0,n.default)(this,o),this.position=e,this._tiles=this.generateTiles(),this.loaded=!0}return(0,s.default)(o,[{key:"loaded",get:function(){return Boolean(this._loaded)},set:function(e){var t,r=a(this._tiles);try{for(r.s();!(t=r.n()).done;)t.value.visible=e}catch(e){r.e(e)}finally{r.f()}this._loaded=e}},{key:"tiles",get:function(){return this._tiles}},{key:"x",get:function(){return this.position.x}},{key:"y",get:function(){return this.position.y}},{key:"generateTiles",value:function(){var n=this;return new Array(o.SIZE).fill(null).map(function(e,t){var r=new h.default,i=t%o.WIDTH,t=Math.floor(t/o.WIDTH);return r.position.set(n.x*o.WIDTH+i,n.y*o.HEIGHT+t),r})}},{key:"getTile",value:function(e){var e=e.x+e.y*o.WIDTH;return null!=(e=this._tiles[e])?e:null}},{key:"getTilePosChunkPos",value:function(e){return new l.default(0<=e.x?e.x%o.WIDTH:Math.abs(this.x)*o.WIDTH+e.x,0<=e.y?e.y%o.HEIGHT:Math.abs(this.y)*o.HEIGHT+e.y).floor()}},{key:"setTile",value:function(e,t){var r=e.x+e.y*o.WIDTH;if(!(r in this._tiles))throw"Tile at ".concat(e," not found");t=null!=t?t:new h.default,(this._tiles[r]=t).visible=this.loaded,t.position.set(this.x*o.WIDTH+e.x,this.y*o.HEIGHT+e.y)}},{key:"update",value:function(e){if(this.loaded){var t,r=a(this._tiles);try{for(r.s();!(t=r.n()).done;)t.value.update(e)}catch(e){r.e(e)}finally{r.f()}}}}]),o}();(r.Chunk=i).WIDTH=9,i.HEIGHT=9,i.SIZE=i.WIDTH*i.HEIGHT},{"../core/vector":119,"../tiles/empty-tile":126,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],105:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/inherits")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf"));function l(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(r);return e=i?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var h,c=Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){e[i=void 0===i?r:i]=t[r]},f=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&c(t,e,r);return f(t,e),t},d=function(e){return e&&e.__esModule?e:{default:e}},p=(Object.defineProperty(r,"__esModule",{value:!0}),r.GraphicsLayer=void 0,e("@pixi/layers")),_=i(e("pixi.js")),m=e("pixi.js"),y=e("../browser/browser"),v=d(e("../core/vector")),g=d(e("../entities/entity")),b=d(e("../tiles/tile")),x=e("./camera"),T=e("./textures"),d=((i=h=r.GraphicsLayer||(r.GraphicsLayer={}))[i.Background=0]="Background",i[i.Tiles=1]="Tiles",i[i.Entities=2]="Entities",i[i.GUI=3]="GUI",function(e){(0,s.default)(i,e);var r=l(i);function i(e){var t;return(0,n.default)(this,i),(t=r.call(this,{resizeTo:window,backgroundColor:1087931,resolution:window.devicePixelRatio})).camera=new x.Camera,t.size=new v.default(0,0),t.mousePos=new v.default(0,0),t.equippedItem=null,t.layers=[new p.Layer,new p.Layer,new p.Layer],t.setupPIXI(),t.setupLayers(),t.setupCameraEvents(),t.setupLoader(e),t}return(0,o.default)(i,[{key:"loading",get:function(){return null==i._spriteSheet}},{key:"width",get:function(){return this.size.x}},{key:"height",get:function(){return this.size.y}},{key:"mouseWorldPos",get:function(){return this.getWorldPosFromScreen(this.mousePos)}},{key:"setupLayers",value:function(){var t=this;this.layers.forEach(function(e){t.stage.addChild(e)})}},{key:"setupCameraEvents",value:function(){var t=this;this.camera.on("moved",function(e){t.debugText&&(t.debugText.text="Camera: ".concat(e)),t.updateBackgroundSprite()}),this.camera.on("zoomed",function(e){t.updateBackgroundSprite()})}},{key:"setupLoader",value:function(e){var t=this;m.Loader.shared.add(i.SPRITESHEET_PATH).load(function(){t.setupSpritesheet(e)})}},{key:"setupPIXI",value:function(){_.settings.SCALE_MODE=_.SCALE_MODES.NEAREST,this.stage.sortableChildren=!0,y.Browser.addPixi(this)}},{key:"createBackgroundSprite",value:function(){var e=T.Textures.background.clone(),e=(e.frame=new _.Rectangle(e.orig.x,e.orig.height/2,e.orig.width,e.orig.height/2),new _.TilingSprite(e));return e.tileScale.set(1/i.SQUARE_SIZE),e.anchor.set(0,0),e}},{key:"updateBackgroundSprite",value:function(){var e,t;this.background&&(e=this.camera.x-this.screen.width/2/i.SQUARE_SIZE/this.camera.z,t=this.camera.y-this.screen.height/2/i.SQUARE_SIZE/this.camera.z,this.background.width=this.screen.width/i.SQUARE_SIZE/this.camera.z+1,this.background.height=this.screen.height/i.SQUARE_SIZE/this.camera.z+1,this.background.pivot.set(-(Math.ceil(e)+e%(this.camera.z/i.SQUARE_SIZE)-1),-(Math.ceil(t)+t%(this.camera.z/i.SQUARE_SIZE)-1)))}},{key:"setupSpritesheet",value:function(e){var t=m.Loader.shared.resources[i.SPRITESHEET_PATH].spritesheet;if(!t)throw new Error('File "'.concat(i.SPRITESHEET_PATH," is not a valid spritesheet JSON file"));i._spriteSheet=t,T.Textures.instance,this.background=this.createBackgroundSprite(),this.addChild(this.background),this.updateBackgroundSprite(),this.debugText=this.createDebugText(),this.stage.addChild(this.debugText),e.call(null)}},{key:"createDebugText",value:function(){var e=new _.Text("",{fontSize:10});return e.scale.set(1/i.SQUARE_SIZE),e.anchor.set(.5,.5),e.parentLayer=this.layers[h.GUI],e}},{key:"update",value:function(e,t,r){this.camera.move(t),this.camera.z+=r,this.stage.scale.set(i.SQUARE_SIZE*this.camera.z/window.devicePixelRatio),this.stage.pivot.set(this.camera.x,this.camera.y),this.stage.x=this.screen.width/(2*window.devicePixelRatio),this.stage.y=this.screen.height/(2*window.devicePixelRatio)}},{key:"getObjectLayer",value:function(e){return e instanceof b.default?this.layers[h.Tiles]:e instanceof g.default?this.layers[h.Entities]:this.layers[h.Background]}},{key:"addChild",value:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var n=0,o=r;n<o.length;n++){var s=o[n];s.parentLayer=this.getObjectLayer(s)}return(e=this.stage).addChild.apply(e,r)}},{key:"removeChild",value:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var n=0,o=r;n<o.length;n++){var s=o[n];s.parentLayer=void 0,this.stage.removeChild(s)}return(e=this.stage).removeChild.apply(e,r)}},{key:"getWorldPosFromScreen",value:function(e){return new v.default((e.x-this.screen.width/2)/(i.SQUARE_SIZE*this.camera.z)+this.camera.x,(e.y-this.screen.height/2)/(i.SQUARE_SIZE*this.camera.z)+this.camera.y)}}],[{key:"getTexture",value:function(e){var t=i._spriteSheet;if(!t)throw new Error("Spritesheet not ready yet");if(!t.textures[e])throw Error('Texture "'.concat(e,'" could not be found in spritesheet'));t=t.textures[e].clone();return t.defaultAnchor=new m.Point(0,.5),t}},{key:"getTextures",value:function(e){return e.map(function(e){return i.getTexture(e)})}}]),i}(_.Application));(r.default=d).FONT_SIZE=12,d.FONT_EMOJI_SIZE=16,d.SQUARE_SIZE=64,d.SPRITESHEET_PATH="spritesheet/sheet.json",d._spriteSheet=null},{"../browser/browser":111,"../core/vector":119,"../entities/entity":121,"../tiles/tile":127,"./camera":103,"./textures":109,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12,"@pixi/layers":65,"pixi.js":94}],106:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/classCallCheck"));function s(e,t){var r,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw n}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}Object.defineProperty(r,"__esModule",{value:!0}),r.Inventory=r.InventoryItem=void 0;r.InventoryItem=(0,n.default)(function e(t){(0,o.default)(this,e),this.amount=0,this.type=t});i=function(){function t(){(0,o.default)(this,t),this.wheat=0,this.money=0,this.items=[]}return(0,n.default)(t,[{key:"getItemAmount",value:function(e){var t,r=s(this.items);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(e===i.type.name)return i.amount}}catch(e){r.e(e)}finally{r.f()}return 0}},{key:"setItemAmount",value:function(e,t){e=this.getItem(e);null!==e&&(e.amount=t)}},{key:"increaseItemAmount",value:function(e){this.setItemAmount(e,this.getItemAmount(e)+1)}},{key:"decreaseItemAmount",value:function(e){var t=this.getItemAmount(e)-1;this.setItemAmount(e,t<0?0:t)}},{key:"getItem",value:function(e){var t,r=s(this.items);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(e===i.type.name)return i}}catch(e){r.e(e)}finally{r.f()}return null}},{key:"purchaseItem",value:function(e,t){e=this.getItem(e);if(null===e)return!1;var r=e.type.buyPrice*t;return!(this.money-r<0)&&(this.money-=r,e.amount+=t,!0)}},{key:"sellWheat",value:function(e){return!(this.wheat-e<0)&&(this.wheat-=e,this.money+=e*t.MONEY_PER_WHEAT,!0)}}]),t}();(r.Inventory=i).MONEY_PER_WHEAT=3},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],107:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/classCallCheck")),s=(Object.defineProperty(r,"__esModule",{value:!0}),e("./inventory")),i=(0,n.default)(function e(){(0,o.default)(this,e),this.WHEAT_START_AMOUNT=50,this.items=new s.Inventory,this.equipped=null,this.items.setItemAmount("Wheat",this.WHEAT_START_AMOUNT),this.equipped=this.items.getItem("Wheat")});r.default=i},{"./inventory":106,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],108:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass"));function s(e,t){var r,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw n}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}Object.defineProperty(r,"__esModule",{value:!0});i=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];(0,n.default)(this,r),this.position=null,this._isMusic=!1,this._audio=new Audio(e),this.isMusic=t,r.all.push(this)}return(0,o.default)(r,[{key:"volume",get:function(){return this._audio.volume},set:function(e){this._audio.volume=e}},{key:"paused",get:function(){return this._audio.paused}},{key:"isMusic",get:function(){return this._isMusic},set:function(e){this._isMusic=!!e,this._audio.loop=!!e}},{key:"play",value:function(){}},{key:"pause",value:function(){this._audio.pause()}},{key:"unlock",value:function(){this.play(),this.pause(),this._audio.currentTime=0}}],[{key:"unlockAll",value:function(){var e,t=s(r.all);try{for(t.s();!(e=t.n()).done;)e.value.unlock()}catch(e){t.e(e)}finally{t.f()}}}]),r}();(r.default=i).all=[],i.mainMusic=new i("audio/210107blunt164.ogg",!0)},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],109:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/classCallCheck")),i=function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.Textures=void 0,i(e("./graphics"))),a=(0,n.default)(function e(){(0,o.default)(this,e)});a.empty="notfound 0",a.background="bg 0",a.wheat=["wheat 0","wheat 1","wheat 2","wheat 3","wheat 4","wheat 5","wheat 6","wheat 7","wheat 8","wheat 9","wheat 10"],a.explosion=["explosion 0","explosion 1","explosion 2"],a.robot={red:["robot red 0","robot red 1","robot red 2","robot red 3"],yellow:["robot yellow 0","robot yellow 1","robot yellow 2","robot yellow 3"],green:["robot green 0","robot green 1","robot green 2","robot green 3"],hawaii:["robot hawaii 0","robot hawaii 1","robot hawaii 2","robot hawaii 3"]},a.bomb=["bomb 0","bomb 1","bomb 2","bomb 3"],a.hats=["robot extras 1"],r.Textures=function(){function e(){(0,o.default)(this,e),this.empty=s.default.getTexture(a.empty),this.background=s.default.getTexture(a.background),this.wheat=s.default.getTextures(a.wheat),this.explosion=s.default.getTextures(a.explosion),this.robot={red:s.default.getTextures(a.robot.red),yellow:s.default.getTextures(a.robot.yellow),green:s.default.getTextures(a.robot.green),hawaii:s.default.getTextures(a.robot.hawaii)},this.bomb=s.default.getTextures(a.bomb),this.hats=s.default.getTextures(a.hats)}return(0,n.default)(e,null,[{key:"empty",get:function(){return e.instance.empty}},{key:"background",get:function(){return e.instance.background}},{key:"wheat",get:function(){return e.instance.wheat}},{key:"explosion",get:function(){return e.instance.explosion}},{key:"robot",get:function(){return e.instance.robot}},{key:"bomb",get:function(){return e.instance.bomb}},{key:"hats",get:function(){return e.instance.hats}},{key:"instance",get:function(){return e._instance=e._instance?e._instance:new e}}]),e}()},{"./graphics":105,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],110:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),v=i(e("@babel/runtime/helpers/toConsumableArray")),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/inherits")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf"));function g(e,t){var r,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw n}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function h(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(r);return e=i?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var i=function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(r,"__esModule",{value:!0}),r.World=void 0,i(e("events"))),f=e("pixi-filters"),d=e("pixi.js"),y=i(e("../core/bit-math")),p=i(e("../core/easings")),_=i(e("../core/moveable-sprite")),b=i(e("../core/vector")),x=i(e("../entities/bomb")),m=i(e("../entities/entity")),T=i(e("../entities/explosion")),E=i(e("../entities/robot")),O=i(e("../tiles/empty-tile")),S=i(e("../tiles/tile")),R=i(e("../tiles/wall-tile")),A=i(e("../tiles/wheat-tile")),P=e("./chunk"),C=i(e("./graphics")),M=i(e("./player")),i=function(e){(0,s.default)(r,e);var t=h(r);function r(){var e;return(0,n.default)(this,r),(e=t.call(this))._chunks={},e._createdAt=Date.now(),e._player=new M.default,e._entities=[],e._plantedTilesPerMin=[],e._enemyGroupsPerMin=[],e._enemiesScheduledToSpawn=0,e}return(0,o.default)(r,[{key:"createdAt",get:function(){return this._createdAt}},{key:"player",get:function(){return this._player}},{key:"entities",get:function(){return this._entities}},{key:"tilesPlantedPerMin",get:function(){return this._plantedTilesPerMin.length}},{key:"enemyGroupsPerMin",get:function(){return this._enemyGroupsPerMin.length}},{key:"initChunks",value:function(){for(var e=-1;e<2;e++)for(var t=-1;t<2;t++)this.newChunkAt(new b.default(t,e))}},{key:"newChunkAt",value:function(e){this._chunks[e.y]||(this._chunks[e.y]={});var t,r=new P.Chunk(e),i=(r.position=new b.default(e),g(r.tiles));try{for(i.s();!(t=i.n()).done;){var n=t.value;this.emit("spriteAdded",n)}}catch(e){i.e(e)}finally{i.f()}return this._chunks[e.y][e.x]=r}},{key:"getChunk",value:function(e){return this._chunks[e.y]||(this._chunks[e.y]={}),null!=(e=this._chunks[e.y][e.x])?e:null}},{key:"getChunkPos",value:function(e){return e.divide(new b.default(P.Chunk.WIDTH,P.Chunk.HEIGHT)).floor()}},{key:"getRandomLoadedPosition",value:function(){var e=this.getChunks(!0),e=e[Math.floor(e.length*Math.random())],t=Math.floor(P.Chunk.SIZE*Math.random());return new b.default(e.position.x*P.Chunk.WIDTH+t%P.Chunk.WIDTH,e.position.y*P.Chunk.HEIGHT+Math.floor(t/P.Chunk.WIDTH))}},{key:"scheduleEnemySpawn",value:function(){this._enemiesScheduledToSpawn+=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1}},{key:"getChunks",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],r=[];for(e in this._chunks)for(var i in this._chunks[e]){i=this._chunks[e][i];!i||t&&!i.loaded||r.push(i)}return r}},{key:"getTile",value:function(e){var t=this.getChunkPos(e),r=null!=(r=this.getChunk(t))?r:this.newChunkAt(t);return r.getTile(r.getTilePosChunkPos(e))}},{key:"setTile",value:function(e,t){var r=e.divide(new b.default(P.Chunk.WIDTH,P.Chunk.HEIGHT)).floor(),i=this.getChunk(r);if(!i)throw"Chunk ".concat(r," not found");r=i.getTilePosChunkPos(e),e=i.getTile(r);e&&this.emit("spriteRemoved",e),i.setTile(r,t),t instanceof d.Sprite&&this.emit("spriteAdded",t)}},{key:"onTileClicked",value:function(e){var t=this.getTile(e),r=this._player.items.getItemAmount("Wheat");if(null==t||t instanceof O.default)this.create(A.default,e);else{if(t instanceof A.default&&1<=t.growthState){for(var i=null;null===i||r+i===0;)i=t.dropSeeds();this._player.items.setItemAmount("Wheat",r+i),this._player.items.wheat+=1,this.emit("spriteRemoved",t),this.setTile(e,null)}t instanceof R.default&&(this._player.items.increaseItemAmount("Wall"),this.setTile(e,null))}}},{key:"getSurroundingTileCoords",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=[],n=e.y-y.default.ceil(t);n<=e.y+y.default.ceil(t);n++)for(var o=e.x-y.default.ceil(t);o<=e.x+y.default.ceil(t);o++)o===e.x&&n===e.y&&!r||new b.default(e.x-o,e.y-n).length>y.default.ceil(t)||i.push(new b.default(o,n));return i}},{key:"getRandomOutsidePos",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,e=Math.sqrt(Math.pow(10,2)+Math.pow(10,2))*e;return new b.default(e,0).rotate(2*Math.random()*Math.PI).add(10,10)}},{key:"getRandomWheatPosition",value:function(){var e,t=[],r=g(this.getChunks(!0));try{for(r.s();!(e=r.n()).done;){var i,n=g(e.value.tiles);try{for(n.s();!(i=n.n()).done;){var o=i.value;o instanceof A.default&&t.push(new b.default(o.position.x,o.position.y))}}catch(e){n.e(e)}finally{n.f()}}}catch(e){r.e(e)}finally{r.f()}return t.length?t[y.default.floor(Math.random()*t.length)]:null}},{key:"create",value:function(e,t){var r=new e;return r.on("mouseover",function(){r.filters=[new f.OutlineFilter(2,16777215)]}),r.on("mouseout",function(){r.filters=[]}),r instanceof m.default&&(this._entities.push(r),this.emit("spriteAdded",r)),r instanceof S.default?((e=this.getTile(t))&&(r.damage=e.damage,e=e.getDamageSprites(),r.addDamageSprites.apply(r,(0,v.default)(e))),this._plantedTilesPerMin.push(r.age),this.setTile(t,r)):r.position.set(t.x,t.y),r}},{key:"removeEntity",value:function(t){this._entities=this._entities.filter(function(e){return e!==t}),this.emit("spriteRemoved",t)}},{key:"createExplosion",value:function(e,t,r){var i,n,o=e.floor(),s=g(this.getSurroundingTileCoords(o,t));try{for(s.s();!(n=s.n()).done;){var a,u=n.value,l=u.add(.5,.5).add(-(e.x+.5),-(e.y+.5)).length,h=1-l/(r+1),c=.5<Math.random()*r/(l+1),f=this.getTile(u),d=(null!=(i=null==f?void 0:f.damage)?i:0)+h,p=this.createDamageSprites(h),_=g(p);try{for(_.s();!(a=_.n()).done;){var m=a.value;m.x+=u.x,m.y+=u.y}}catch(e){_.e(e)}finally{_.f()}var y=null;(y=c||!f?this.create(O.default,u):f).damage=d,p&&y.addDamageSprites.apply(y,(0,v.default)(p))}}catch(e){s.e(e)}finally{s.f()}this.create(T.default,e)}},{key:"createDamageSprites",value:function(e){for(var t=[],r=y.default.floor(3*e)+1,i=0;i<r;i++){var n=y.default.floor(4*Math.random()),o=new b.default(Math.random()-.5,Math.random()-.5).multiply(C.default.SQUARE_SIZE),s=1+2*p.default.easeInCubic(Math.random())*e,n=C.default.getTexture("damage ".concat(n)),n=new _.default([n]);n.scale.set(s),n.anchor.set(.5),n.alpha=.65*Math.random()*e,n.rotation=Math.random()*Math.PI*2,n.position.set(o.x,o.y),t.push(n)}return t}},{key:"update",value:function(t){var e,r;this._plantedTilesPerMin=this._plantedTilesPerMin.map(function(e){return e+t}).filter(function(e){return e<6e4}),this._enemyGroupsPerMin=this._enemyGroupsPerMin.filter(function(e){return Date.now()-e<6e4});var i,n=g(this.getChunks(!0));try{for(n.s();!(i=n.n()).done;)i.value.update(t)}catch(e){n.e(e)}finally{n.f()}var o,s=g(this.entities);try{for(s.s();!(o=s.n()).done;){var a,u,l,h=o.value;h.updateEntity(t),h instanceof T.default&&h.completed&&this.removeEntity(h),h instanceof x.default&&h.hasCompletedExplosion&&(this.removeEntity(h),a=new b.default(h.x,h.y),u=y.default.floor(Math.random()*(x.default.maxExplosionRadius+1)),this.createExplosion(a,u,x.default.maxExplosionRadius)),h instanceof E.default&&(h.hasStartedBombPlant&&!h.bomb&&(l=new b.default(h.x,h.y).add(0,.5),h.bomb=this.create(x.default,l)),!h.hasCompletedBombPlant||null!=(e=h.bomb)&&e.playing||(null!=(r=h.bomb)&&r.ignite(),h.moveTarget=this.getRandomOutsidePos(7),h.speed=1.5*h.speed,h.moveHasCompleted&&this.removeEntity(h)))}}catch(e){s.e(e)}finally{s.f()}for(;0<this._enemiesScheduledToSpawn;){this._enemiesScheduledToSpawn--;var c=new b.default(3*Math.random(),3*Math.random()).rotate(2*Math.random()*Math.PI),c=this.getRandomOutsidePos().add(c),c=this.create(E.default,c),f=this.getRandomWheatPosition();c.moveTarget=f||this.getRandomLoadedPosition()}var d=Math.ceil((this.tilesPlantedPerMin-40)/10);if(0<d){var p=d-this.enemyGroupsPerMin;if(0<p)for(var _=0;_<p;_++){var m=y.default.floor(3*Math.random())+1;this.scheduleEnemySpawn(m),this._enemyGroupsPerMin.push(Date.now())}}}}]),r}(c.default.EventEmitter);r.World=i},{"../core/bit-math":113,"../core/easings":116,"../core/moveable-sprite":117,"../core/vector":119,"../entities/bomb":120,"../entities/entity":121,"../entities/explosion":122,"../entities/robot":123,"../tiles/empty-tile":126,"../tiles/tile":127,"../tiles/wall-tile":128,"../tiles/wheat-tile":129,"./chunk":104,"./graphics":105,"./player":107,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12,"@babel/runtime/helpers/toConsumableArray":15,events:89,"pixi-filters":93,"pixi.js":94}],111:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/inherits")),o=i(e("@babel/runtime/helpers/possibleConstructorReturn")),s=i(e("@babel/runtime/helpers/getPrototypeOf")),a=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/classCallCheck"));function l(e,t){var r,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw n}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function c(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,s.default)(r);return e=i?(e=(0,s.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}var i=function(e){return e&&e.__esModule?e:{default:e}},f=(Object.defineProperty(r,"__esModule",{value:!0}),r.Browser=r.BrowserMouse=void 0,i(e("events"))),d=i(e("../core/canvas")),p=i(e("../core/vector")),_=i(e("./gui")),m=(0,a.default)(function e(){(0,u.default)(this,e),this.position=new p.default(0,0),this.pressed=!1}),i=(r.BrowserMouse=m,function(e){(0,n.default)(i,e);var t=c(i);function i(){var e;return(0,u.default)(this,i),(e=t.call(this))._canvas=[],e._mouse=new m,e._gui=new _.default(e._mouse),e._windowSize=new p.default(window.innerWidth,window.innerHeight),e.setupEvents(),e}return(0,a.default)(i,[{key:"gui",get:function(){return this._gui}},{key:"mouse",get:function(){return this._mouse}},{key:"windowSize",get:function(){return this._windowSize}},{key:"_onScroll",value:function(e){this.emit("scroll",e)}},{key:"_onMouseDown",value:function(e){this._mouse.pressed=!0,this.emit("mouseDown",e)}},{key:"_onMouseUp",value:function(e){this._mouse.pressed=!1,this.emit("mouseUp",e)}},{key:"_onMouseMove",value:function(e){this._mouse.position.x=e.x,this._mouse.position.y=e.y,this.emit("mouseMove",e)}},{key:"_onMouseClick",value:function(e){this.emit("mouseClick",e)}},{key:"_onLoaded",value:function(){this._windowSize=new p.default(window.innerWidth,window.innerHeight),this.updateRendererCanvasSize(),this.emit("loaded")}},{key:"_onResize",value:function(e,t){this._windowSize=new p.default(window.innerWidth,window.innerHeight),this.updateRendererCanvasSize(),this.emit("resize",e,t)}},{key:"_onKeyDown",value:function(e,t){this.emit("keyDown",e,t)}},{key:"_onKeyUp",value:function(e,t){this.emit("keyUp",e,t)}},{key:"_onTouchStart",value:function(e){this.emit("touchStart",e)}},{key:"_onTouchMove",value:function(e){this.emit("touchMove",e)}},{key:"_onTouchCancel",value:function(e){this.emit("touchCancel",e)}},{key:"_onTouchEnd",value:function(e){this.emit("touchEnd",e)}},{key:"setupEvents",value:function(){function e(e){if("wheel"===e.type)r=!0;else if(r)return;e=(e.deltaY||-e.wheelDelta||e.detail)>>10||1,t._onScroll(e)}var t=this,r=!1;document.addEventListener("wheel",e),document.addEventListener("mousewheel",e),document.addEventListener("DOMMouseScroll",e),document.addEventListener("mousedown",function(e){t._onMouseDown(new p.default(e.screenX,e.screenY))}),document.addEventListener("mouseup",function(e){t._onMouseUp(new p.default(e.screenX,e.screenY))}),document.addEventListener("mousemove",function(e){t._onMouseMove(new p.default(e.clientX,e.clientY))}),document.addEventListener("click",function(e){t._onMouseClick(t._mouse.position)}),window.addEventListener("load",function(){t._onLoaded()}),window.addEventListener("resize",function(){var e=new p.default(window.innerWidth,window.innerHeight);t._onResize(e,t._windowSize)}),document.addEventListener("keydown",function(e){t._onKeyDown(e.keyCode,e.code)}),document.addEventListener("keyup",function(e){t._onKeyUp(e.keyCode,e.code)}),i.isMobile&&(document.body.addEventListener("touchstart",function(e){t._onTouchStart(new p.default(0,0))}),document.body.addEventListener("touchend",function(e){t._onTouchEnd(new p.default(0,0))}),document.body.addEventListener("touchmove",function(e){t._onTouchMove(new p.default(0,0))}),document.body.addEventListener("touchcancel",function(e){t._onTouchCancel(new p.default(0,0))}))}},{key:"initializeRendererCanvas",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=new d.default,i=(this._canvas.push(r),this.updateRendererCanvasSize(),document.body.querySelectorAll("canvas"));return i.length?null!=(e=(i=i[i.length-1]).parentNode)&&e.insertBefore(r.element,i.nextSibling):document.body.prepend(r.element),null!=t&&(r.element.id=t),r.ctx}},{key:"updateRendererCanvasSize",value:function(){this._canvas=this._canvas.filter(function(e){return Boolean(e.element)});var e,t=l(this._canvas);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.width=this.windowSize.x,r.height=this.windowSize.y}}catch(e){t.e(e)}finally{t.f()}}}],[{key:"debug",get:function(){return Boolean(i.getURLParameter("debug"))}},{key:"alert",value:function(e){void 0}},{key:"getURLParameter",value:function(e){var t,r,i=null,n=l(location.search.substr(1).split("&"));try{for(n.s();!(t=n.n()).done;)(r=t.value.split("="))[0]===e&&(i=decodeURIComponent(r[1]))}catch(e){n.e(e)}finally{n.f()}return i}},{key:"isMobile",get:function(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(function(e){return navigator.userAgent.match(e)})}},{key:"addPixi",value:function(e){document.body.append(e.view)}},{key:"toggleTitleScreen",value:function(e){document.body.classList.toggle("titlescreen",e)}}]),i}(f.default.EventEmitter));r.Browser=i},{"../core/canvas":114,"../core/vector":119,"./gui":112,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12,events:89}],112:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass"));function u(e,t){var r,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw n}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var i=function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),i(e("../base/graphics"))),l=e("../base/inventory"),h=i(e("../core/bit-math")),c=i(e("../core/util")),f=i(e("../tiles/tile")),d=e("./browser"),i=function(){function t(e){(0,n.default)(this,t),this._statsDisplay=document.createElement("div"),this._worldStats=document.createElement("div"),this._shop=null,this._inventory=null,this._mouse=e,this.setupDOM()}return(0,o.default)(t,[{key:"setupDOM",value:function(){this._statsDisplay.classList.add("gui"),this._statsDisplay.classList.add("stats-display"),this._worldStats.classList.add("world-stats");var e=document.createElement("div"),t=(e.classList.add("keyboard-info-row"),e.innerHTML="<span>m</span> Menu",e.addEventListener("click",function(e){}),document.createElement("div")),r=(t.classList.add("keyboard-info-row"),t.innerHTML="<span>S</span> Shop",t.addEventListener("click",function(e){}),document.createElement("div")),i=(r.classList.add("keyboard-info-row"),r.innerHTML="<span>E</span> Inventory",r.addEventListener("click",function(e){}),document.createElement("div"));i.classList.add("keyboard-info"),i.append(e,t,r),document.body.append(this._statsDisplay,this._worldStats,i)}},{key:"getWorldStatsRowHTML",value:function(e,t){void 0===t&&(t="");var r=document.createElement("div"),e=(r.classList.add("left"),r.innerHTML=e,document.createElement("div")),i=(e.classList.add("right"),e.innerHTML=t,document.createElement("div"));return i.classList.add("row"),i.append(r,e),2!==t.length||c.default.isAlphaNumeric(t)||i.classList.add("emoji"),i}},{key:"renderWorldStatsHTML",value:function(e){var t=this._worldStats.innerHTML="",r=(e.player.equipped&&e.player.equipped.type instanceof f.default&&((r=e.player.equipped.type.getChar(!0))&&(t=r)),this.getWorldStatsRowHTML("",t));this._worldStats.append(r);for(var i=0,n=[{icon:"",text:e.player.items.getItemAmount("Wheat")},{icon:"",text:e.player.items.wheat},{icon:"",text:e.player.items.money+" $"}];i<n.length;i++){var o=n[i],o=this.getWorldStatsRowHTML(o.icon,String(o.text));this._worldStats.append(o)}}},{key:"getCameraDebugHTML",value:function(e){return"\n      <strong>Camera:</strong><br>\n      <strong>Position:</strong> ".concat(e.x.toFixed(3),", ").concat(e.y.toFixed(3),"<br>\n      <strong>Zoom:</strong> ").concat(e.z.toFixed(3),"\n    ")}},{key:"getMouseDebugHTML",value:function(e){return"\n      <strong>Mouse".concat(this._mouse.pressed?" (down)":"",":</strong><br>\n      <strong>Screen:</strong> ").concat(this._mouse.position,"<br>\n      <strong>World:</strong> ").concat(e,"\n    ")}},{key:"getGraphicsDebugHTML",value:function(e,t){var e=e.camera,r=h.default.floor(e.x/(s.default.SQUARE_SIZE*e.z)),i=h.default.ceil((e.x+window.innerWidth)/(s.default.SQUARE_SIZE*e.z)),n=h.default.floor(e.y/(s.default.SQUARE_SIZE*e.z)),e=h.default.ceil((e.y+window.innerHeight)/(s.default.SQUARE_SIZE*e.z));return"\n      <strong>graphics:</strong><br>\n      <strong>X:</strong> (".concat(r,", ").concat(i,")<br> \n      <strong>Y:</strong> (").concat(n,", ").concat(e,")<br>\n      <strong>FPS:</strong> ").concat(t.toFixed(1),"\n    ")}},{key:"getMiscDebugHTML",value:function(e){return"\n            <strong>Tiles/Min:</strong> ".concat(e.tilesPlantedPerMin,"\n        ")}},{key:"renderDebug",value:function(e,t,r,i){e=[this.getCameraDebugHTML(e),this.getMouseDebugHTML(t.getWorldPosFromScreen(this._mouse.position)),this.getGraphicsDebugHTML(t,i),this.getMiscDebugHTML(r)];this._statsDisplay.innerHTML='<div class="gui-item">'+e.join('</div><hr><div class="gui-item">')+"</div>"}},{key:"createDialog",value:function(e,t,r){t.classList.add("dialog-content");var i=document.createElement("a"),n=(i.href="javascript:void(0)",i.innerHTML=" - (close)",i.addEventListener("click",function(e){"function"==typeof r&&r(),o.remove()}),document.createElement("div")),e=(n.classList.add("dialog-title"),n.innerHTML=e,n.append(i),document.createElement("div")),o=(e.classList.add("dialog"),e.append(n,t),document.createElement("div"));return o.classList.add("dialog-wrap"),o.addEventListener("click",function(e){e.target===o&&("function"==typeof r&&r(),o.remove())}),o.append(e),o}},{key:"sellDialog",value:function(e,t){e=window.prompt("How many?",String(e));null!==e&&h.default.isInt(e)?t(parseFloat(e)):d.Browser.alert("Aborted.")}},{key:"onShopSellWheat",value:function(r,i){var n=this;this.sellDialog(r.wheat,function(e){var t=r.sellWheat(e);n.closeShop(),n.openShop(r,i),t?void 0:void 0})}},{key:"onShopItemBuy",value:function(r,i,n){var o=this,e=h.default.floor(r.money/i.type.buyPrice);this.sellDialog(e,function(e){var t=r.purchaseItem(i.type.name,e);o.closeShop(),o.openShop(r,n),t?void 0:void 0})}},{key:"openShop",value:function(r,i){var n,o=this,s=(this._shop&&this.closeShop(),document.createElement("div")),e=document.createElement("div"),t=(e.innerHTML="- Wheat (+".concat(l.Inventory.MONEY_PER_WHEAT,"$) - ").concat(r.wheat," owned"),0<r.wheat?e.addEventListener("click",function(e){o.onShopSellWheat(r,i)}):e.classList.add("disabled"),s.append(e),u(r.items));try{for(t.s();!(n=t.n()).done;)(function(){var t=n.value;if(0===t.type.buyPrice&&0===t.type.sellPrice)return;var e=document.createElement("div");e.innerHTML="+ ".concat(t.type.name," (-").concat(t.type.buyPrice,"$) - ").concat(t.amount," owned"),r.money>=t.type.buyPrice?e.addEventListener("click",function(e){o.onShopItemBuy(r,t,i)}):e.classList.add("disabled"),s.append(e)})()}catch(e){t.e(e)}finally{t.f()}this._shop=this.createDialog("Wheat Farmer Shop",s,function(){"function"==typeof i&&i()}),document.body.append(this._shop)}},{key:"closeShop",value:function(){null!==this._shop&&(this._shop.remove(),this._shop=null)}},{key:"openInventory",value:function(r,i,n){var o,s=this,a=(null!==this._inventory&&this._inventory.remove(),document.createElement("div")),t=u(i.items);try{for(t.s();!(o=t.n()).done;)!function(){var t=o.value,e=document.createElement("div");e.innerHTML="".concat(t.type.name," x").concat(t.amount),r.equipped&&r.equipped.type.name===t.type.name&&(e.innerHTML+=" (equipped)"),t.amount<1?e.classList.add("disabled"):e.addEventListener("click",function(e){r.equipped=t,s.openInventory(r,i,n)}),a.append(e)}()}catch(e){t.e(e)}finally{t.f()}this._inventory=this.createDialog("Wheat Farmer Inventory",a,function(){"function"==typeof n&&n()}),document.body.append(this._inventory)}}]),t}();r.default=i},{"../base/graphics":105,"../base/inventory":106,"../core/bit-math":113,"../core/util":118,"../tiles/tile":127,"./browser":111,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],113:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function e(){(0,n.default)(this,e)}return(0,o.default)(e,null,[{key:"floor",value:function(e){return e+(e<0&&!Number.isInteger(e)?-1:0)>>0}},{key:"round",value:function(e){return e+.5<<1>>1}},{key:"ceil",value:function(e){return e+(e<0?0:1)>>0}},{key:"abs",value:function(e){return(e^e>>31)-(e>>31)}},{key:"isInt",value:function(e){e="string"==typeof e?parseFloat(e):e;return!isNaN(e)&&(0|e)===e}}]),e}()},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],114:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),i=(Object.defineProperty(r,"__esModule",{value:!0}),function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=((0,n.default)(this,r),this._element=document.createElement("canvas"),this._element.width=e,this._element.height=t,this._element.getContext("2d"));if(!e)throw Error("Canvas 2D context not found");this._ctx=e}return(0,o.default)(r,[{key:"element",get:function(){return this._element}},{key:"ctx",get:function(){return this._ctx}},{key:"width",get:function(){return this._element.width},set:function(e){this._element.width=e}},{key:"height",get:function(){return this._element.height},set:function(e){this._element.height=e}},{key:"image",get:function(){var e=this;return new Promise(function(r,i){e.element.toBlob(function(e){var t;e?((t=new Image).onload=function(){r(t)},t.src=URL.createObjectURL(e)):i()})})}}]),r}());r.default=i},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],115:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),i=function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),i(e("./bit-math"))),a=i(e("./util")),i=function(){function i(e,t,r){(0,n.default)(this,i),this._r=e,this._g=t,this._b=r}return(0,o.default)(i,[{key:"r",get:function(){return this._r}},{key:"g",get:function(){return this._g}},{key:"b",get:function(){return this._b}},{key:"toHex",value:function(){for(var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);e.length<2;)e="0"+e;for(;t.length<2;)t="0"+t;for(;r.length<2;)r="0"+r;return"#"+e+t+r}},{key:"mix",value:function(e,t){return new i(s.default.round(a.default.mix(this.r,e.r,t)),s.default.round(a.default.mix(this.g,e.g,t)),s.default.round(a.default.mix(this.b,e.b,t)))}},{key:"lightenDarken",value:function(e){return new i(this.r+e,this.g+e,this.b+e)}}],[{key:"fromHex",value:function(e){e=i.REGEXP_RGB_COLORS_FROM_HEX.exec(e);return e?new i(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):null}}]),i}();(r.default=i).REGEXP_RGB_COLORS_FROM_HEX=new RegExp(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i)},{"./bit-math":113,"./util":118,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],116:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function e(){(0,n.default)(this,e)}return(0,o.default)(e,null,[{key:"easeInQuad",value:function(e){return e*e}},{key:"easeInCubic",value:function(e){return e*e*e}},{key:"easeInOutQuart",value:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2}},{key:"easeInExpo",value:function(e){return 0===e?0:Math.pow(2,10*e-10)}},{key:"easeOutQuint",value:function(e){return 1-Math.pow(1-e,5)}}]),e}()},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],117:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/inherits")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf"));function l(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(r);return e=i?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var i=function(e){return e&&e.__esModule?e:{default:e}},h=(Object.defineProperty(r,"__esModule",{value:!0}),e("pixi.js")),c=i(e("../base/graphics")),f=i(e("./easings")),d=i(e("./vector")),i=function(e){(0,s.default)(r,e);var t=l(r);function r(e){return(0,n.default)(this,r),(e=t.call(this,e)).speed=0,e.moveStartPosition=null,e.moveStartDistance=null,e.sourceFrames=[],e._moveTarget=null,e.scale.set(1/c.default.SQUARE_SIZE),e}return(0,o.default)(r,[{key:"textureId",get:function(){return 0}},{key:"renderOffset",get:function(){return new d.default(-this.pivot.x/this.parent.scale.x,-this.pivot.y/this.parent.scale.y)},set:function(e){this.pivot.set(-e.x*this.parent.scale.x,-e.y*this.parent.scale.y)}},{key:"moveHasCompleted",get:function(){return this.moveTarget instanceof d.default&&this.x===this.moveTarget.x&&this.y===this.moveTarget.y}},{key:"isMoving",get:function(){return 0<this.speed&&this.moveTarget instanceof d.default&&!this.moveHasCompleted}},{key:"movedDistance",get:function(){return this.moveStartPosition?this.moveStartPosition.substract(this.x,this.y).length:0}},{key:"moveTarget",get:function(){return this._moveTarget},set:function(e){(this._moveTarget=e)instanceof d.default?(this.moveStartPosition=new d.default(this.x,this.y),this.moveStartDistance=e.substract(this.x,this.y).length):(this.moveStartPosition=null,this.moveStartDistance=null)}},{key:"move",value:function(e){if(null==this.moveTarget||null==this.moveStartDistance)return new d.default(0);var e=this.speed*(e/1e3),t=this.moveTarget.substract(this.x,this.y).length,r=t/this.moveStartDistance;return t<=(e*=1+2*f.default.easeInOutQuart(1-r))&&(t=e),this.moveTarget.substract(this.x,this.y).multiply(e/t)}},{key:"updateSprite",value:function(e){this.isMoving&&(e=this.move(e),this.x+=e.x,this.y+=e.y)}}],[{key:"getFrameObjects",value:function(e,t){return e.map(function(e){return{texture:e,time:t}})}}]),r}(h.AnimatedSprite);r.default=i},{"../base/graphics":105,"./easings":116,"./vector":119,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12,"pixi.js":94}],118:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),i=(Object.defineProperty(r,"__esModule",{value:!0}),function(){function t(){(0,n.default)(this,t)}return(0,o.default)(t,null,[{key:"isAlphaNumeric",value:function(e){return t.REGEXP_ALPHA_NUMERIC.test(e)}},{key:"leadZeros",value:function(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}},{key:"mix",value:function(e,t,r){return e+r*(t-e)}}]),t}());(r.default=i).REGEXP_ALPHA_NUMERIC=new RegExp(/[\w ]+/)},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],119:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),i=function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),i(e("./bit-math")));r.default=function(){function r(e,t){(0,n.default)(this,r),e instanceof r?(this.x=e.x,this.y=e.y):(this.x=e,this.y=null!=t?t:e)}return(0,o.default)(r,[{key:"length",get:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"add",value:function(e,t){return e instanceof r?new r(this.x+e.x,this.y+e.y):new r(this.x+e,this.y+(null!=t?t:e))}},{key:"substract",value:function(e,t){return e instanceof r?new r(this.x-e.x,this.y-e.y):new r(this.x-e,this.y-(null!=t?t:e))}},{key:"floor",value:function(){return new r(s.default.floor(this.x),s.default.floor(this.y))}},{key:"round",value:function(){return new r(s.default.round(this.x),s.default.round(this.y))}},{key:"ceil",value:function(){return new r(s.default.ceil(this.x),s.default.ceil(this.y))}},{key:"multiply",value:function(e,t){return e instanceof r?new r(this.x*e.x,this.y*e.y):new r(this.x*e,this.y*(null!=t?t:e))}},{key:"divide",value:function(e,t){return e instanceof r?new r(this.x/e.x,this.y/e.y):new r(this.x/e,this.y/(null!=t?t:e))}},{key:"abs",value:function(){return new r(Math.abs(this.x),Math.abs(this.y))}},{key:"rotate",value:function(e){var t=Math.cos(e),e=Math.sin(e);return new r(s.default.round(1e4*(this.x*t-this.y*e))/1e4,s.default.round(1e4*(this.x*e+this.y*t))/1e4)}},{key:"rotateDeg",value:function(e){e=-e*(Math.PI/180);return this.rotate(e)}},{key:"toString",value:function(){return"(".concat(this.x.toFixed(1),", ").concat(this.y.toFixed(1),")")}}]),r}()},{"./bit-math":113,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],120:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/get")),a=i(e("@babel/runtime/helpers/inherits")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf"));function h(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return e=i?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var i=function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(r,"__esModule",{value:!0}),e("../base/textures")),f=i(e("../core/moveable-sprite")),i=function(e){(0,a.default)(r,e);var t=h(r);function r(){var e;return(0,n.default)(this,r),(e=t.call(this,r.getFrameObjects())).name="Bomb",e}return(0,o.default)(r,[{key:"explosionProgress",get:function(){return this.currentFrame/(this.totalFrames-1)}},{key:"hasStartedExploding",get:function(){return 0<this.explosionProgress}},{key:"hasCompletedExplosion",get:function(){return 1===this.explosionProgress}},{key:"updateEntity",value:function(e){(0,s.default)((0,l.default)(r.prototype),"updateEntity",this).call(this,e)}},{key:"ignite",value:function(){this.play()}}],[{key:"getFrameObjects",value:function(){var e=r.explodeTime/c.Textures.bomb.length;return f.default.getFrameObjects(c.Textures.bomb,e)}}]),r}(i(e("./entity")).default);(r.default=i).explodeTime=1e3,i.maxExplosionRadius=2},{"../base/textures":109,"../core/moveable-sprite":117,"./entity":121,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":6,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12}],121:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/get")),a=i(e("@babel/runtime/helpers/inherits")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf"));function h(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return e=i?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});i=function(e){(0,a.default)(r,e);var t=h(r);function r(e){return(0,n.default)(this,r),(e=t.call(this,e))._target=null,e.interactive=!0,e.speed=1,e.isHostile=!1,e}return(0,o.default)(r,[{key:"zIndex",get:function(){return 9999}},{key:"updateEntity",value:function(e){(0,s.default)((0,l.default)(r.prototype),"updateSprite",this).call(this,e)}}]),r}(i(e("../core/moveable-sprite")).default);r.default=i},{"../core/moveable-sprite":117,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":6,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12}],122:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/inherits")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf"));function l(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(r);return e=i?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var i=function(e){return e&&e.__esModule?e:{default:e}},h=(Object.defineProperty(r,"__esModule",{value:!0}),e("../base/textures")),c=i(e("../core/moveable-sprite")),i=function(e){(0,s.default)(r,e);var t=l(r);function r(){var e;return(0,n.default)(this,r),(e=t.call(this,r.getFrameObjects())).name="Explosion",e.loop=!1,e.completed=!1,e.play(),e.onComplete=function(){e.completed=!0},e}return(0,o.default)(r,null,[{key:"getFrameObjects",value:function(){var e=r.timeToExplode/h.Textures.explosion.length;return c.default.getFrameObjects(h.Textures.explosion,e)}}]),r}(i(e("./entity")).default);(r.default=i).timeToExplode=175},{"../base/textures":109,"../core/moveable-sprite":117,"./entity":121,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12}],123:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),a=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/inherits")),n=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf"));function h(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return e=i?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,n.default)(this,e)}}var i=function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(r,"__esModule",{value:!0}),e("../base/textures")),f=i(e("../core/easings")),d=i(e("../core/moveable-sprite")),p=i(e("../core/vector")),i=function(e){(0,u.default)(n,e);var i=h(n);function n(){(0,o.default)(this,n);var e=f.default.easeInCubic(Math.random()),t=Object.values(c.Textures.robot),t=t[Math.floor(t.length*e)],r=i.call(this,t);return r.name="Robot",r.speed=1.75+.75*Math.random(),r.isHostile=!0,r.bomb=null,r.clicked=!1,r._bombPlantedAt=null,r._sinAmplifier=.75*Math.random(),r._sinShiftDistanceOffset=Math.random()*n.movementWaveLength,r.on("click",function(e){r.play()}),r}return(0,s.default)(n,[{key:"bombPlantProgress",get:function(){if(null===this._bombPlantedAt)return 0;var e=(Date.now()-this._bombPlantedAt)/n.bombPlantTime;return 1<e?1:e}},{key:"hasStartedBombPlant",get:function(){return null!==this._bombPlantedAt}},{key:"hasCompletedBombPlant",get:function(){return 1===this.bombPlantProgress}},{key:"giveHat",value:function(e){e=new d.default([e]);this.addChild(e)}},{key:"plantBomb",value:function(){this._bombPlantedAt=Date.now()}},{key:"updateEntity",value:function(e){var t=new p.default(this.x,this.y),e=((0,a.default)((0,l.default)(n.prototype),"updateEntity",this).call(this,e),new p.default(this.x,this.y).substract(t));0<e.length&&(t=Math.atan2(e.y,e.x),e=this.movedDistance+this._sinShiftDistanceOffset,e=(.5+this._sinAmplifier)*Math.sin(2*(e%n.movementWaveLength/n.movementWaveLength)*Math.PI),this.renderOffset=new p.default(0,e).rotate(t)),this.moveHasCompleted&&!this.hasStartedBombPlant&&(this.plantBomb(),this.moveTarget=null,this.position.set(this.x+this.renderOffset.x,this.y+this.renderOffset.y),this.renderOffset=new p.default(0),this._sinShiftDistanceOffset=0)}}]),n}(i(e("./entity")).default);(r.default=i).movementWaveLength=new p.default(10).length,i.bombPlantTime=2e3},{"../base/textures":109,"../core/easings":116,"../core/moveable-sprite":117,"../core/vector":119,"./entity":121,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":6,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12}],124:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),i=function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),i(e("./base/graphics"))),u=i(e("./base/sound")),l=e("./base/world"),h=e("./browser/browser"),c=i(e("./core/vector")),f=i(e("./entities/robot")),d=i(e("./title-screen/title-screen")),i=function(){function n(e){if((0,o.default)(this,n),this._world=new l.World,this._browser=new h.Browser,this._titleScreen=new d.default,this._timeSinceLastClick=0,this._paused=!1,this._titleScreenHiddenBefore=null,this._lastUpdateRun=0,this._keysPressed=[],this._clickedAt=null,this._draggingMouse=!1,e.loading)throw Error("Graphics not ready yet");this._graphics=e,this.setupWorld(),this.setupMouse(),this.setupKeyboard(),this.setupTouchScreen(),this.setupCLI()}return(0,s.default)(n,[{key:"setupWorld",value:function(){var t=this;this._world.on("spriteAdded",function(e){t._graphics.addChild(e)}),this._world.on("spriteRemoved",function(e){t._graphics.removeChild(e)}),this._graphics.ticker.add(function(e){t.update(e)}),this._world.create(f.default,new c.default(0)),this._world.create(f.default,new c.default(0,9)),this._world.create(f.default,new c.default(9,9))}},{key:"setupCLI",value:function(){var t=this;h.Browser.debug&&(window.wheatFarmer={spawnEnemy:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;t._world?(void 0,t._world.scheduleEnemySpawn(e)):void 0}})}},{key:"setupMouse",value:function(){var r=this;this._browser.on("scroll",function(e){var t=r._graphics.camera.z,e=(r._graphics.camera.z-=e/5,r._browser.mouse.position.substract(new c.default(window.innerWidth,window.innerHeight).divide(2)).divide(a.default.SQUARE_SIZE).multiply(1/t-1/r._graphics.camera.z));r._graphics.camera.move(e)}),this._browser.on("mouseMove",function(e){r._graphics.mousePos=new c.default(e.x,e.y)}),this._browser.on("mouseClick",function(e){r._clickedAt=e,r._titleScreen.hidden||(r._titleScreen.onClick(e),r._timeSinceLastClick=0)})}},{key:"setupKeyboard",value:function(){var r=this;this._browser.on("keyDown",function(e,t){r._keysPressed.includes(t)||r._keysPressed.push(t)}),this._browser.on("keyUp",function(e,t){t=r._keysPressed.indexOf(t);-1!==t&&delete r._keysPressed[t]})}},{key:"setupTouchScreen",value:function(){this._browser.on("touchStart",function(){u.default.unlockAll()})}},{key:"handleUserInput",value:function(e){var t,r=new c.default(0),i=0;return this._keysPressed.includes("KeyW")&&(r.y-=.1*e),this._keysPressed.includes("KeyA")&&(r.x-=.1*e),this._keysPressed.includes("KeyD")&&(r.x+=.1*e),this._keysPressed.includes("KeyS")&&(r.y+=.1*e),this._keysPressed.includes("BracketRight")&&(i=.01*e),this._keysPressed.includes("Slash")&&(i=-.01*e),(r=this._keysPressed.includes("ShiftLeft")||this._keysPressed.includes("ShiftRight")?r.multiply(2):r).length&&(r=r.multiply(this._graphics.camera.z)),this._browser.mouse.pressed?(e=new c.default(0),this._lastMousePosition&&(e=this._browser.mouse.position.substract(this._lastMousePosition)).length>n.MOUSE_DRAG_TRESHOLD&&(t=e.divide(a.default.SQUARE_SIZE*this._graphics.camera.z),r=r.add(t.multiply(-1)),this._draggingMouse=!0),(null==this._lastMousePosition||e.length>n.MOUSE_DRAG_TRESHOLD)&&(this._lastMousePosition=new c.default(this._browser.mouse.position))):this._lastMousePosition=null,{cameraMoveDelta:r,cameraZoomDelta:i}}},{key:"handleUserClickAndDrag",value:function(e){var t,r=!1;return this._draggingMouse&&!this._lastMousePosition&&(this._clickedAt=null,this._draggingMouse=!1),null!==this._clickedAt&&this._timeSinceLastClick>n.CLICK_COOLDOWN_MS&&(r=!0,t=this._graphics.getWorldPosFromScreen(this._clickedAt),this._clickedAt=null,this._world.onTileClicked(t.floor())),r}},{key:"updateTitleScreen",value:function(e){h.Browser.toggleTitleScreen(!this._titleScreen.hidden),this._titleScreenHiddenBefore!==this._titleScreen.hidden&&(this._titleScreen.hidden?this._paused=!1:this._paused=!0,this._titleScreenHiddenBefore=this._titleScreen.hidden),this._titleScreen.hidden||this._titleScreen.update(e)}},{key:"updateDebug",value:function(e){this._browser.gui.renderWorldStatsHTML(this._world),h.Browser.debug&&this._browser.gui.renderDebug(this._graphics.camera,this._graphics,this._world,42)}},{key:"update",value:function(e){var t=Date.now()-this._lastUpdateRun,r=(this._lastUpdateRun=Date.now(),this.handleUserInput(e)),i=r.cameraMoveDelta,r=r.cameraZoomDelta,i=(this._graphics.update(e,i,r),this.updateTitleScreen(t),this._world.update(t),this.updateDebug(e),this.handleUserClickAndDrag(e));this._timeSinceLastClick=i?0:this._timeSinceLastClick+t}}]),n}();(r.default=i).CLICK_COOLDOWN_MS=350,i.MOUSE_DRAG_TRESHOLD=50},{"./base/graphics":105,"./base/sound":108,"./base/world":110,"./browser/browser":111,"./core/vector":119,"./entities/robot":123,"./title-screen/title-screen":132,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],125:[function(e,t,r){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(r,"__esModule",{value:!0}),i(e("./base/graphics"))),n=e("./browser/browser"),o=i(e("./game")),s=new r.default(function(){new o.default(s)});n.Browser.isMobile&&n.Browser.alert("Warning: This is an early-alpha build of the game, mobile is not yet supported.")},{"./base/graphics":105,"./browser/browser":111,"./game":124}],126:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/get")),a=i(e("@babel/runtime/helpers/inherits")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf"));function h(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return e=i?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var i=function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(r,"__esModule",{value:!0}),e("@pixi/core")),i=function(e){(0,a.default)(r,e);var t=h(r);function r(){var e;return(0,n.default)(this,r),(e=t.call(this,[c.Texture.EMPTY])).name="Empty",e}return(0,o.default)(r,[{key:"updateTile",value:function(e){(0,s.default)((0,l.default)(r.prototype),"updateTile",this).call(this,e)}}]),r}(i(e("./tile")).default);r.default=i},{"./tile":127,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":6,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12,"@pixi/core":22}],127:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),a=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/inherits")),o=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf"));function h(e,t){var r,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw n}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function f(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return e=i?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});i=function(e){(0,u.default)(o,e);var t=f(o);function o(){var e;return(0,n.default)(this,o),(e=t.apply(this,arguments)).age=0,e._damageSprites=[],e._damage=0,e}return(0,s.default)(o,[{key:"damage",get:function(){return this._damage},set:function(e){this._damage=e<0?0:e}},{key:"zIndex",get:function(){return 999}},{key:"addDamageSprites",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length){(i=this._damageSprites).push.apply(i,t);var i,n,o=h(t);try{for(o.s();!(n=o.n()).done;)n.value.zIndex=5555}catch(e){o.e(e)}finally{o.f()}this.addChild.apply(this,t)}}},{key:"getDamageSprites",value:function(){return this._damageSprites}},{key:"hasCollision",value:function(){return!1}},{key:"getChar",value:function(){return null}},{key:"updateTile",value:function(e){var t,r=this,i=((0,a.default)((0,l.default)(o.prototype),"updateSprite",this).call(this,e),this.age+=e,this.damage-=e/(100*o.DAMAGE_HEAL_TIME),h(this._damageSprites));try{for(i.s();!(t=i.n()).done;){var n=t.value;n.alpha-=this.damage/e/100,n.alpha<=0&&this.removeChild(n)}}catch(e){i.e(e)}finally{i.f()}this._damageSprites=this._damageSprites.filter(function(e){return Boolean(r.parent)})}}]),o}(i(e("../core/moveable-sprite")).default);(r.default=i).DAMAGE_HEAL_TIME=6e4,i.COLOR=""},{"../core/moveable-sprite":117,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":6,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12}],128:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/inherits")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf"));function l(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(r);return e=i?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});i=function(e){(0,s.default)(r,e);var t=l(r);function r(){var e;return(0,n.default)(this,r),(e=t.apply(this,arguments)).name="Wall",e.buyPrice=10,e.sellPrice=4,e}return(0,o.default)(r,[{key:"hasCollision",value:function(){return!0}},{key:"getChar",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?"":null}}]),r}(i(e("./tile")).default);r.default=i},{"./tile":127,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12}],129:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/inherits")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf"));function l(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(r);return e=i?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var i=function(e){return e&&e.__esModule?e:{default:e}},h=(Object.defineProperty(r,"__esModule",{value:!0}),e("../base/textures")),c=i(e("../core/bit-math")),f=i(e("../core/moveable-sprite")),i=function(e){(0,s.default)(r,e);var t=l(r);function r(){var e;return(0,n.default)(this,r),(e=t.call(this,r.getFrameObjects())).name="Wheat",e.buyPrice=0,e.sellPrice=0,e.minSeedDrop=0,e.maxSeedDrop=3,e.loop=!1,e.play(),e}return(0,o.default)(r,[{key:"growthState",get:function(){return this.currentFrame/(this.totalFrames-1)}},{key:"getChar",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?"":null}},{key:"dropSeeds",value:function(){return c.default.floor(Math.random()*(this.maxSeedDrop-this.minSeedDrop+1))+this.minSeedDrop}}],[{key:"getFrameObjects",value:function(){var e=r.growthTime/h.Textures.wheat.length;return f.default.getFrameObjects(h.Textures.wheat,e)}}]),r}(i(e("./tile")).default);(r.default=i).growthTime=25e3},{"../base/textures":109,"../core/bit-math":113,"../core/moveable-sprite":117,"./tile":127,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":7,"@babel/runtime/helpers/inherits":8,"@babel/runtime/helpers/interopRequireDefault":9,"@babel/runtime/helpers/possibleConstructorReturn":12}],130:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),i=function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(r,"__esModule",{value:!0}),i(e("../core/color"))),e=function(){function r(){(0,n.default)(this,r)}return(0,o.default)(r,[{key:"render",value:function(e,t){t.fillStyle=r.COLOR_BACKGROUND_HEX,t.fillRect(0,0,e.width,e.height),t.fillStyle=r.COLOR_TEXT_HEX,t.textAlign="center",t.textBaseline="middle",t.font="".concat(20,'px "Courier New"'),r.COLOR_TEXT_SHADOW_HEX&&(t.shadowColor=r.COLOR_TEXT_SHADOW_HEX,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=7),t.fillText(r.TRANSFORMED_TEXT,e.width/2,e.height/2),t.shadowBlur=0}},{key:"update",value:function(e){}},{key:"onClick",value:function(e){}}]),r}();(r.default=e).TEXT="Click to load",e.TRANSFORMED_TEXT=e.TEXT.toUpperCase().split("").join(" "),e.COLOR_BACKGROUND_HEX="#111111",e.COLOR_TEXT_HEX="#f3bc3c",e.COLOR_TEXT_SHADOW_HEX=null==(i=null==(r=i.default.fromHex(e.COLOR_TEXT_HEX))?void 0:r.lightenDarken(20))?void 0:i.toHex()},{"../core/color":115,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],131:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),i=function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),i(e("../base/sound"))),d=i(e("../core/bit-math")),i=i(e("../core/color")),e=function(){function f(){(0,n.default)(this,f)}return(0,o.default)(f,[{key:"render",value:function(e,t){for(var r=e.width/(20*f.LONGEST_LINE_WIDTH)*1.65*.75,i=1,n=(t.fillStyle=f.COLOR_BACKGROUND_HEX,t.fillRect(0,0,e.width,e.height),t.fillStyle=f.COLOR_TEXT_HEX,t.textAlign="center",t.textBaseline="middle",t.font="".concat(20*r,'px "Courier New"'),f.COLOR_TEXT_SHADOW_HEX&&(t.shadowColor=f.COLOR_TEXT_SHADOW_HEX,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=7),10*Math.sin(Date.now()/1e3)),o=0;o<f.LOGO.length;o++){var s=20*i*r*(o-f.LOGO.length),a=d.default.floor(e.width/2),s=d.default.floor(e.height/2+s+n);t.fillText(f.LOGO[o],a,s)}r=20,i=1.5,t.textBaseline="top",t.font="".concat(r,'px "Courier New"');for(var u=0;u<f.DESCRIPTION.length;u++){var l=i*r*(u+3),h=d.default.floor(e.width/2),l=d.default.floor(e.height/2+l);t.fillText(f.DESCRIPTION[u],h,l)}r=15,i=1.5,t.textBaseline="bottom",t.font="".concat(r,'px "Courier New"'),t.shadowBlur=5;for(var c=0;c<f.CREDITS.length;c++)t.fillText(f.CREDITS[c],e.width/2,e.height-4.5*r+i*r*c);t.shadowBlur=0}},{key:"update",value:function(e){s.default.mainMusic.paused&&(s.default.mainMusic.volume=.6,s.default.mainMusic.play())}},{key:"onClick",value:function(e){s.default.mainMusic.volume=.2}}]),f}();(r.default=e).LOGO=[" __     __     __  __     ______     ______     ______      ______   ______     ______     __    __     ______     ______    ",'/\\ \\  _ \\ \\   /\\ \\_\\ \\   /\\  ___\\   /\\  __ \\   /\\__  _\\    /\\  ___\\ /\\  __ \\   /\\  == \\   /\\ "-./  \\   /\\  ___\\   /\\  == \\   ','\\ \\ \\/ ".\\ \\  \\ \\  __ \\  \\ \\  __\\   \\ \\  __ \\  \\/_/\\ \\/    \\ \\  __\\ \\ \\  __ \\  \\ \\  __<   \\ \\ \\-./\\ \\  \\ \\  __\\   \\ \\  __<   ',' \\ \\__/".~\\_\\  \\ \\_\\ \\_\\  \\ \\_____\\  \\ \\_\\ \\_\\    \\ \\_\\     \\ \\_\\    \\ \\_\\ \\_\\  \\ \\_\\ \\_\\  \\ \\_\\ \\ \\_\\  \\ \\_____\\  \\ \\_\\ \\_\\ ',"  \\/_/   \\/_/   \\/_/\\/_/   \\/_____/   \\/_/\\/_/     \\/_/      \\/_/     \\/_/\\/_/   \\/_/ /_/   \\/_/  \\/_/   \\/_____/   \\/_/ /_/ "],e.LONGEST_LINE_WIDTH=e.LOGO.reduce(function(e,t){return e.length>t.length?e:t}).length,e.DESCRIPTION=["Plant wheat seeds, harvest crops and sell them.","","Avoid robot attacks at all costs."],e.CREDITS=["Programming by ALEXANDER ROIDL and JULIAN ARNOLD","Soundtrack by JULIAN ARNOLD"],e.COLOR_BACKGROUND_HEX="#111111",e.COLOR_TEXT_HEX="#f3bc3c",e.COLOR_TEXT_SHADOW_HEX=null==(i=null==(r=i.default.fromHex(e.COLOR_TEXT_HEX))?void 0:r.lightenDarken(20))?void 0:i.toHex()},{"../base/sound":108,"../core/bit-math":113,"../core/color":115,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}],132:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),i=function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),i(e("./title-screen-logo-slide"))),a=i(e("./title-screen-load-slide")),i=function(){function e(){(0,n.default)(this,e),this.hidden=!1,this.slideId=0,this._clickedAt=null,this._slides=[new a.default,new s.default]}return(0,o.default)(e,[{key:"onClick",value:function(e){null===this._clickedAt&&(this._clickedAt=Date.now()),this._slides[this.slideId].onClick(e),this.slideId+1>=this._slides.length?this.hidden=!0:this.slideId++}},{key:"update",value:function(e){this._slides[this.slideId]&&this._slides[this.slideId].update(e)}},{key:"render",value:function(e,t){this.hidden||this._slides[this.slideId]&&this._slides[this.slideId].render(e,t)}}]),e}();r.default=i},{"./title-screen-load-slide":130,"./title-screen-logo-slide":131,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":9}]},{},[125]);