!function i(r,o,a){function u(t,e){if(!o[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},r[t][0].call(n.exports,function(e){return u(r[t][1][e]||e)},n,n.exports,i,r,o,a)}return o[t].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){"use strict";function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("../core/vector")),a=i(e("../core/bit-math")),l=e("./inventory"),c=i(e("../tiles/tile")),f=i(e("../core/util"));n.default=function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._statsDisplay=document.createElement("div"),this._worldStats=document.createElement("div"),this._shop=null,this._inventory=null,this._mouseDown=!1,this._mousePos=new o.default(0,0),this._oldWindowSize=new o.default(window.innerWidth,window.innerHeight),this.onScroll=function(e){},this.onMouseDown=function(e){},this.onMouseUp=function(e){},this.onMouseMove=function(e){},this.onMouseClick=function(e){},this.onResize=function(e,t){},this.onKeyDown=function(e,t){},this.onKeyUp=function(e,t){},this.onTouchStart=function(e){},this.onTouchMove=function(e){},this.onTouchCancel=function(e){},this.onTouchEnd=function(e){},this.setupDOM(),this.setupEvents()}var e,t,n;return e=i,n=[{key:"isMobile",get:function(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(function(e){return navigator.userAgent.match(e)})}},{key:"alert",value:function(e){void 0}},{key:"getParameter",value:function(e){var t,n=null,i=[],r=s(location.search.substr(1).split("&"));try{for(r.s();!(t=r.n()).done;)(i=t.value.split("="))[0]===e&&(n=decodeURIComponent(i[1]))}catch(e){r.e(e)}finally{r.f()}return n}}],(t=[{key:"mouseDown",get:function(){return this._mouseDown}},{key:"mousePos",get:function(){return this._mousePos}},{key:"setupDOM",value:function(){this._statsDisplay.classList.add("gui"),this._statsDisplay.classList.add("stats-display"),this._worldStats.classList.add("world-stats");var e=document.createElement("div");e.classList.add("keyboard-info-row"),e.innerHTML="<span>m</span> Open menu",e.addEventListener("click",function(e){});var t=document.createElement("div");t.classList.add("keyboard-info-row"),t.innerHTML="<span>S</span> Open shop",t.addEventListener("click",function(e){});var n=document.createElement("div");n.classList.add("keyboard-info-row"),n.innerHTML="<span>E</span> Open inventory",n.addEventListener("click",function(e){});var i=document.createElement("div");i.classList.add("keyboard-info"),i.append(e,t,n),document.body.append(this._statsDisplay,this._worldStats,i)}},{key:"setupEvents",value:function(){function e(e){if("wheel"===e.type)n=!0;else if(n)return;e=(e.deltaY||-e.wheelDelta||e.detail)>>10||1,t.onScroll(e)}var t=this,n=!1;document.addEventListener("wheel",e),document.addEventListener("mousewheel",e),document.addEventListener("DOMMouseScroll",e),document.addEventListener("mousedown",function(e){t._mouseDown=!0,t.onMouseDown(new o.default(e.screenX,e.screenY))}),document.addEventListener("mouseup",function(e){t._mouseDown=!1,t.onMouseUp(new o.default(e.screenX,e.screenY))}),document.addEventListener("mousemove",function(e){t._mousePos.x=e.clientX,t._mousePos.y=e.clientY,t.onMouseMove(new o.default(e.clientX,e.clientY))}),document.addEventListener("click",function(e){t.onMouseClick(t._mousePos)}),window.addEventListener("load",function(){t._oldWindowSize=new o.default(window.innerWidth,window.innerHeight)}),window.addEventListener("resize",function(){var e=new o.default(window.innerWidth,window.innerHeight);t.onResize(e,t._oldWindowSize),t._oldWindowSize=new o.default(window.innerWidth,window.innerHeight)}),document.addEventListener("keydown",function(e){t.onKeyDown(e.keyCode,e.code)}),document.addEventListener("keyup",function(e){t.onKeyUp(e.keyCode,e.code)}),i.isMobile&&(document.body.addEventListener("touchstart",function(e){t.onTouchStart(new o.default(0,0))}),document.body.addEventListener("touchend",function(e){t.onTouchEnd(new o.default(0,0))}),document.body.addEventListener("touchmove",function(e){t.onTouchMove(new o.default(0,0))}),document.body.addEventListener("touchcancel",function(e){t.onTouchCancel(new o.default(0,0))}))}},{key:"getWorldStatsRowHTML",value:function(e,t){void 0===t&&(t="");var n=document.createElement("div");n.classList.add("left"),n.innerHTML=e;var i=document.createElement("div");i.classList.add("right"),i.innerHTML=t;e=document.createElement("div");return e.classList.add("row"),e.append(n,i),2!==t.length||f.default.isAlphaNumeric(t)||e.classList.add("emoji"),e}},{key:"renderWorldStatsHTML",value:function(e){var t,n=this._worldStats.innerHTML="";e.player.equipped&&e.player.equipped.type instanceof c.default&&((t=e.player.equipped.type.getChar(!0))&&(n=t));n=this.getWorldStatsRowHTML("‚úã",n);this._worldStats.append(n);for(var i=0,r=[{icon:"‚åõÔ∏è",text:Math.floor((Date.now()-e.createdAt)/1e3)+"s"},{icon:"üå±",text:e.player.items.getItemAmount("Wheat")},{icon:"üåæ",text:e.player.items.wheat},{icon:"üí∞",text:e.player.items.money+" $"}];i<r.length;i++){var o=r[i],o=this.getWorldStatsRowHTML(o.icon,String(o.text));this._worldStats.append(o)}}},{key:"getCameraDebugHTML",value:function(e){return"\n            <strong>Camera:</strong><br>\n            <strong>X:</strong> ".concat(e.position.x.toFixed(3),"<br>\n            <strong>Y:</strong> ").concat(e.position.y.toFixed(3),"<br>\n            <strong>Zoom:</strong> ").concat(e.zoomAmount.toFixed(3),"\n        ")}},{key:"getMouseDebugHTML",value:function(e){e=e.worldPosFromScreen(this._mousePos);return"\n            <strong>Mouse".concat(this._mouseDown?" (down)":"",":</strong><br>\n            <strong>X:</strong> ").concat(this._mousePos.x,"<br>\n            <strong>Y:</strong> ").concat(this._mousePos.y,"<br>\n            <strong>World X:</strong> ").concat(e.x.toFixed(3),"<br>\n            <strong>World Y:</strong> ").concat(e.y.toFixed(3),"\n        ")}},{key:"getRendererDebugHTML",value:function(e){var t=e.camera,n=Math.floor(t.position.x/(e.SQUARE_SIZE*t.zoomAmount)),i=Math.ceil((t.position.x+window.innerWidth)/(e.SQUARE_SIZE*t.zoomAmount)),r=Math.floor(t.position.y/(e.SQUARE_SIZE*t.zoomAmount)),t=Math.ceil((t.position.y+window.innerHeight)/(e.SQUARE_SIZE*t.zoomAmount));return"\n            <strong>Renderer:</strong><br>\n            <strong>X-start:</strong> ".concat(n,"<br> \n            <strong>X-end:</strong> ").concat(i,"<br>\n            <strong>Y-start:</strong> ").concat(r,"<br>\n            <strong>Y-end:</strong> ").concat(t,"\n        ")}},{key:"getMiscDebugHTML",value:function(e){return"\n            <strong>Tiles/Min:</strong> ".concat(e.tilesPlantedPerMin,"\n        ")}},{key:"renderDebug",value:function(e,t,n){n=[this.getCameraDebugHTML(e),this.getMouseDebugHTML(e),this.getRendererDebugHTML(t),this.getMiscDebugHTML(n)];this._statsDisplay.innerHTML='<div class="gui-item">'+n.join('</div><hr><div class="gui-item">')+"</div>"}},{key:"createDialog",value:function(e,t,n){t.classList.add("dialog-content");var i=document.createElement("a");i.href="javascript:void(0)",i.innerHTML=" - (close)",i.addEventListener("click",function(e){"function"==typeof n&&n(),o.remove()});var r=document.createElement("div");r.classList.add("dialog-title"),r.innerHTML=e,r.append(i);i=document.createElement("div");i.classList.add("dialog"),i.append(r,t);var o=document.createElement("div");return o.classList.add("dialog-wrap"),o.addEventListener("click",function(e){e.target===o&&("function"==typeof n&&n(),o.remove())}),o.append(i),o}},{key:"sellDialog",value:function(e,t){e=window.prompt("How many?",String(e));null!==e&&a.default.isInt(e)?t(parseFloat(e)):void 0}},{key:"onShopSellWheat",value:function(n,i){var r=this;this.sellDialog(n.wheat,function(e){var t=n.sellWheat(e);r.closeShop(),r.openShop(n,i),t?void 0:void 0})}},{key:"onShopItemBuy",value:function(n,i,r){var o=this,e=Math.floor(n.money/i.type.buyPrice);this.sellDialog(e,function(e){var t=n.purchaseItem(i.type.name,e);o.closeShop(),o.openShop(n,r),t?void 0:void 0})}},{key:"openShop",value:function(n,i){var r=this;this._shop&&this.closeShop();var o=document.createElement("div"),e=document.createElement("div");e.innerHTML="- Wheat (+".concat(l.Inventory.MONEY_PER_WHEAT,"$) - ").concat(n.wheat," owned"),0<n.wheat?e.addEventListener("click",function(e){r.onShopSellWheat(n,i)}):e.classList.add("disabled"),o.append(e);var a,t=s(n.items);try{for(t.s();!(a=t.n()).done;)(function(){var t=a.value;if(0===t.type.buyPrice&&0===t.type.sellPrice)return;var e=document.createElement("div");e.innerHTML="+ ".concat(t.type.name," (-").concat(t.type.buyPrice,"$) - ").concat(t.amount," owned"),n.money>=t.type.buyPrice?e.addEventListener("click",function(e){r.onShopItemBuy(n,t,i)}):e.classList.add("disabled"),o.append(e)})()}catch(e){t.e(e)}finally{t.f()}this._shop=this.createDialog("Wheat Farmer Shop",o,function(){"function"==typeof i&&i()}),document.body.append(this._shop)}},{key:"closeShop",value:function(){null!==this._shop&&(this._shop.remove(),this._shop=null)}},{key:"openInventory",value:function(n,i,r){var o=this;null!==this._inventory&&this._inventory.remove();var a,u=document.createElement("div"),t=s(i.items);try{for(t.s();!(a=t.n()).done;)!function(){var t=a.value,e=document.createElement("div");e.innerHTML="".concat(t.type.name," x").concat(t.amount),n.equipped&&n.equipped.type.name===t.type.name&&(e.innerHTML+=" (equipped)"),t.amount<1?e.classList.add("disabled"):e.addEventListener("click",function(e){n.equipped=t,o.openInventory(n,i,r)}),u.append(e)}()}catch(e){t.e(e)}finally{t.f()}this._inventory=this.createDialog("Wheat Farmer Inventory",u,function(){"function"==typeof r&&r()}),document.body.append(this._inventory)}}])&&r(e.prototype,t),n&&r(e,n),i}()},{"../core/bit-math":8,"../core/util":12,"../core/vector":13,"../tiles/tile":17,"./inventory":4}],2:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("../core/vector"));n.default=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.DEFAULT_ZOOM=1,this.MIN_ZOOM=.25,this._position=new o.default(0,0),this._zoomAmount=this.DEFAULT_ZOOM,this._worldSquareSize=e}var e,n,i;return e=t,(n=[{key:"position",get:function(){return this._position}},{key:"zoomAmount",get:function(){return this._zoomAmount}},{key:"worldSquareSize",get:function(){return this._worldSquareSize}},{key:"setup",value:function(e){e=e*this._worldSquareSize*this._zoomAmount;this._position=new o.default(-window.innerWidth/2+e/2,-window.innerHeight/2+e/2)}},{key:"move",value:function(e,t){this._position=this._position.add(e,t)}},{key:"zoom",value:function(e){var t,n;this._zoomAmount+e<this.MIN_ZOOM?this._zoomAmount=this.MIN_ZOOM:(t=new o.default(window.innerWidth/2,window.innerHeight/2),n=this.worldPosFromScreen(t),this._zoomAmount+=e,t=-((e=this.worldPosFromScreen(t)).x-n.x)*this.worldSquareSize*this.zoomAmount,n=-(e.y-n.y)*this.worldSquareSize*this.zoomAmount,this.move(t,n))}},{key:"worldPosFromScreen",value:function(e){return new o.default((e.x+this.position.x)/this.worldSquareSize/this._zoomAmount,(e.y+this.position.y)/this.worldSquareSize/this._zoomAmount)}}])&&r(e.prototype,n),i&&r(e,i),t}()},{"../core/vector":13}],3:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("../core/game-loop")),a=i(e("./browser")),u=i(e("./world")),s=i(e("../core/renderer")),l=i(e("../core/vector")),c=i(e("../title-screen/title-screen")),f=i(e("./sound"));n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._loop=new o.default,this._renderer=new s.default,this._world=new u.default,this._browser=new a.default,this._titleScreen=new c.default,this._mouseDown=!1,this._lastClickAt=Date.now(),this._paused=!1,this._titleScreenHiddenBefore=null,this.setupLoop(),this.setupMouse(),this.setupKeyboard(),this.setupTouchScreen(),this.setupWindow(),this._renderer.camera.setup(this._world.SIZE)}var t,n,i;return t=e,i=[{key:"instance",get:function(){return e._instance=!e._instance?new e:e._instance}}],(n=[{key:"setupMouse",value:function(){var t=this;this._browser.onScroll=function(e){t._renderer.camera.zoom(-e/5)},this._browser.onMouseDown=function(e){t._mouseDown=!0},this._browser.onMouseUp=function(e){t._mouseDown=!1},this._browser.onMouseMove=function(e){t._renderer.mousePos=new l.default(e.x,e.y)},this._browser.onMouseClick=function(e){if(!t._titleScreen.hidden)return t._titleScreen.onClick(e),void(t._lastClickAt=Date.now());e=t._renderer.camera.worldPosFromScreen(e);t._world.onTileClicked(e.floor())}}},{key:"setupKeyboard",value:function(){var n=this;this._browser.onKeyUp=function(e,t){n._titleScreen.hidden&&("Escape"!==t?("KeyS"===t&&(n._paused=!0,n._browser.openShop(n._world.player.items,function(){n._paused=!1})),"KeyE"===t&&(n._paused=!0,n._browser.openInventory(n._world.player,n._world.player.items,function(){n._paused=!1}))):n._titleScreen.hidden=!1)}}},{key:"setupTouchScreen",value:function(){this._browser.onTouchStart=function(){f.default.unlockAll()}}},{key:"setupWindow",value:function(){var i=this;this._browser.onResize=function(e,t){var n=t.x-e.x,e=t.y-e.y;i._renderer.camera.move(n/2,e/2)}}},{key:"setupLoop",value:function(){var n=this;this._loop.update=function(e){var t;document.body.classList.toggle("titlescreen",!n._titleScreen.hidden),n._titleScreenHiddenBefore!==n._titleScreen.hidden&&(n._titleScreen.hidden?n._paused=!1:n._paused=!0,n._titleScreenHiddenBefore=n._titleScreen.hidden),n._titleScreen.hidden?n._paused||(n._world.update(e),n._mouseDown&&250<Date.now()-n._lastClickAt&&(t=n._renderer.camera.worldPosFromScreen(n._renderer.mousePos),n._world.onTileClicked(t.floor()),n._lastClickAt=Date.now())):n._titleScreen.update(e)},this._loop.render=function(e){n._titleScreen.hidden||null===n._renderer.ctx?n._paused||(n._renderer.render(n._world),n._browser.renderWorldStatsHTML(n._world),a.default.getParameter("debug")&&n._browser.renderDebug(n._renderer.camera,n._renderer,n._world)):n._titleScreen.render(n._renderer,n._renderer.ctx)},this._loop.start()}}])&&r(t.prototype,n),i&&r(t,i),e}()},{"../core/game-loop":10,"../core/renderer":11,"../core/vector":13,"../title-screen/title-screen":22,"./browser":1,"./sound":6,"./world":7}],4:[function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Inventory=n.InventoryItem=void 0;var s=i(e("../tiles/wall-tile")),l=i(e("../tiles/wheat-tile")),c=function e(t){a(this,e),this.amount=0,this.type=t};n.InventoryItem=c;e=function(){function t(){a(this,t),this.wheat=0,this.money=0,this.items=[new c(new l.default),new c(new s.default)]}var e,n,i;return e=t,(n=[{key:"getItemAmount",value:function(e){var t,n=r(this.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e===i.type.name)return i.amount}}catch(e){n.e(e)}finally{n.f()}return 0}},{key:"setItemAmount",value:function(e,t){e=this.getItem(e);null!==e&&(e.amount=t)}},{key:"increaseItemAmount",value:function(e){this.setItemAmount(e,this.getItemAmount(e)+1)}},{key:"decreaseItemAmount",value:function(e){var t=this.getItemAmount(e)-1;this.setItemAmount(e,t<0?0:t)}},{key:"getItem",value:function(e){var t,n=r(this.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e===i.type.name)return i}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"purchaseItem",value:function(e,t){var n=this.getItem(e);if(null===n)return!1;e=n.type.buyPrice*t;return!(this.money-e<0)&&(this.money-=e,n.amount+=t,!0)}},{key:"sellWheat",value:function(e){return!(this.wheat-e<0)&&(this.wheat-=e,this.money+=e*t.MONEY_PER_WHEAT,!0)}}])&&o(e.prototype,n),i&&o(e,i),t}();(n.Inventory=e).MONEY_PER_WHEAT=3},{"../tiles/wall-tile":18,"../tiles/wheat-tile":19}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./inventory");n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.WHEAT_START_AMOUNT=50,this.items=new i.Inventory,this.equipped=null,this.items.setItemAmount("Wheat",this.WHEAT_START_AMOUNT),this.equipped=this.items.getItem("Wheat")}},{"./inventory":4}],6:[function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.position=null,this._isMusic=!1,this._audio=new Audio(e),this.isMusic=t,n.all.push(this)}var e,t,i;return e=n,i=[{key:"unlockAll",value:function(){var e,t=r(n.all);try{for(t.s();!(e=t.n()).done;)e.value.unlock()}catch(e){t.e(e)}finally{t.f()}}}],(t=[{key:"volume",get:function(){return this._audio.volume},set:function(e){this._audio.volume=e}},{key:"paused",get:function(){return this._audio.paused}},{key:"isMusic",get:function(){return this._isMusic},set:function(e){this._isMusic=!!e,this._audio.loop=!!e}},{key:"play",value:function(){this._audio.play()}},{key:"pause",value:function(){this._audio.pause()}},{key:"unlock",value:function(){this.play(),this.pause(),this._audio.currentTime=0}}])&&o(e.prototype,t),i&&o(e,i),n}();(n.default=i).all=[],i.mainMusic=new i("audio/210107blunt164.ogg",!0)},{}],7:[function(e,t,n){"use strict";function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var v=i(e("../tiles/empty-tile")),a=i(e("../tiles/wheat-tile")),o=i(e("./player")),_=i(e("../entities/enemies/robot")),g=i(e("../core/vector")),w=i(e("../core/easings")),s=i(e("../tiles/tile")),b=i(e("../core/bit-math")),l=i(e("../tiles/wall-tile"));n.default=function(){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.SIZE=20,this.CENTER=new g.default(this.SIZE/2,this.SIZE/2).floor(),this._createdAt=Date.now(),this._player=new o.default,this._entities=[],this._plantedTilesPerMin=[],this._enemyGroupsPerMin=[],this._tiles=Array(this.SIZE).fill([]).map(function(){return Array(e.SIZE).fill([]).map(function(){return new v.default})})}var e,n,i;return e=t,(n=[{key:"tiles",get:function(){return this._tiles}},{key:"createdAt",get:function(){return this._createdAt}},{key:"player",get:function(){return this._player}},{key:"entities",get:function(){return this._entities}},{key:"tilesPlantedPerMin",get:function(){return this._plantedTilesPerMin.length}},{key:"enemyGroupsPerMin",get:function(){return this._enemyGroupsPerMin.length}},{key:"isValidTilePos",value:function(e,t){return null!=this._tiles[t]&&null!=this._tiles[t][e]}},{key:"onTileClicked",value:function(e){if(this.isValidTilePos(e.x,e.y)){var t=null,n=this._tiles[e.y][e.x],i=this._player.items.getItemAmount("Wheat"),r=this._player.items.getItemAmount("Wall");if(n.onClicked(),n instanceof v.default&&this._player.equipped&&this._player.equipped.type instanceof s.default&&(this._player.equipped.type instanceof a.default&&0<i&&(this._player.items.decreaseItemAmount("Wheat"),t=new a.default),this._player.equipped.type instanceof l.default&&0<r&&(this._player.items.decreaseItemAmount("Wall"),r-1==0&&(this._player.equipped=this._player.items.getItem("Wheat")),t=new l.default)),n instanceof a.default&&1<=n.growthState){for(var o=null;null===o||i+o===0;)o=n.dropSeeds();this._player.items.setItemAmount("Wheat",i+o),this._player.items.wheat+=1,t=new v.default}n instanceof l.default&&(this._player.items.increaseItemAmount("Wall"),t=new v.default),null!==t&&(t.damage=n.damage,(this._tiles[e.y][e.x]=t)instanceof v.default||this._plantedTilesPerMin.push(t.timeCreated))}}},{key:"getSurroundingTileCoords",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=[],r=e.y-Math.ceil(t);r<=e.y+Math.ceil(t);r++)if(this._tiles[r])for(var o=e.x-Math.ceil(t);o<=e.x+Math.ceil(t);o++)!this._tiles[r][o]||o===e.x&&r===e.y&&!n||new g.default(e.x-o,e.y-r).length>Math.ceil(t)||i.push(new g.default(o,r));return i}},{key:"getRandomOutsidePos",value:function(){var e=3*this.CENTER.length;return new g.default(e,0).rotate(360*Math.random()).add(this.CENTER.x,this.CENTER.y)}},{key:"spawnEnemy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length?arguments[1]:void 0;null===e&&(e=this.getRandomOutsidePos()),t&&(t=new g.default(Math.random()*t.x,Math.random()*t.y).rotate(360*Math.random()),e=e.add(t.x,t.y));e=new _.default(e.x,e.y);return this._entities.push(e),e}},{key:"update",value:function(h){var p=this;this._plantedTilesPerMin=this._plantedTilesPerMin.filter(function(e){return Date.now()-e<6e4}),this._enemyGroupsPerMin=this._enemyGroupsPerMin.filter(function(e){return Date.now()-e<6e4});for(var e=0;e<this._tiles.length;e++)for(var t=0;t<this._tiles[e].length;t++)this._tiles[e][t].update(h);var n=Math.ceil((this.tilesPlantedPerMin-40)/10);if(0<n){var i=n-this.enemyGroupsPerMin;if(0<i)for(var r=0;r<i;r++){for(var o=b.default.floor(3*Math.random())+1,a=this.getRandomOutsidePos(),u=0;u<o;u++)this.spawnEnemy(a,new g.default(3*Math.random(),3*Math.random())).target=new g.default(Math.random()*this.SIZE,Math.random()*this.SIZE).floor();this._enemyGroupsPerMin.push(Date.now())}}var y,s=m(this.entities);try{for(s.s();!(y=s.n()).done;)!function(){var e,t,n=y.value;if(n instanceof _.default&&n.hasExploded){p._entities=p._entities.filter(function(e){return e!==n});var i,r=n.position.floor(),o=b.default.floor(3*Math.random()),a=m(p.getSurroundingTileCoords(r,o));try{for(a.s();!(i=a.n()).done;){var u,s=i.value,l=s.add(.5,.5).add(-(r.x+.5),-(r.y+.5)).length,c=1-l/3,f=.5<2*Math.random()/(l+1),d=p._tiles[s.y][s.x];f?((u=new v.default).damage=d.damage+c,p._tiles[s.y][s.x]=u):d.damage=d.damage+c}}catch(e){a.e(e)}finally{a.f()}}null!==n.target&&(n.isMoving||(n.isMoving=!0,n.initialPosition=new g.default(n.position.x,n.position.y)),e=n.speed*(h/1e3),0<(t=new g.default(n.target.x-n.position.x,n.target.y-n.position.y).length)&&n.initialPosition&&(o=new g.default(n.target.x-n.initialPosition.x,n.target.y-n.initialPosition.y).length,e*=1+2*w.default.easeInOutQuart(1-t/o)),n.position.x+=e*(n.target.x-n.position.x)/(t=t<=e?e:t),n.position.y+=e*(n.target.y-n.position.y)/t,n.position.x===n.target.x&&n.position.y===n.target.y&&(n instanceof _.default&&n.explode(),n.target=null,n.isMoving=!1,n.initialPosition=null))}()}catch(e){s.e(e)}finally{s.f()}}}])&&r(e.prototype,n),i&&r(e,i),t}()},{"../core/bit-math":8,"../core/easings":9,"../core/vector":13,"../entities/enemies/robot":14,"../tiles/empty-tile":16,"../tiles/tile":17,"../tiles/wall-tile":18,"../tiles/wheat-tile":19,"./player":5}],8:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"floor",value:function(e){return e<<0}},{key:"round",value:function(e){return.5+e<<0}},{key:"abs",value:function(e){return(e^e>>31)-(e>>31)}},{key:"isInt",value:function(e){e="string"==typeof e?parseFloat(e):e;return!isNaN(e)&&(0|e)===e}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}()},{}],9:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"easeInCubic",value:function(e){return e*e*e}},{key:"easeInOutQuart",value:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}()},{}],10:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.simulationStep=1e3/60,this.frameDelta=0,this.lastFrameTimeMs=0,this.fps=60,this.lastFpsUpdate=0,this.framesThisSecond=0,this.numUpdateSteps=0,this.minFrameDelay=0,this.running=!1,this.started=!1,this.panic=!1,this.begin=function(e,t){},this.end=function(e,t){},this.update=function(e){},this.render=function(e){},this.animate=this.animate.bind(this)}var t,n,i;return t=e,(n=[{key:"maxAllowedFps",get:function(){return 1e3/this.minFrameDelay},set:function(e){0===(e=null==e?1/0:e)?this.stop():this.minFrameDelay=1e3/e}},{key:"resetFrameDelta",value:function(){var e=this.frameDelta;return this.frameDelta=0,e}},{key:"start",value:function(){var t=this;this.started||(this.started=!0,this.rafHandle=requestAnimationFrame(function(e){t.render(1),t.running=!0,t.lastFrameTimeMs=e,t.lastFpsUpdate=e,t.framesThisSecond=0,t.rafHandle=requestAnimationFrame(t.animate)}))}},{key:"stop",value:function(){this.running=!1,this.started=!1,this.rafHandle&&cancelAnimationFrame(this.rafHandle)}},{key:"animate",value:function(e){if(this.rafHandle=requestAnimationFrame(this.animate),!(e<this.lastFrameTimeMs+this.minFrameDelay)){for(this.frameDelta+=e-this.lastFrameTimeMs,this.lastFrameTimeMs=e,this.begin(e,this.frameDelta),e>this.lastFpsUpdate+1e3&&(this.fps=.25*this.framesThisSecond+.75*this.fps,this.lastFpsUpdate=e,this.framesThisSecond=0),++this.framesThisSecond,this.numUpdateSteps=0;this.frameDelta>=this.simulationStep;)if(this.update(this.simulationStep),this.frameDelta-=this.simulationStep,240<=++this.numUpdateSteps){this.panic=!0;break}this.render(this.frameDelta/this.simulationStep),this.end(this.fps,this.panic),this.panic=!1}}}])&&r(t.prototype,n),i&&r(t,i),e}()},{}],11:[function(e,t,n){"use strict";function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("../base/camera")),v=i(e("../tiles/empty-tile")),_=i(e("./util")),s=i(e("./vector")),g=i(e("./bit-math"));n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.FONT_SIZE=12,this.FONT_EMOJI_SIZE=16,this.SQUARE_SIZE=32,this._canvas=document.createElement("canvas"),this.camera=new o.default(this.SQUARE_SIZE),this.mousePos=new s.default(0,0),this.equippedItem=null,this.setupCanvas()}var t,n,i;return t=e,(n=[{key:"width",get:function(){return this._canvas.width}},{key:"height",get:function(){return this._canvas.height}},{key:"z",get:function(){return this.camera.zoomAmount}},{key:"ctx",get:function(){return this._canvas.getContext("2d")}},{key:"setupCanvas",value:function(){var t=this;this.setToWindowSize(),window.addEventListener("load",function(e){t.setToWindowSize()}),window.addEventListener("resize",function(e){t.setToWindowSize()}),document.body.append(this._canvas)}},{key:"setToWindowSize",value:function(){this._canvas.width=window.innerWidth,this._canvas.height=window.innerHeight}},{key:"paintChar",value:function(e,t,n,i,r,o){o&&(e.shadowColor="white",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=g.default.floor(5*this.z));var a=this.FONT_SIZE,o="Courier New";_.default.isAlphaNumeric(t)||(a=this.FONT_EMOJI_SIZE,o="OpenMoji");r=new s.default((this.SQUARE_SIZE*i+this.SQUARE_SIZE/2)*this.z-this.camera.position.x,(this.SQUARE_SIZE*r+this.SQUARE_SIZE/2)*this.z-this.camera.position.y),a=g.default.floor(a*this.z);e.fillStyle=n,e.textAlign="center",e.textBaseline="middle",e.font="".concat(a,'px "').concat(o,'"'),e.fillText(t,g.default.floor(r.x),g.default.floor(r.y)),e.shadowBlur=0}},{key:"paintSquare",value:function(e,t,n,i,r){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=6<arguments.length?arguments[6]:void 0,u=7<arguments.length?arguments[7]:void 0,s=this.camera.zoomAmount,l=e.globalAlpha;null!==o&&(e.globalAlpha=o),e.fillStyle=r,e.fillRect(this.SQUARE_SIZE*t*s-this.camera.position.x,this.SQUARE_SIZE*n*s-this.camera.position.y,this.SQUARE_SIZE*s,this.SQUARE_SIZE*s),a&&this.paintChar(e,a,u||"white",t,n,i),e.globalAlpha=l}},{key:"outlineSquare",value:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;e.strokeStyle="white",e.lineWidth=i*this.z,e.strokeRect((this.SQUARE_SIZE*t+i/2)*this.z-this.camera.position.x,(this.SQUARE_SIZE*n+i/2)*this.z-this.camera.position.y,(this.SQUARE_SIZE-i)*this.z,(this.SQUARE_SIZE-i)*this.z)}},{key:"paintProgressBar",value:function(e,t,n,i,r,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"green",u=e.globalAlpha;e.globalAlpha=.65,e.fillStyle="white",e.fillRect(this.SQUARE_SIZE*t*this.z-this.camera.position.x,this.SQUARE_SIZE*n*this.z-this.camera.position.y,this.SQUARE_SIZE*i*this.z,this.SQUARE_SIZE*r*this.z),e.fillStyle=a,e.fillRect((this.SQUARE_SIZE*t+1)*this.z-this.camera.position.x,(this.SQUARE_SIZE*n+1)*this.z-this.camera.position.y,(this.SQUARE_SIZE*i-2)*this.z*o,(this.SQUARE_SIZE*r-2)*this.z),e.globalAlpha=u}},{key:"render",value:function(e){var t=this.ctx;if(t){var n=this.camera.worldPosFromScreen(this.mousePos);t.clearRect(0,0,this._canvas.width,this._canvas.height);for(var i=Math.floor(this.camera.position.x/(this.SQUARE_SIZE*this.camera.zoomAmount)),r=Math.ceil((this.camera.position.x+window.innerWidth)/(this.SQUARE_SIZE*this.camera.zoomAmount)),o=Math.floor(this.camera.position.y/(this.SQUARE_SIZE*this.camera.zoomAmount)),a=Math.ceil((this.camera.position.y+window.innerHeight)/(this.SQUARE_SIZE*this.camera.zoomAmount)),u=o;u<a;u++)for(var s=i;s<r;s++)this.paintSquare(t,s,u,!1,_.default.lightenDarkenColor(v.default.COLOR,8));for(var l=0;l<e.tiles.length;l++)for(var c=0;c<e.tiles[l].length;c++){t.globalAlpha=1;var f=g.default.floor(n.x)===c&&g.default.floor(n.y)===l,d=e.tiles[l][c];d.render(this,t,c,l,f),f&&this.outlineSquare(t,c,l),d.renderLatest(this,t,c,l,f)}var h,p=m(e.entities);try{for(p.s();!(h=p.n()).done;){var y=h.value;this.paintChar(t,y.getChar(),"white",y.position.x,y.position.y,!1)}}catch(e){p.e(e)}finally{p.f()}}}}])&&r(t.prototype,n),i&&r(t,i),e}()},{"../base/camera":2,"../tiles/empty-tile":16,"./bit-math":8,"./util":12,"./vector":13}],12:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u)}var e,t,n;return e=u,n=[{key:"isAlphaNumeric",value:function(e){return u.REGEXP_ALPHA_NUMERIC.test(e)}},{key:"leadZeros",value:function(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}},{key:"mixColors",value:function(e,t,n){var i=parseInt(e[1]+e[2],16),r=parseInt(e[3]+e[4],16),o=parseInt(e[5]+e[6],16),a=parseInt(t[1]+t[2],16),e=parseInt(t[3]+t[4],16),t=parseInt(t[5]+t[6],16),a=Math.round(u.mix(i,a,n)),e=Math.round(u.mix(r,e,n)),n=Math.round(u.mix(o,t,n));return u.generateHexFromRGB(a,e,n)}},{key:"generateHexFromRGB",value:function(e,t,n){for(var i=e.toString(16),r=t.toString(16),o=n.toString(16);i.length<2;)i="0"+i;for(;r.length<2;)r="0"+r;for(;o.length<2;)o="0"+o;return"#"+i+r+o}},{key:"mix",value:function(e,t,n){return e+n*(t-e)}},{key:"lightenDarkenColor",value:function(e,t){var n=!1;"#"===e[0]&&(e=e.slice(1),n=!0);var i=parseInt(e,16),r=(i>>16)+t;255<r?r=255:r<0&&(r=0);e=(i>>8&255)+t;255<e?e=255:e<0&&(e=0);t=(255&i)+t;return 255<t?t=255:t<0&&(t=0),(n?"#":"")+(t|e<<8|r<<16).toString(16)}}],(t=null)&&i(e.prototype,t),n&&i(e,n),u}();(n.default=r).REGEXP_ALPHA_NUMERIC=new RegExp(/[\w ]+/)},{}],13:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("./bit-math"));n.default=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e,this.y=t}var e,t,i;return e=n,(t=[{key:"length",get:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"add",value:function(e,t){return new n(this.x+e,this.y+t)}},{key:"floor",value:function(){return new n(o.default.floor(this.x),o.default.floor(this.y))}},{key:"rotate",value:function(e){var t=-e*(Math.PI/180),e=Math.cos(t),t=Math.sin(t);return new n(Math.round(1e4*(this.x*e-this.y*t))/1e4,Math.round(1e4*(this.x*t+this.y*e))/1e4)}},{key:"toString",value:function(){return"Vector (".concat(this.x,", ").concat(this.y,")")}}])&&r(e.prototype,t),i&&r(e,i),n}()},{"./bit-math":8}],14:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("../../core/vector"));n.default=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.EXPLODE_TIME=3e3,this.name="Robot",this.speed=2,this.initialPosition=null,this.target=null,this.isHostile=!0,this.isMoving=!1,this._explodedAt=null,this.position=new o.default(e,t)}var e,t,i;return e=n,(t=[{key:"explosionProgress",get:function(){if(null===this._explodedAt)return 0;var e=(Date.now()-this._explodedAt)/this.EXPLODE_TIME;return 1<e?1:e}},{key:"hasExploded",get:function(){return 1===this.explosionProgress}},{key:"getChar",value:function(){if(0<this.explosionProgress){if(this.explosionProgress<=.6)return"üí£";if(.6<this.explosionProgress&&this.explosionProgress<.8)return"‚ú®";if(.8<this.explosionProgress&&this.explosionProgress<1)return"üí•";if(1<=this.explosionProgress)return"üî•"}return"ü§ñ"}},{key:"explode",value:function(){this._explodedAt=Date.now()}}])&&r(e.prototype,t),i&&r(e,i),n}()},{"../../core/vector":13}],15:[function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});n=i(e("./base/game")),e=i(e("./base/browser"));n.default.instance,e.default.isMobile&&e.default.alert("Warning: This is an early-alpha build of the game, mobile is not yet supported.")},{"./base/browser":1,"./base/game":3}],16:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var f=i(e("./tile")),e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,f.default);var e,t,n,i=l(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.apply(this,arguments)).name="Empty",e.timeCreated=Date.now(),e}return e=o,(t=[{key:"getChar",value:function(){return"x"}},{key:"getHexColor",value:function(){return this.getDamagedHexColor(o.COLOR)}},{key:"getCharColor",value:function(){return"#666666"}},{key:"onClicked",value:function(){}},{key:"renderLatest",value:function(e,t,n,i,r){u(c(o.prototype),"renderLatest",this).call(this,e,t,n,i,r)}}])&&a(e.prototype,t),n&&a(e,n),o}();(n.default=e).COLOR="#ebb434"},{"./tile":17}],17:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("../core/util")),e=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="",this.timeCreated=Date.now(),this._damage=0}var e,n,i;return e=t,(n=[{key:"damage",get:function(){return this._damage},set:function(e){this._damage=1<e?1:e<0?0:e}},{key:"hasCollision",value:function(){return!1}},{key:"getChar",value:function(){return"x"}},{key:"getDamagedHexColor",value:function(e){var t=50*-this.damage;return o.default.lightenDarkenColor(e,t)}},{key:"getHexColor",value:function(){return"#000000"}},{key:"getCharColor",value:function(){return"#000000"}},{key:"onClicked",value:function(){}},{key:"paintSquare",value:function(e,t,n,i,r){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=this.getHexColor();a&&e.paintSquare(t,n,i,r,a,o,this.getChar(),this.getCharColor())}},{key:"render",value:function(e,t,n,i,r){this.paintSquare(e,t,n,i,r,5<arguments.length&&void 0!==arguments[5]?arguments[5]:null)}},{key:"renderLatest",value:function(e,t,n,i,r){r&&0<this.damage&&e.paintProgressBar(t,n+.125,i+.15,.75,.15,this.damage,"red")}},{key:"update",value:function(e){this.damage-=e/t.DAMAGE_HEAL_TIME}}])&&r(e.prototype,n),i&&r(e,i),t}();(n.default=e).DAMAGE_HEAL_TIME=6e4,e.COLOR=""},{"../core/util":12}],18:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var f=i(e("./tile"));n.default=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,f.default);var e,t,n,i=l(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.apply(this,arguments)).buyPrice=10,e.sellPrice=4,e.name="Wall",e}return e=o,(t=[{key:"hasCollision",value:function(){return!0}},{key:"getChar",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?"üö´":null}},{key:"getHexColor",value:function(){return"#111111"}},{key:"getCharColor",value:function(){return null}},{key:"onClicked",value:function(){}},{key:"renderLatest",value:function(e,t,n,i,r){u(c(o.prototype),"renderLatest",this).call(this,e,t,n,i,r)}}])&&a(e.prototype,t),n&&a(e,n),o}()},{"./tile":17}],19:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==r(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var f=i(e("../core/util")),d=i(e("./empty-tile")),h=i(e("./tile")),p=i(e("../core/easings")),y=i(e("../core/bit-math"));n.default=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,h.default);var e,t,n,i=l(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.apply(this,arguments)).buyPrice=0,e.sellPrice=0,e.GROWTH_TIME=7500,e.MIN_SEED_DROP=0,e.MAX_SEED_DROP=3,e.COLOR_GROWN="#7dbf21",e.name="Wheat",e}return e=a,(t=[{key:"growthState",get:function(){var e=(Date.now()-this.timeCreated)/this.GROWTH_TIME;return e<1?e*(1-this.damage):1<e?1:e}},{key:"getChar",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]||this.growthState<.4?"üå±":1<=this.growthState?"üåæ":"üåø"}},{key:"getCharColor",value:function(){return"#ffffff"}},{key:"getHexColor",value:function(){var e=p.default.easeInCubic(this.growthState),e=f.default.mixColors(d.default.COLOR,this.COLOR_GROWN,e);return this.getDamagedHexColor(e)}},{key:"onClicked",value:function(){}},{key:"dropSeeds",value:function(){return y.default.floor(Math.random()*(this.MAX_SEED_DROP-this.MIN_SEED_DROP+1))+this.MIN_SEED_DROP}},{key:"render",value:function(e,t,n,i,r){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;u(c(a.prototype),"render",this).call(this,e,t,n,i,r,o)}},{key:"renderLatest",value:function(e,t,n,i,r){u(c(a.prototype),"renderLatest",this).call(this,e,t,n,i,r),r&&this.growthState<1&&e.paintProgressBar(t,n+.125,i+.7,.75,.15,this.growthState)}}])&&o(e.prototype,t),n&&o(e,n),a}()},{"../core/bit-math":8,"../core/easings":9,"../core/util":12,"./empty-tile":16,"./tile":17}],20:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("../core/util"));n.default=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.TEXT="Click to load";var e=this.TEXT.toUpperCase();this.TRANSFORMED_TEXT=e.split("").join(" ")}var e,n,i;return e=t,(n=[{key:"render",value:function(e,t){t.fillStyle="#111111",t.fillRect(0,0,e.width,e.height),t.fillStyle="#f3bc3c",t.textAlign="center",t.textBaseline="middle",t.font="".concat(20,'px "Courier New"'),t.shadowColor=o.default.lightenDarkenColor("#f3bc3c",20),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=7,t.fillText(this.TRANSFORMED_TEXT,e.width/2,e.height/2),t.shadowBlur=0}},{key:"update",value:function(e){}},{key:"onClick",value:function(e){}}])&&r(e.prototype,n),i&&r(e,i),t}()},{"../core/util":12}],21:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var l=i(e("../core/util")),o=i(e("../base/sound"));n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.LOGO=[" __     __     __  __     ______     ______     ______      ______   ______     ______     __    __     ______     ______    ",'/\\ \\  _ \\ \\   /\\ \\_\\ \\   /\\  ___\\   /\\  __ \\   /\\__  _\\    /\\  ___\\ /\\  __ \\   /\\  == \\   /\\ "-./  \\   /\\  ___\\   /\\  == \\   ','\\ \\ \\/ ".\\ \\  \\ \\  __ \\  \\ \\  __\\   \\ \\  __ \\  \\/_/\\ \\/    \\ \\  __\\ \\ \\  __ \\  \\ \\  __<   \\ \\ \\-./\\ \\  \\ \\  __\\   \\ \\  __<   ',' \\ \\__/".~\\_\\  \\ \\_\\ \\_\\  \\ \\_____\\  \\ \\_\\ \\_\\    \\ \\_\\     \\ \\_\\    \\ \\_\\ \\_\\  \\ \\_\\ \\_\\  \\ \\_\\ \\ \\_\\  \\ \\_____\\  \\ \\_\\ \\_\\ ',"  \\/_/   \\/_/   \\/_/\\/_/   \\/_____/   \\/_/\\/_/     \\/_/      \\/_/     \\/_/\\/_/   \\/_/ /_/   \\/_/  \\/_/   \\/_____/   \\/_/ /_/ "],this.DESCRIPTION=["Plant wheat seeds, harvest crops and sell them.","","Avoid robot attacks at all costs."],this.CREDITS=["Programming by ALEXANDER ROIDL and JULIAN ARNOLD","Soundtrack by JULIAN ARNOLD"],this.LONGEST_LINE_WIDTH=this.LOGO.reduce(function(e,t){return e.length>t.length?e:t}).length}var t,n,i;return t=e,(n=[{key:"render",value:function(e,t){var n=e.width/(20*this.LONGEST_LINE_WIDTH)*1.65*.75,i=1;t.fillStyle="#111111",t.fillRect(0,0,e.width,e.height),t.fillStyle="#f3bc3c",t.textAlign="center",t.textBaseline="middle",t.font="".concat(20*n,'px "Courier New"'),t.shadowColor=l.default.lightenDarkenColor("#f3bc3c",20),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=7;for(var r=10*Math.sin(Date.now()/1e3),o=0;o<this.LOGO.length;o++){var a=20*i*n*(o-this.LOGO.length);t.fillText(this.LOGO[o],e.width/2,e.height/2+a+r)}n=20,i=1.5,t.textBaseline="top",t.font="".concat(n,'px "Courier New"');for(var u=0;u<this.DESCRIPTION.length;u++)t.fillText(this.DESCRIPTION[u],e.width/2,e.height/2+i*n*(u+3));n=15,i=1.5,t.textBaseline="bottom",t.font="".concat(n,'px "Courier New"'),t.shadowBlur=5;for(var s=0;s<this.CREDITS.length;s++)t.fillText(this.CREDITS[s],e.width/2,e.height-4.5*n+i*n*s);t.shadowBlur=0}},{key:"update",value:function(e){o.default.mainMusic.paused&&(o.default.mainMusic.volume=.6,o.default.mainMusic.play())}},{key:"onClick",value:function(e){o.default.mainMusic.volume=.2}}])&&r(t.prototype,n),i&&r(t,i),e}()},{"../base/sound":6,"../core/util":12}],22:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("./title-screen-logo-slide")),a=i(e("./title-screen-load"));n.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hidden=!1,this.slideId=0,this._clickedAt=null,this._slides=[new a.default,new o.default]}var t,n,i;return t=e,(n=[{key:"onClick",value:function(e){null===this._clickedAt&&(this._clickedAt=Date.now()),this._slides[this.slideId].onClick(e),this.slideId+1>=this._slides.length?this.hidden=!0:this.slideId++}},{key:"update",value:function(e){this._slides[this.slideId]&&this._slides[this.slideId].update(e)}},{key:"render",value:function(e,t){this.hidden||this._slides[this.slideId]&&this._slides[this.slideId].render(e,t)}}])&&r(t.prototype,n),i&&r(t,i),e}()},{"./title-screen-load":20,"./title-screen-logo-slide":21}]},{},[15]);